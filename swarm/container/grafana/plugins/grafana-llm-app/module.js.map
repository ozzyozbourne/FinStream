{"version":3,"file":"module.js","mappings":"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","sources":["webpack:///../../../node_modules/semver/classes/comparator.js","webpack:///../../../node_modules/semver/classes/range.js","webpack:///../../../node_modules/semver/classes/semver.js","webpack:///../../../node_modules/semver/functions/clean.js","webpack:///../../../node_modules/semver/functions/cmp.js","webpack:///../../../node_modules/semver/functions/coerce.js","webpack:///../../../node_modules/semver/functions/compare-build.js","webpack:///../../../node_modules/semver/functions/compare-loose.js","webpack:///../../../node_modules/semver/functions/compare.js","webpack:///../../../node_modules/semver/functions/diff.js","webpack:///../../../node_modules/semver/functions/eq.js","webpack:///../../../node_modules/semver/functions/gt.js","webpack:///../../../node_modules/semver/functions/gte.js","webpack:///../../../node_modules/semver/functions/inc.js","webpack:///../../../node_modules/semver/functions/lt.js","webpack:///../../../node_modules/semver/functions/lte.js","webpack:///../../../node_modules/semver/functions/major.js","webpack:///../../../node_modules/semver/functions/minor.js","webpack:///../../../node_modules/semver/functions/neq.js","webpack:///../../../node_modules/semver/functions/parse.js","webpack:///../../../node_modules/semver/functions/patch.js","webpack:///../../../node_modules/semver/functions/prerelease.js","webpack:///../../../node_modules/semver/functions/rcompare.js","webpack:///../../../node_modules/semver/functions/rsort.js","webpack:///../../../node_modules/semver/functions/satisfies.js","webpack:///../../../node_modules/semver/functions/sort.js","webpack:///../../../node_modules/semver/functions/valid.js","webpack:///../../../node_modules/semver/index.js","webpack:///../../../node_modules/semver/internal/constants.js","webpack:///../../../node_modules/semver/internal/debug.js","webpack:///../../../node_modules/semver/internal/identifiers.js","webpack:///../../../node_modules/semver/internal/lrucache.js","webpack:///../../../node_modules/semver/internal/parse-options.js","webpack:///../../../node_modules/semver/internal/re.js","webpack:///../../../node_modules/semver/ranges/gtr.js","webpack:///../../../node_modules/semver/ranges/intersects.js","webpack:///../../../node_modules/semver/ranges/ltr.js","webpack:///../../../node_modules/semver/ranges/max-satisfying.js","webpack:///../../../node_modules/semver/ranges/min-satisfying.js","webpack:///../../../node_modules/semver/ranges/min-version.js","webpack:///../../../node_modules/semver/ranges/outside.js","webpack:///../../../node_modules/semver/ranges/simplify.js","webpack:///../../../node_modules/semver/ranges/subset.js","webpack:///../../../node_modules/semver/ranges/to-comparators.js","webpack:///../../../node_modules/semver/ranges/valid.js","webpack:///external amd \"@emotion/css\"","webpack:///external amd \"@grafana/data\"","webpack:///external amd \"@grafana/runtime\"","webpack:///external amd \"@grafana/ui\"","webpack:///external amd \"react\"","webpack:///external amd \"rxjs\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./components/testIds.ts","webpack:///../../../node_modules/tslib/tslib.es6.mjs","webpack:///../../../node_modules/react-use/esm/useAsync.js","webpack:///../../../node_modules/react-use/esm/useAsyncFn.js","webpack:///../../../node_modules/react-use/esm/useMountedState.js","webpack:///../../../node_modules/zod/lib/index.mjs","webpack:///./pages/Models.tsx","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/types.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/client/index.js","webpack:///../../../node_modules/pkce-challenge/dist/index.browser.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/shared/auth.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/client/auth.js","webpack:///../../../node_modules/eventsource-parser/dist/index.js","webpack:///../../../node_modules/eventsource-parser/dist/stream.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/client/streamableHttp.js","webpack:///../../grafana-llm-frontend/dist/esm/constants.mjs","webpack:///../../grafana-llm-frontend/dist/esm/mcp.mjs","webpack:///./pages/MCPTools.tsx","webpack:///./components/AppConfig/HealthCheck.tsx","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/config.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/scanInternals.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/toArray.js","webpack:///../../../node_modules/uuid/dist/esm-browser/native.js","webpack:///../../../node_modules/uuid/dist/esm-browser/rng.js","webpack:///../../../node_modules/uuid/dist/esm-browser/stringify.js","webpack:///../../../node_modules/uuid/dist/esm-browser/v4.js","webpack:///../../grafana-llm-frontend/dist/esm/llm.mjs","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/scan.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/tap.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/reduce.js","webpack:///./components/AppConfig/ModelConfig.tsx","webpack:///./components/AppConfig/DevSandbox/DevSandboxChat.tsx","webpack:///./components/AppConfig/DevSandbox/ToolParameterForm.tsx","webpack:///./components/AppConfig/DevSandbox/DevSandboxToolInspector.tsx","webpack:///./components/AppConfig/DevSandbox/DevSandbox.tsx","webpack:///./components/AppConfig/AzureConfig.tsx","webpack:///./components/AppConfig/OpenAI.tsx","webpack:///./components/AppConfig/OpenAILogo.tsx","webpack:///./components/AppConfig/AnthropicConfig.tsx","webpack:///./components/AppConfig/AnthropicLogo.tsx","webpack:///./components/AppConfig/LLMConfig.tsx","webpack:///./components/AppConfig/AuthSettings/BasicAuth.tsx","webpack:///./components/AppConfig/Vector.tsx","webpack:///./components/AppConfig/AppConfig.tsx","webpack:///./module.ts","webpack:///./pages/MainPage.tsx"],"sourcesContent":["const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","const SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","class LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1269__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const testIds = {\n  appConfig: {\n    container: 'ac-container',\n    provider: 'ac-provider',\n    openAIKey: 'ac-openai-api-key',\n    customizeOpenAIApiPath: 'ac-customize-openai-api-path',\n    openAIApiPath: 'ac-openai-api-path',\n    openAIOrganizationID: 'ac-openai-api-organization-id',\n    openAIUrl: 'ac-openai-api-url',\n    anthropicKey: 'ac-anthropic-api-key',\n    anthropicUrl: 'ac-anthropic-api-url',\n    vectorEnabled: 'ac-vector-enabled',\n    qdrantAddress: 'ac-qdrant-address',\n    qdrantSecure: 'ac-qdrant-secure',\n    qdrantApiKey: 'ac-qdrant-api-key',\n    grafanaVectorApiUrl: 'ac-grafana-vector-api-url',\n    model: 'ac-vector-model',\n    submit: 'ac-submit-form',\n    basicAuthUsername: 'ac-basic-auth-username',\n    basicAuthPassword: 'ac-basic-auth-password',\n  },\n  mainPage: {\n    container: 'main-page-container',\n  },\n  models: {\n    container: 'models-container',\n  },\n  mcpTools: {\n    container: 'mcp-tools-container',\n    disabled: 'mcp-tools-disabled',\n    loading: 'mcp-tools-loading',\n    error: 'mcp-tools-error',\n    empty: 'mcp-tools-empty',\n    list: 'mcp-tools-list',\n    toolItem: 'mcp-tools-tool-item',\n    toolName: 'mcp-tools-tool-name',\n    toolDescription: 'mcp-tools-tool-description',\n  },\n};\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","import { useEffect } from 'react';\nimport useAsyncFn from './useAsyncFn';\nexport default function useAsync(fn, deps) {\n    if (deps === void 0) { deps = []; }\n    var _a = useAsyncFn(fn, deps, {\n        loading: true,\n    }), state = _a[0], callback = _a[1];\n    useEffect(function () {\n        callback();\n    }, [callback]);\n    return state;\n}\n","import { __assign } from \"tslib\";\nimport { useCallback, useRef, useState } from 'react';\nimport useMountedState from './useMountedState';\nexport default function useAsyncFn(fn, deps, initialState) {\n    if (deps === void 0) { deps = []; }\n    if (initialState === void 0) { initialState = { loading: false }; }\n    var lastCallId = useRef(0);\n    var isMounted = useMountedState();\n    var _a = useState(initialState), state = _a[0], set = _a[1];\n    var callback = useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var callId = ++lastCallId.current;\n        if (!state.loading) {\n            set(function (prevState) { return (__assign(__assign({}, prevState), { loading: true })); });\n        }\n        return fn.apply(void 0, args).then(function (value) {\n            isMounted() && callId === lastCallId.current && set({ value: value, loading: false });\n            return value;\n        }, function (error) {\n            isMounted() && callId === lastCallId.current && set({ error: error, loading: false });\n            return error;\n        });\n    }, deps);\n    return [state, callback];\n}\n","import { useCallback, useEffect, useRef } from 'react';\nexport default function useMountedState() {\n    var mountedRef = useRef(false);\n    var get = useCallback(function () { return mountedRef.current; }, []);\n    useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return get;\n}\n","var util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n\nconst ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `smaller than or equal to`\n                        : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\n\nlet overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === errorMap ? undefined : errorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" &&\n                (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\n\nvar _ZodEnum_cache, _ZodNativeEnum_cache;\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (this._key instanceof Array) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        var _a, _b;\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message !== null && message !== void 0 ? message : ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: (_a = message !== null && message !== void 0 ? message : required_error) !== null && _a !== void 0 ? _a : ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: (_b = message !== null && message !== void 0 ? message : invalid_type_error) !== null && _b !== void 0 ? _b : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        var _a, _b;\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if ((_b = (_a = err === null || err === void 0 ? void 0 : err.message) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === null || _b === void 0 ? void 0 : _b.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    // let regex = `\\\\d{2}:\\\\d{2}:\\\\d{2}`;\n    let regex = `([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d`;\n    if (args.precision) {\n        regex = `${regex}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        regex = `${regex}(\\\\.\\\\d+)?`;\n    }\n    return regex;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nfunction datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (!decoded.typ || !decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        var _a, _b;\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n            local: (_b = options === null || options === void 0 ? void 0 : options.local) !== null && _b !== void 0 ? _b : false,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options === null || options === void 0 ? void 0 : options.position,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    var _a;\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" ||\n            (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null, min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" ||\n                ch.kind === \"int\" ||\n                ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch (_a) {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    var _a;\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") ;\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util.objectKeys(mask).forEach((key) => {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date &&\n        bType === ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    constructor() {\n        super(...arguments);\n        _ZodEnum_cache.set(this, void 0);\n    }\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\")) {\n            __classPrivateFieldSet(this, _ZodEnum_cache, new Set(this._def.values), \"f\");\n        }\n        if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\").has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\n_ZodEnum_cache = new WeakMap();\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    constructor() {\n        super(...arguments);\n        _ZodNativeEnum_cache.set(this, void 0);\n    }\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string &&\n            ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\")) {\n            __classPrivateFieldSet(this, _ZodNativeEnum_cache, new Set(util.getValidEnumValues(this._def.values)), \"f\");\n        }\n        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\").has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\n_ZodNativeEnum_cache = new WeakMap();\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise &&\n            ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!isValid(base))\n                        return base;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\"\n            ? params.default\n            : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nclass ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result)\n            ? result.then((data) => freeze(data))\n            : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\"\n        ? params(data)\n        : typeof params === \"string\"\n            ? { message: params }\n            : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nfunction custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            var _a, _b;\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    var _a, _b;\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = (_b = (_a = params.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = (_b = (_a = params.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nconst NEVER = INVALID;\n\nvar z = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    defaultErrorMap: errorMap,\n    setErrorMap: setErrorMap,\n    getErrorMap: getErrorMap,\n    makeIssue: makeIssue,\n    EMPTY_PATH: EMPTY_PATH,\n    addIssueToContext: addIssueToContext,\n    ParseStatus: ParseStatus,\n    INVALID: INVALID,\n    DIRTY: DIRTY,\n    OK: OK,\n    isAborted: isAborted,\n    isDirty: isDirty,\n    isValid: isValid,\n    isAsync: isAsync,\n    get util () { return util; },\n    get objectUtil () { return objectUtil; },\n    ZodParsedType: ZodParsedType,\n    getParsedType: getParsedType,\n    ZodType: ZodType,\n    datetimeRegex: datetimeRegex,\n    ZodString: ZodString,\n    ZodNumber: ZodNumber,\n    ZodBigInt: ZodBigInt,\n    ZodBoolean: ZodBoolean,\n    ZodDate: ZodDate,\n    ZodSymbol: ZodSymbol,\n    ZodUndefined: ZodUndefined,\n    ZodNull: ZodNull,\n    ZodAny: ZodAny,\n    ZodUnknown: ZodUnknown,\n    ZodNever: ZodNever,\n    ZodVoid: ZodVoid,\n    ZodArray: ZodArray,\n    ZodObject: ZodObject,\n    ZodUnion: ZodUnion,\n    ZodDiscriminatedUnion: ZodDiscriminatedUnion,\n    ZodIntersection: ZodIntersection,\n    ZodTuple: ZodTuple,\n    ZodRecord: ZodRecord,\n    ZodMap: ZodMap,\n    ZodSet: ZodSet,\n    ZodFunction: ZodFunction,\n    ZodLazy: ZodLazy,\n    ZodLiteral: ZodLiteral,\n    ZodEnum: ZodEnum,\n    ZodNativeEnum: ZodNativeEnum,\n    ZodPromise: ZodPromise,\n    ZodEffects: ZodEffects,\n    ZodTransformer: ZodEffects,\n    ZodOptional: ZodOptional,\n    ZodNullable: ZodNullable,\n    ZodDefault: ZodDefault,\n    ZodCatch: ZodCatch,\n    ZodNaN: ZodNaN,\n    BRAND: BRAND,\n    ZodBranded: ZodBranded,\n    ZodPipeline: ZodPipeline,\n    ZodReadonly: ZodReadonly,\n    custom: custom,\n    Schema: ZodType,\n    ZodSchema: ZodType,\n    late: late,\n    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },\n    coerce: coerce,\n    any: anyType,\n    array: arrayType,\n    bigint: bigIntType,\n    boolean: booleanType,\n    date: dateType,\n    discriminatedUnion: discriminatedUnionType,\n    effect: effectsType,\n    'enum': enumType,\n    'function': functionType,\n    'instanceof': instanceOfType,\n    intersection: intersectionType,\n    lazy: lazyType,\n    literal: literalType,\n    map: mapType,\n    nan: nanType,\n    nativeEnum: nativeEnumType,\n    never: neverType,\n    'null': nullType,\n    nullable: nullableType,\n    number: numberType,\n    object: objectType,\n    oboolean: oboolean,\n    onumber: onumber,\n    optional: optionalType,\n    ostring: ostring,\n    pipeline: pipelineType,\n    preprocess: preprocessType,\n    promise: promiseType,\n    record: recordType,\n    set: setType,\n    strictObject: strictObjectType,\n    string: stringType,\n    symbol: symbolType,\n    transformer: effectsType,\n    tuple: tupleType,\n    'undefined': undefinedType,\n    union: unionType,\n    unknown: unknownType,\n    'void': voidType,\n    NEVER: NEVER,\n    ZodIssueCode: ZodIssueCode,\n    quotelessJson: quotelessJson,\n    ZodError: ZodError\n});\n\nexport { BRAND, DIRTY, EMPTY_PATH, INVALID, NEVER, OK, ParseStatus, ZodType as Schema, ZodAny, ZodArray, ZodBigInt, ZodBoolean, ZodBranded, ZodCatch, ZodDate, ZodDefault, ZodDiscriminatedUnion, ZodEffects, ZodEnum, ZodError, ZodFirstPartyTypeKind, ZodFunction, ZodIntersection, ZodIssueCode, ZodLazy, ZodLiteral, ZodMap, ZodNaN, ZodNativeEnum, ZodNever, ZodNull, ZodNullable, ZodNumber, ZodObject, ZodOptional, ZodParsedType, ZodPipeline, ZodPromise, ZodReadonly, ZodRecord, ZodType as ZodSchema, ZodSet, ZodString, ZodSymbol, ZodEffects as ZodTransformer, ZodTuple, ZodType, ZodUndefined, ZodUnion, ZodUnknown, ZodVoid, addIssueToContext, anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, coerce, custom, dateType as date, datetimeRegex, z as default, errorMap as defaultErrorMap, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, getErrorMap, getParsedType, instanceOfType as instanceof, intersectionType as intersection, isAborted, isAsync, isDirty, isValid, late, lazyType as lazy, literalType as literal, makeIssue, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, objectUtil, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, quotelessJson, recordType as record, setType as set, setErrorMap, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, util, voidType as void, z };\n","import React from 'react';\nimport { testIds } from '../components/testIds';\nimport { useAsync } from 'react-use';\nimport { getBackendSrv } from '@grafana/runtime';\n\nexport function Models() {\n  const { error, loading, value } = useAsync(() => {\n    const backendSrv = getBackendSrv();\n\n    return backendSrv.get(`api/plugins/grafana-llm-app/resources/openai/v1/models`);\n  });\n\n  if (loading) {\n    return (\n      <div data-testid={testIds.models.container}>\n        <span>Loading...</span>\n      </div>\n    );\n  }\n\n  if (error || !value) {\n    return (\n      <div data-testid={testIds.models.container}>\n        <span>Error loading models: {error?.message}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid={testIds.models.container}>\n      <h1>Available Models</h1>\n      <pre>{JSON.stringify(value, null, 2)}</pre>\n    </div>\n  );\n}\n","import { z } from \"zod\";\nexport const LATEST_PROTOCOL_VERSION = \"2025-03-26\";\nexport const SUPPORTED_PROTOCOL_VERSIONS = [\n    LATEST_PROTOCOL_VERSION,\n    \"2024-11-05\",\n    \"2024-10-07\",\n];\n/* JSON-RPC types */\nexport const JSONRPC_VERSION = \"2.0\";\n/**\n * A progress token, used to associate progress notifications with the original request.\n */\nexport const ProgressTokenSchema = z.union([z.string(), z.number().int()]);\n/**\n * An opaque token used to represent a cursor for pagination.\n */\nexport const CursorSchema = z.string();\nconst RequestMetaSchema = z\n    .object({\n    /**\n     * If specified, the caller is requesting out-of-band progress notifications for this request (as represented by notifications/progress). The value of this parameter is an opaque token that will be attached to any subsequent notifications. The receiver is not obligated to provide these notifications.\n     */\n    progressToken: z.optional(ProgressTokenSchema),\n})\n    .passthrough();\nconst BaseRequestParamsSchema = z\n    .object({\n    _meta: z.optional(RequestMetaSchema),\n})\n    .passthrough();\nexport const RequestSchema = z.object({\n    method: z.string(),\n    params: z.optional(BaseRequestParamsSchema),\n});\nconst BaseNotificationParamsSchema = z\n    .object({\n    /**\n     * This parameter name is reserved by MCP to allow clients and servers to attach additional metadata to their notifications.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\nexport const NotificationSchema = z.object({\n    method: z.string(),\n    params: z.optional(BaseNotificationParamsSchema),\n});\nexport const ResultSchema = z\n    .object({\n    /**\n     * This result property is reserved by the protocol to allow clients and servers to attach additional metadata to their responses.\n     */\n    _meta: z.optional(z.object({}).passthrough()),\n})\n    .passthrough();\n/**\n * A uniquely identifying ID for a request in JSON-RPC.\n */\nexport const RequestIdSchema = z.union([z.string(), z.number().int()]);\n/**\n * A request that expects a response.\n */\nexport const JSONRPCRequestSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n})\n    .merge(RequestSchema)\n    .strict();\nexport const isJSONRPCRequest = (value) => JSONRPCRequestSchema.safeParse(value).success;\n/**\n * A notification which does not expect a response.\n */\nexport const JSONRPCNotificationSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n})\n    .merge(NotificationSchema)\n    .strict();\nexport const isJSONRPCNotification = (value) => JSONRPCNotificationSchema.safeParse(value).success;\n/**\n * A successful (non-error) response to a request.\n */\nexport const JSONRPCResponseSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n    result: ResultSchema,\n})\n    .strict();\nexport const isJSONRPCResponse = (value) => JSONRPCResponseSchema.safeParse(value).success;\n/**\n * Error codes defined by the JSON-RPC specification.\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    // SDK error codes\n    ErrorCode[ErrorCode[\"ConnectionClosed\"] = -32000] = \"ConnectionClosed\";\n    ErrorCode[ErrorCode[\"RequestTimeout\"] = -32001] = \"RequestTimeout\";\n    // Standard JSON-RPC error codes\n    ErrorCode[ErrorCode[\"ParseError\"] = -32700] = \"ParseError\";\n    ErrorCode[ErrorCode[\"InvalidRequest\"] = -32600] = \"InvalidRequest\";\n    ErrorCode[ErrorCode[\"MethodNotFound\"] = -32601] = \"MethodNotFound\";\n    ErrorCode[ErrorCode[\"InvalidParams\"] = -32602] = \"InvalidParams\";\n    ErrorCode[ErrorCode[\"InternalError\"] = -32603] = \"InternalError\";\n})(ErrorCode || (ErrorCode = {}));\n/**\n * A response to a request that indicates an error occurred.\n */\nexport const JSONRPCErrorSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n    error: z.object({\n        /**\n         * The error type that occurred.\n         */\n        code: z.number().int(),\n        /**\n         * A short description of the error. The message SHOULD be limited to a concise single sentence.\n         */\n        message: z.string(),\n        /**\n         * Additional information about the error. The value of this member is defined by the sender (e.g. detailed error information, nested errors etc.).\n         */\n        data: z.optional(z.unknown()),\n    }),\n})\n    .strict();\nexport const isJSONRPCError = (value) => JSONRPCErrorSchema.safeParse(value).success;\nexport const JSONRPCMessageSchema = z.union([\n    JSONRPCRequestSchema,\n    JSONRPCNotificationSchema,\n    JSONRPCResponseSchema,\n    JSONRPCErrorSchema,\n]);\n/* Empty result */\n/**\n * A response that indicates success but carries no data.\n */\nexport const EmptyResultSchema = ResultSchema.strict();\n/* Cancellation */\n/**\n * This notification can be sent by either side to indicate that it is cancelling a previously-issued request.\n *\n * The request SHOULD still be in-flight, but due to communication latency, it is always possible that this notification MAY arrive after the request has already finished.\n *\n * This notification indicates that the result will be unused, so any associated processing SHOULD cease.\n *\n * A client MUST NOT attempt to cancel its `initialize` request.\n */\nexport const CancelledNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/cancelled\"),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The ID of the request to cancel.\n         *\n         * This MUST correspond to the ID of a request previously issued in the same direction.\n         */\n        requestId: RequestIdSchema,\n        /**\n         * An optional string describing the reason for the cancellation. This MAY be logged or presented to the user.\n         */\n        reason: z.string().optional(),\n    }),\n});\n/* Initialization */\n/**\n * Describes the name and version of an MCP implementation.\n */\nexport const ImplementationSchema = z\n    .object({\n    name: z.string(),\n    version: z.string(),\n})\n    .passthrough();\n/**\n * Capabilities a client may support. Known capabilities are defined here, in this schema, but this is not a closed set: any client can define its own, additional capabilities.\n */\nexport const ClientCapabilitiesSchema = z\n    .object({\n    /**\n     * Experimental, non-standard capabilities that the client supports.\n     */\n    experimental: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports sampling from an LLM.\n     */\n    sampling: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports listing roots.\n     */\n    roots: z.optional(z\n        .object({\n        /**\n         * Whether the client supports issuing notifications for changes to the roots list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n})\n    .passthrough();\n/**\n * This request is sent from the client to the server when it first connects, asking it to begin initialization.\n */\nexport const InitializeRequestSchema = RequestSchema.extend({\n    method: z.literal(\"initialize\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The latest version of the Model Context Protocol that the client supports. The client MAY decide to support older versions as well.\n         */\n        protocolVersion: z.string(),\n        capabilities: ClientCapabilitiesSchema,\n        clientInfo: ImplementationSchema,\n    }),\n});\nexport const isInitializeRequest = (value) => InitializeRequestSchema.safeParse(value).success;\n/**\n * Capabilities that a server may support. Known capabilities are defined here, in this schema, but this is not a closed set: any server can define its own, additional capabilities.\n */\nexport const ServerCapabilitiesSchema = z\n    .object({\n    /**\n     * Experimental, non-standard capabilities that the server supports.\n     */\n    experimental: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server supports sending log messages to the client.\n     */\n    logging: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server supports sending completions to the client.\n     */\n    completions: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server offers any prompt templates.\n     */\n    prompts: z.optional(z\n        .object({\n        /**\n         * Whether this server supports issuing notifications for changes to the prompt list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n    /**\n     * Present if the server offers any resources to read.\n     */\n    resources: z.optional(z\n        .object({\n        /**\n         * Whether this server supports clients subscribing to resource updates.\n         */\n        subscribe: z.optional(z.boolean()),\n        /**\n         * Whether this server supports issuing notifications for changes to the resource list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n    /**\n     * Present if the server offers any tools to call.\n     */\n    tools: z.optional(z\n        .object({\n        /**\n         * Whether this server supports issuing notifications for changes to the tool list.\n         */\n        listChanged: z.optional(z.boolean()),\n    })\n        .passthrough()),\n})\n    .passthrough();\n/**\n * After receiving an initialize request from the client, the server sends this response.\n */\nexport const InitializeResultSchema = ResultSchema.extend({\n    /**\n     * The version of the Model Context Protocol that the server wants to use. This may not match the version that the client requested. If the client cannot support this version, it MUST disconnect.\n     */\n    protocolVersion: z.string(),\n    capabilities: ServerCapabilitiesSchema,\n    serverInfo: ImplementationSchema,\n    /**\n     * Instructions describing how to use the server and its features.\n     *\n     * This can be used by clients to improve the LLM's understanding of available tools, resources, etc. It can be thought of like a \"hint\" to the model. For example, this information MAY be added to the system prompt.\n     */\n    instructions: z.optional(z.string()),\n});\n/**\n * This notification is sent from the client to the server after initialization has finished.\n */\nexport const InitializedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/initialized\"),\n});\nexport const isInitializedNotification = (value) => InitializedNotificationSchema.safeParse(value).success;\n/* Ping */\n/**\n * A ping, issued by either the server or the client, to check that the other party is still alive. The receiver must promptly respond, or else may be disconnected.\n */\nexport const PingRequestSchema = RequestSchema.extend({\n    method: z.literal(\"ping\"),\n});\n/* Progress notifications */\nexport const ProgressSchema = z\n    .object({\n    /**\n     * The progress thus far. This should increase every time progress is made, even if the total is unknown.\n     */\n    progress: z.number(),\n    /**\n     * Total number of items to process (or total progress required), if known.\n     */\n    total: z.optional(z.number()),\n})\n    .passthrough();\n/**\n * An out-of-band notification used to inform the receiver of a progress update for a long-running request.\n */\nexport const ProgressNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/progress\"),\n    params: BaseNotificationParamsSchema.merge(ProgressSchema).extend({\n        /**\n         * The progress token which was given in the initial request, used to associate this notification with the request that is proceeding.\n         */\n        progressToken: ProgressTokenSchema,\n    }),\n});\n/* Pagination */\nexport const PaginatedRequestSchema = RequestSchema.extend({\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * An opaque token representing the current pagination position.\n         * If provided, the server should return results starting after this cursor.\n         */\n        cursor: z.optional(CursorSchema),\n    }).optional(),\n});\nexport const PaginatedResultSchema = ResultSchema.extend({\n    /**\n     * An opaque token representing the pagination position after the last returned result.\n     * If present, there may be more results available.\n     */\n    nextCursor: z.optional(CursorSchema),\n});\n/* Resources */\n/**\n * The contents of a specific resource or sub-resource.\n */\nexport const ResourceContentsSchema = z\n    .object({\n    /**\n     * The URI of this resource.\n     */\n    uri: z.string(),\n    /**\n     * The MIME type of this resource, if known.\n     */\n    mimeType: z.optional(z.string()),\n})\n    .passthrough();\nexport const TextResourceContentsSchema = ResourceContentsSchema.extend({\n    /**\n     * The text of the item. This must only be set if the item can actually be represented as text (not binary data).\n     */\n    text: z.string(),\n});\nexport const BlobResourceContentsSchema = ResourceContentsSchema.extend({\n    /**\n     * A base64-encoded string representing the binary data of the item.\n     */\n    blob: z.string().base64(),\n});\n/**\n * A known resource that the server is capable of reading.\n */\nexport const ResourceSchema = z\n    .object({\n    /**\n     * The URI of this resource.\n     */\n    uri: z.string(),\n    /**\n     * A human-readable name for this resource.\n     *\n     * This can be used by clients to populate UI elements.\n     */\n    name: z.string(),\n    /**\n     * A description of what this resource represents.\n     *\n     * This can be used by clients to improve the LLM's understanding of available resources. It can be thought of like a \"hint\" to the model.\n     */\n    description: z.optional(z.string()),\n    /**\n     * The MIME type of this resource, if known.\n     */\n    mimeType: z.optional(z.string()),\n})\n    .passthrough();\n/**\n * A template description for resources available on the server.\n */\nexport const ResourceTemplateSchema = z\n    .object({\n    /**\n     * A URI template (according to RFC 6570) that can be used to construct resource URIs.\n     */\n    uriTemplate: z.string(),\n    /**\n     * A human-readable name for the type of resource this template refers to.\n     *\n     * This can be used by clients to populate UI elements.\n     */\n    name: z.string(),\n    /**\n     * A description of what this template is for.\n     *\n     * This can be used by clients to improve the LLM's understanding of available resources. It can be thought of like a \"hint\" to the model.\n     */\n    description: z.optional(z.string()),\n    /**\n     * The MIME type for all resources that match this template. This should only be included if all resources matching this template have the same type.\n     */\n    mimeType: z.optional(z.string()),\n})\n    .passthrough();\n/**\n * Sent from the client to request a list of resources the server has.\n */\nexport const ListResourcesRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"resources/list\"),\n});\n/**\n * The server's response to a resources/list request from the client.\n */\nexport const ListResourcesResultSchema = PaginatedResultSchema.extend({\n    resources: z.array(ResourceSchema),\n});\n/**\n * Sent from the client to request a list of resource templates the server has.\n */\nexport const ListResourceTemplatesRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"resources/templates/list\"),\n});\n/**\n * The server's response to a resources/templates/list request from the client.\n */\nexport const ListResourceTemplatesResultSchema = PaginatedResultSchema.extend({\n    resourceTemplates: z.array(ResourceTemplateSchema),\n});\n/**\n * Sent from the client to the server, to read a specific resource URI.\n */\nexport const ReadResourceRequestSchema = RequestSchema.extend({\n    method: z.literal(\"resources/read\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to read. The URI can use any protocol; it is up to the server how to interpret it.\n         */\n        uri: z.string(),\n    }),\n});\n/**\n * The server's response to a resources/read request from the client.\n */\nexport const ReadResourceResultSchema = ResultSchema.extend({\n    contents: z.array(z.union([TextResourceContentsSchema, BlobResourceContentsSchema])),\n});\n/**\n * An optional notification from the server to the client, informing it that the list of resources it can read from has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const ResourceListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/resources/list_changed\"),\n});\n/**\n * Sent from the client to request resources/updated notifications from the server whenever a particular resource changes.\n */\nexport const SubscribeRequestSchema = RequestSchema.extend({\n    method: z.literal(\"resources/subscribe\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to subscribe to. The URI can use any protocol; it is up to the server how to interpret it.\n         */\n        uri: z.string(),\n    }),\n});\n/**\n * Sent from the client to request cancellation of resources/updated notifications from the server. This should follow a previous resources/subscribe request.\n */\nexport const UnsubscribeRequestSchema = RequestSchema.extend({\n    method: z.literal(\"resources/unsubscribe\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to unsubscribe from.\n         */\n        uri: z.string(),\n    }),\n});\n/**\n * A notification from the server to the client, informing it that a resource has changed and may need to be read again. This should only be sent if the client previously sent a resources/subscribe request.\n */\nexport const ResourceUpdatedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/resources/updated\"),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The URI of the resource that has been updated. This might be a sub-resource of the one that the client actually subscribed to.\n         */\n        uri: z.string(),\n    }),\n});\n/* Prompts */\n/**\n * Describes an argument that a prompt can accept.\n */\nexport const PromptArgumentSchema = z\n    .object({\n    /**\n     * The name of the argument.\n     */\n    name: z.string(),\n    /**\n     * A human-readable description of the argument.\n     */\n    description: z.optional(z.string()),\n    /**\n     * Whether this argument must be provided.\n     */\n    required: z.optional(z.boolean()),\n})\n    .passthrough();\n/**\n * A prompt or prompt template that the server offers.\n */\nexport const PromptSchema = z\n    .object({\n    /**\n     * The name of the prompt or prompt template.\n     */\n    name: z.string(),\n    /**\n     * An optional description of what this prompt provides\n     */\n    description: z.optional(z.string()),\n    /**\n     * A list of arguments to use for templating the prompt.\n     */\n    arguments: z.optional(z.array(PromptArgumentSchema)),\n})\n    .passthrough();\n/**\n * Sent from the client to request a list of prompts and prompt templates the server has.\n */\nexport const ListPromptsRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"prompts/list\"),\n});\n/**\n * The server's response to a prompts/list request from the client.\n */\nexport const ListPromptsResultSchema = PaginatedResultSchema.extend({\n    prompts: z.array(PromptSchema),\n});\n/**\n * Used by the client to get a prompt provided by the server.\n */\nexport const GetPromptRequestSchema = RequestSchema.extend({\n    method: z.literal(\"prompts/get\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The name of the prompt or prompt template.\n         */\n        name: z.string(),\n        /**\n         * Arguments to use for templating the prompt.\n         */\n        arguments: z.optional(z.record(z.string())),\n    }),\n});\n/**\n * Text provided to or from an LLM.\n */\nexport const TextContentSchema = z\n    .object({\n    type: z.literal(\"text\"),\n    /**\n     * The text content of the message.\n     */\n    text: z.string(),\n})\n    .passthrough();\n/**\n * An image provided to or from an LLM.\n */\nexport const ImageContentSchema = z\n    .object({\n    type: z.literal(\"image\"),\n    /**\n     * The base64-encoded image data.\n     */\n    data: z.string().base64(),\n    /**\n     * The MIME type of the image. Different providers may support different image types.\n     */\n    mimeType: z.string(),\n})\n    .passthrough();\n/**\n * An Audio provided to or from an LLM.\n */\nexport const AudioContentSchema = z\n    .object({\n    type: z.literal(\"audio\"),\n    /**\n     * The base64-encoded audio data.\n     */\n    data: z.string().base64(),\n    /**\n     * The MIME type of the audio. Different providers may support different audio types.\n     */\n    mimeType: z.string(),\n})\n    .passthrough();\n/**\n * The contents of a resource, embedded into a prompt or tool call result.\n */\nexport const EmbeddedResourceSchema = z\n    .object({\n    type: z.literal(\"resource\"),\n    resource: z.union([TextResourceContentsSchema, BlobResourceContentsSchema]),\n})\n    .passthrough();\n/**\n * Describes a message returned as part of a prompt.\n */\nexport const PromptMessageSchema = z\n    .object({\n    role: z.enum([\"user\", \"assistant\"]),\n    content: z.union([\n        TextContentSchema,\n        ImageContentSchema,\n        AudioContentSchema,\n        EmbeddedResourceSchema,\n    ]),\n})\n    .passthrough();\n/**\n * The server's response to a prompts/get request from the client.\n */\nexport const GetPromptResultSchema = ResultSchema.extend({\n    /**\n     * An optional description for the prompt.\n     */\n    description: z.optional(z.string()),\n    messages: z.array(PromptMessageSchema),\n});\n/**\n * An optional notification from the server to the client, informing it that the list of prompts it offers has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const PromptListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/prompts/list_changed\"),\n});\n/* Tools */\n/**\n * Additional properties describing a Tool to clients.\n *\n * NOTE: all properties in ToolAnnotations are **hints**.\n * They are not guaranteed to provide a faithful description of\n * tool behavior (including descriptive properties like `title`).\n *\n * Clients should never make tool use decisions based on ToolAnnotations\n * received from untrusted servers.\n */\nexport const ToolAnnotationsSchema = z\n    .object({\n    /**\n     * A human-readable title for the tool.\n     */\n    title: z.optional(z.string()),\n    /**\n     * If true, the tool does not modify its environment.\n     *\n     * Default: false\n     */\n    readOnlyHint: z.optional(z.boolean()),\n    /**\n     * If true, the tool may perform destructive updates to its environment.\n     * If false, the tool performs only additive updates.\n     *\n     * (This property is meaningful only when `readOnlyHint == false`)\n     *\n     * Default: true\n     */\n    destructiveHint: z.optional(z.boolean()),\n    /**\n     * If true, calling the tool repeatedly with the same arguments\n     * will have no additional effect on the its environment.\n     *\n     * (This property is meaningful only when `readOnlyHint == false`)\n     *\n     * Default: false\n     */\n    idempotentHint: z.optional(z.boolean()),\n    /**\n     * If true, this tool may interact with an \"open world\" of external\n     * entities. If false, the tool's domain of interaction is closed.\n     * For example, the world of a web search tool is open, whereas that\n     * of a memory tool is not.\n     *\n     * Default: true\n     */\n    openWorldHint: z.optional(z.boolean()),\n})\n    .passthrough();\n/**\n * Definition for a tool the client can call.\n */\nexport const ToolSchema = z\n    .object({\n    /**\n     * The name of the tool.\n     */\n    name: z.string(),\n    /**\n     * A human-readable description of the tool.\n     */\n    description: z.optional(z.string()),\n    /**\n     * A JSON Schema object defining the expected parameters for the tool.\n     */\n    inputSchema: z\n        .object({\n        type: z.literal(\"object\"),\n        properties: z.optional(z.object({}).passthrough()),\n    })\n        .passthrough(),\n    /**\n     * Optional additional tool information.\n     */\n    annotations: z.optional(ToolAnnotationsSchema),\n})\n    .passthrough();\n/**\n * Sent from the client to request a list of tools the server has.\n */\nexport const ListToolsRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal(\"tools/list\"),\n});\n/**\n * The server's response to a tools/list request from the client.\n */\nexport const ListToolsResultSchema = PaginatedResultSchema.extend({\n    tools: z.array(ToolSchema),\n});\n/**\n * The server's response to a tool call.\n */\nexport const CallToolResultSchema = ResultSchema.extend({\n    content: z.array(z.union([TextContentSchema, ImageContentSchema, AudioContentSchema, EmbeddedResourceSchema])),\n    isError: z.boolean().default(false).optional(),\n});\n/**\n * CallToolResultSchema extended with backwards compatibility to protocol version 2024-10-07.\n */\nexport const CompatibilityCallToolResultSchema = CallToolResultSchema.or(ResultSchema.extend({\n    toolResult: z.unknown(),\n}));\n/**\n * Used by the client to invoke a tool provided by the server.\n */\nexport const CallToolRequestSchema = RequestSchema.extend({\n    method: z.literal(\"tools/call\"),\n    params: BaseRequestParamsSchema.extend({\n        name: z.string(),\n        arguments: z.optional(z.record(z.unknown())),\n    }),\n});\n/**\n * An optional notification from the server to the client, informing it that the list of tools it offers has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const ToolListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/tools/list_changed\"),\n});\n/* Logging */\n/**\n * The severity of a log message.\n */\nexport const LoggingLevelSchema = z.enum([\n    \"debug\",\n    \"info\",\n    \"notice\",\n    \"warning\",\n    \"error\",\n    \"critical\",\n    \"alert\",\n    \"emergency\",\n]);\n/**\n * A request from the client to the server, to enable or adjust logging.\n */\nexport const SetLevelRequestSchema = RequestSchema.extend({\n    method: z.literal(\"logging/setLevel\"),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The level of logging that the client wants to receive from the server. The server should send all logs at this level and higher (i.e., more severe) to the client as notifications/logging/message.\n         */\n        level: LoggingLevelSchema,\n    }),\n});\n/**\n * Notification of a log message passed from server to client. If no logging/setLevel request has been sent from the client, the server MAY decide which messages to send automatically.\n */\nexport const LoggingMessageNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/message\"),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The severity of this log message.\n         */\n        level: LoggingLevelSchema,\n        /**\n         * An optional name of the logger issuing this message.\n         */\n        logger: z.optional(z.string()),\n        /**\n         * The data to be logged, such as a string message or an object. Any JSON serializable type is allowed here.\n         */\n        data: z.unknown(),\n    }),\n});\n/* Sampling */\n/**\n * Hints to use for model selection.\n */\nexport const ModelHintSchema = z\n    .object({\n    /**\n     * A hint for a model name.\n     */\n    name: z.string().optional(),\n})\n    .passthrough();\n/**\n * The server's preferences for model selection, requested of the client during sampling.\n */\nexport const ModelPreferencesSchema = z\n    .object({\n    /**\n     * Optional hints to use for model selection.\n     */\n    hints: z.optional(z.array(ModelHintSchema)),\n    /**\n     * How much to prioritize cost when selecting a model.\n     */\n    costPriority: z.optional(z.number().min(0).max(1)),\n    /**\n     * How much to prioritize sampling speed (latency) when selecting a model.\n     */\n    speedPriority: z.optional(z.number().min(0).max(1)),\n    /**\n     * How much to prioritize intelligence and capabilities when selecting a model.\n     */\n    intelligencePriority: z.optional(z.number().min(0).max(1)),\n})\n    .passthrough();\n/**\n * Describes a message issued to or received from an LLM API.\n */\nexport const SamplingMessageSchema = z\n    .object({\n    role: z.enum([\"user\", \"assistant\"]),\n    content: z.union([TextContentSchema, ImageContentSchema, AudioContentSchema]),\n})\n    .passthrough();\n/**\n * A request from the server to sample an LLM via the client. The client has full discretion over which model to select. The client should also inform the user before beginning sampling, to allow them to inspect the request (human in the loop) and decide whether to approve it.\n */\nexport const CreateMessageRequestSchema = RequestSchema.extend({\n    method: z.literal(\"sampling/createMessage\"),\n    params: BaseRequestParamsSchema.extend({\n        messages: z.array(SamplingMessageSchema),\n        /**\n         * An optional system prompt the server wants to use for sampling. The client MAY modify or omit this prompt.\n         */\n        systemPrompt: z.optional(z.string()),\n        /**\n         * A request to include context from one or more MCP servers (including the caller), to be attached to the prompt. The client MAY ignore this request.\n         */\n        includeContext: z.optional(z.enum([\"none\", \"thisServer\", \"allServers\"])),\n        temperature: z.optional(z.number()),\n        /**\n         * The maximum number of tokens to sample, as requested by the server. The client MAY choose to sample fewer tokens than requested.\n         */\n        maxTokens: z.number().int(),\n        stopSequences: z.optional(z.array(z.string())),\n        /**\n         * Optional metadata to pass through to the LLM provider. The format of this metadata is provider-specific.\n         */\n        metadata: z.optional(z.object({}).passthrough()),\n        /**\n         * The server's preferences for which model to select.\n         */\n        modelPreferences: z.optional(ModelPreferencesSchema),\n    }),\n});\n/**\n * The client's response to a sampling/create_message request from the server. The client should inform the user before returning the sampled message, to allow them to inspect the response (human in the loop) and decide whether to allow the server to see it.\n */\nexport const CreateMessageResultSchema = ResultSchema.extend({\n    /**\n     * The name of the model that generated the message.\n     */\n    model: z.string(),\n    /**\n     * The reason why sampling stopped.\n     */\n    stopReason: z.optional(z.enum([\"endTurn\", \"stopSequence\", \"maxTokens\"]).or(z.string())),\n    role: z.enum([\"user\", \"assistant\"]),\n    content: z.discriminatedUnion(\"type\", [\n        TextContentSchema,\n        ImageContentSchema,\n        AudioContentSchema\n    ]),\n});\n/* Autocomplete */\n/**\n * A reference to a resource or resource template definition.\n */\nexport const ResourceReferenceSchema = z\n    .object({\n    type: z.literal(\"ref/resource\"),\n    /**\n     * The URI or URI template of the resource.\n     */\n    uri: z.string(),\n})\n    .passthrough();\n/**\n * Identifies a prompt.\n */\nexport const PromptReferenceSchema = z\n    .object({\n    type: z.literal(\"ref/prompt\"),\n    /**\n     * The name of the prompt or prompt template\n     */\n    name: z.string(),\n})\n    .passthrough();\n/**\n * A request from the client to the server, to ask for completion options.\n */\nexport const CompleteRequestSchema = RequestSchema.extend({\n    method: z.literal(\"completion/complete\"),\n    params: BaseRequestParamsSchema.extend({\n        ref: z.union([PromptReferenceSchema, ResourceReferenceSchema]),\n        /**\n         * The argument's information\n         */\n        argument: z\n            .object({\n            /**\n             * The name of the argument\n             */\n            name: z.string(),\n            /**\n             * The value of the argument to use for completion matching.\n             */\n            value: z.string(),\n        })\n            .passthrough(),\n    }),\n});\n/**\n * The server's response to a completion/complete request\n */\nexport const CompleteResultSchema = ResultSchema.extend({\n    completion: z\n        .object({\n        /**\n         * An array of completion values. Must not exceed 100 items.\n         */\n        values: z.array(z.string()).max(100),\n        /**\n         * The total number of completion options available. This can exceed the number of values actually sent in the response.\n         */\n        total: z.optional(z.number().int()),\n        /**\n         * Indicates whether there are additional completion options beyond those provided in the current response, even if the exact total is unknown.\n         */\n        hasMore: z.optional(z.boolean()),\n    })\n        .passthrough(),\n});\n/* Roots */\n/**\n * Represents a root directory or file that the server can operate on.\n */\nexport const RootSchema = z\n    .object({\n    /**\n     * The URI identifying the root. This *must* start with file:// for now.\n     */\n    uri: z.string().startsWith(\"file://\"),\n    /**\n     * An optional name for the root.\n     */\n    name: z.optional(z.string()),\n})\n    .passthrough();\n/**\n * Sent from the server to request a list of root URIs from the client.\n */\nexport const ListRootsRequestSchema = RequestSchema.extend({\n    method: z.literal(\"roots/list\"),\n});\n/**\n * The client's response to a roots/list request from the server.\n */\nexport const ListRootsResultSchema = ResultSchema.extend({\n    roots: z.array(RootSchema),\n});\n/**\n * A notification from the client to the server, informing it that the list of roots has changed.\n */\nexport const RootsListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal(\"notifications/roots/list_changed\"),\n});\n/* Client messages */\nexport const ClientRequestSchema = z.union([\n    PingRequestSchema,\n    InitializeRequestSchema,\n    CompleteRequestSchema,\n    SetLevelRequestSchema,\n    GetPromptRequestSchema,\n    ListPromptsRequestSchema,\n    ListResourcesRequestSchema,\n    ListResourceTemplatesRequestSchema,\n    ReadResourceRequestSchema,\n    SubscribeRequestSchema,\n    UnsubscribeRequestSchema,\n    CallToolRequestSchema,\n    ListToolsRequestSchema,\n]);\nexport const ClientNotificationSchema = z.union([\n    CancelledNotificationSchema,\n    ProgressNotificationSchema,\n    InitializedNotificationSchema,\n    RootsListChangedNotificationSchema,\n]);\nexport const ClientResultSchema = z.union([\n    EmptyResultSchema,\n    CreateMessageResultSchema,\n    ListRootsResultSchema,\n]);\n/* Server messages */\nexport const ServerRequestSchema = z.union([\n    PingRequestSchema,\n    CreateMessageRequestSchema,\n    ListRootsRequestSchema,\n]);\nexport const ServerNotificationSchema = z.union([\n    CancelledNotificationSchema,\n    ProgressNotificationSchema,\n    LoggingMessageNotificationSchema,\n    ResourceUpdatedNotificationSchema,\n    ResourceListChangedNotificationSchema,\n    ToolListChangedNotificationSchema,\n    PromptListChangedNotificationSchema,\n]);\nexport const ServerResultSchema = z.union([\n    EmptyResultSchema,\n    InitializeResultSchema,\n    CompleteResultSchema,\n    GetPromptResultSchema,\n    ListPromptsResultSchema,\n    ListResourcesResultSchema,\n    ListResourceTemplatesResultSchema,\n    ReadResourceResultSchema,\n    CallToolResultSchema,\n    ListToolsResultSchema,\n]);\nexport class McpError extends Error {\n    constructor(code, message, data) {\n        super(`MCP error ${code}: ${message}`);\n        this.code = code;\n        this.data = data;\n        this.name = \"McpError\";\n    }\n}\n//# sourceMappingURL=types.js.map","import { CancelledNotificationSchema, ErrorCode, isJSONRPCError, isJSONRPCRequest, isJSONRPCResponse, isJSONRPCNotification, McpError, PingRequestSchema, ProgressNotificationSchema, } from \"../types.js\";\n/**\n * The default request timeout, in miliseconds.\n */\nexport const DEFAULT_REQUEST_TIMEOUT_MSEC = 60000;\n/**\n * Implements MCP protocol framing on top of a pluggable transport, including\n * features like request/response linking, notifications, and progress.\n */\nexport class Protocol {\n    constructor(_options) {\n        this._options = _options;\n        this._requestMessageId = 0;\n        this._requestHandlers = new Map();\n        this._requestHandlerAbortControllers = new Map();\n        this._notificationHandlers = new Map();\n        this._responseHandlers = new Map();\n        this._progressHandlers = new Map();\n        this._timeoutInfo = new Map();\n        this.setNotificationHandler(CancelledNotificationSchema, (notification) => {\n            const controller = this._requestHandlerAbortControllers.get(notification.params.requestId);\n            controller === null || controller === void 0 ? void 0 : controller.abort(notification.params.reason);\n        });\n        this.setNotificationHandler(ProgressNotificationSchema, (notification) => {\n            this._onprogress(notification);\n        });\n        this.setRequestHandler(PingRequestSchema, \n        // Automatic pong by default.\n        (_request) => ({}));\n    }\n    _setupTimeout(messageId, timeout, maxTotalTimeout, onTimeout, resetTimeoutOnProgress = false) {\n        this._timeoutInfo.set(messageId, {\n            timeoutId: setTimeout(onTimeout, timeout),\n            startTime: Date.now(),\n            timeout,\n            maxTotalTimeout,\n            resetTimeoutOnProgress,\n            onTimeout\n        });\n    }\n    _resetTimeout(messageId) {\n        const info = this._timeoutInfo.get(messageId);\n        if (!info)\n            return false;\n        const totalElapsed = Date.now() - info.startTime;\n        if (info.maxTotalTimeout && totalElapsed >= info.maxTotalTimeout) {\n            this._timeoutInfo.delete(messageId);\n            throw new McpError(ErrorCode.RequestTimeout, \"Maximum total timeout exceeded\", { maxTotalTimeout: info.maxTotalTimeout, totalElapsed });\n        }\n        clearTimeout(info.timeoutId);\n        info.timeoutId = setTimeout(info.onTimeout, info.timeout);\n        return true;\n    }\n    _cleanupTimeout(messageId) {\n        const info = this._timeoutInfo.get(messageId);\n        if (info) {\n            clearTimeout(info.timeoutId);\n            this._timeoutInfo.delete(messageId);\n        }\n    }\n    /**\n     * Attaches to the given transport, starts it, and starts listening for messages.\n     *\n     * The Protocol object assumes ownership of the Transport, replacing any callbacks that have already been set, and expects that it is the only user of the Transport instance going forward.\n     */\n    async connect(transport) {\n        this._transport = transport;\n        this._transport.onclose = () => {\n            this._onclose();\n        };\n        this._transport.onerror = (error) => {\n            this._onerror(error);\n        };\n        this._transport.onmessage = (message, extra) => {\n            if (isJSONRPCResponse(message) || isJSONRPCError(message)) {\n                this._onresponse(message);\n            }\n            else if (isJSONRPCRequest(message)) {\n                this._onrequest(message, extra);\n            }\n            else if (isJSONRPCNotification(message)) {\n                this._onnotification(message);\n            }\n            else {\n                this._onerror(new Error(`Unknown message type: ${JSON.stringify(message)}`));\n            }\n        };\n        await this._transport.start();\n    }\n    _onclose() {\n        var _a;\n        const responseHandlers = this._responseHandlers;\n        this._responseHandlers = new Map();\n        this._progressHandlers.clear();\n        this._transport = undefined;\n        (_a = this.onclose) === null || _a === void 0 ? void 0 : _a.call(this);\n        const error = new McpError(ErrorCode.ConnectionClosed, \"Connection closed\");\n        for (const handler of responseHandlers.values()) {\n            handler(error);\n        }\n    }\n    _onerror(error) {\n        var _a;\n        (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n    }\n    _onnotification(notification) {\n        var _a;\n        const handler = (_a = this._notificationHandlers.get(notification.method)) !== null && _a !== void 0 ? _a : this.fallbackNotificationHandler;\n        // Ignore notifications not being subscribed to.\n        if (handler === undefined) {\n            return;\n        }\n        // Starting with Promise.resolve() puts any synchronous errors into the monad as well.\n        Promise.resolve()\n            .then(() => handler(notification))\n            .catch((error) => this._onerror(new Error(`Uncaught error in notification handler: ${error}`)));\n    }\n    _onrequest(request, extra) {\n        var _a, _b, _c, _d;\n        const handler = (_a = this._requestHandlers.get(request.method)) !== null && _a !== void 0 ? _a : this.fallbackRequestHandler;\n        if (handler === undefined) {\n            (_b = this._transport) === null || _b === void 0 ? void 0 : _b.send({\n                jsonrpc: \"2.0\",\n                id: request.id,\n                error: {\n                    code: ErrorCode.MethodNotFound,\n                    message: \"Method not found\",\n                },\n            }).catch((error) => this._onerror(new Error(`Failed to send an error response: ${error}`)));\n            return;\n        }\n        const abortController = new AbortController();\n        this._requestHandlerAbortControllers.set(request.id, abortController);\n        const fullExtra = {\n            signal: abortController.signal,\n            sessionId: (_c = this._transport) === null || _c === void 0 ? void 0 : _c.sessionId,\n            _meta: (_d = request.params) === null || _d === void 0 ? void 0 : _d._meta,\n            sendNotification: (notification) => this.notification(notification, { relatedRequestId: request.id }),\n            sendRequest: (r, resultSchema, options) => this.request(r, resultSchema, { ...options, relatedRequestId: request.id }),\n            authInfo: extra === null || extra === void 0 ? void 0 : extra.authInfo,\n            requestId: request.id,\n        };\n        // Starting with Promise.resolve() puts any synchronous errors into the monad as well.\n        Promise.resolve()\n            .then(() => handler(request, fullExtra))\n            .then((result) => {\n            var _a;\n            if (abortController.signal.aborted) {\n                return;\n            }\n            return (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send({\n                result,\n                jsonrpc: \"2.0\",\n                id: request.id,\n            });\n        }, (error) => {\n            var _a, _b;\n            if (abortController.signal.aborted) {\n                return;\n            }\n            return (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send({\n                jsonrpc: \"2.0\",\n                id: request.id,\n                error: {\n                    code: Number.isSafeInteger(error[\"code\"])\n                        ? error[\"code\"]\n                        : ErrorCode.InternalError,\n                    message: (_b = error.message) !== null && _b !== void 0 ? _b : \"Internal error\",\n                },\n            });\n        })\n            .catch((error) => this._onerror(new Error(`Failed to send response: ${error}`)))\n            .finally(() => {\n            this._requestHandlerAbortControllers.delete(request.id);\n        });\n    }\n    _onprogress(notification) {\n        const { progressToken, ...params } = notification.params;\n        const messageId = Number(progressToken);\n        const handler = this._progressHandlers.get(messageId);\n        if (!handler) {\n            this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(notification)}`));\n            return;\n        }\n        const responseHandler = this._responseHandlers.get(messageId);\n        const timeoutInfo = this._timeoutInfo.get(messageId);\n        if (timeoutInfo && responseHandler && timeoutInfo.resetTimeoutOnProgress) {\n            try {\n                this._resetTimeout(messageId);\n            }\n            catch (error) {\n                responseHandler(error);\n                return;\n            }\n        }\n        handler(params);\n    }\n    _onresponse(response) {\n        const messageId = Number(response.id);\n        const handler = this._responseHandlers.get(messageId);\n        if (handler === undefined) {\n            this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(response)}`));\n            return;\n        }\n        this._responseHandlers.delete(messageId);\n        this._progressHandlers.delete(messageId);\n        this._cleanupTimeout(messageId);\n        if (isJSONRPCResponse(response)) {\n            handler(response);\n        }\n        else {\n            const error = new McpError(response.error.code, response.error.message, response.error.data);\n            handler(error);\n        }\n    }\n    get transport() {\n        return this._transport;\n    }\n    /**\n     * Closes the connection.\n     */\n    async close() {\n        var _a;\n        await ((_a = this._transport) === null || _a === void 0 ? void 0 : _a.close());\n    }\n    /**\n     * Sends a request and wait for a response.\n     *\n     * Do not use this method to emit notifications! Use notification() instead.\n     */\n    request(request, resultSchema, options) {\n        const { relatedRequestId, resumptionToken, onresumptiontoken } = options !== null && options !== void 0 ? options : {};\n        return new Promise((resolve, reject) => {\n            var _a, _b, _c, _d, _e;\n            if (!this._transport) {\n                reject(new Error(\"Not connected\"));\n                return;\n            }\n            if (((_a = this._options) === null || _a === void 0 ? void 0 : _a.enforceStrictCapabilities) === true) {\n                this.assertCapabilityForMethod(request.method);\n            }\n            (_b = options === null || options === void 0 ? void 0 : options.signal) === null || _b === void 0 ? void 0 : _b.throwIfAborted();\n            const messageId = this._requestMessageId++;\n            const jsonrpcRequest = {\n                ...request,\n                jsonrpc: \"2.0\",\n                id: messageId,\n            };\n            if (options === null || options === void 0 ? void 0 : options.onprogress) {\n                this._progressHandlers.set(messageId, options.onprogress);\n                jsonrpcRequest.params = {\n                    ...request.params,\n                    _meta: { progressToken: messageId },\n                };\n            }\n            const cancel = (reason) => {\n                var _a;\n                this._responseHandlers.delete(messageId);\n                this._progressHandlers.delete(messageId);\n                this._cleanupTimeout(messageId);\n                (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send({\n                    jsonrpc: \"2.0\",\n                    method: \"notifications/cancelled\",\n                    params: {\n                        requestId: messageId,\n                        reason: String(reason),\n                    },\n                }, { relatedRequestId, resumptionToken, onresumptiontoken }).catch((error) => this._onerror(new Error(`Failed to send cancellation: ${error}`)));\n                reject(reason);\n            };\n            this._responseHandlers.set(messageId, (response) => {\n                var _a;\n                if ((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                    return;\n                }\n                if (response instanceof Error) {\n                    return reject(response);\n                }\n                try {\n                    const result = resultSchema.parse(response.result);\n                    resolve(result);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n            (_c = options === null || options === void 0 ? void 0 : options.signal) === null || _c === void 0 ? void 0 : _c.addEventListener(\"abort\", () => {\n                var _a;\n                cancel((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.reason);\n            });\n            const timeout = (_d = options === null || options === void 0 ? void 0 : options.timeout) !== null && _d !== void 0 ? _d : DEFAULT_REQUEST_TIMEOUT_MSEC;\n            const timeoutHandler = () => cancel(new McpError(ErrorCode.RequestTimeout, \"Request timed out\", { timeout }));\n            this._setupTimeout(messageId, timeout, options === null || options === void 0 ? void 0 : options.maxTotalTimeout, timeoutHandler, (_e = options === null || options === void 0 ? void 0 : options.resetTimeoutOnProgress) !== null && _e !== void 0 ? _e : false);\n            this._transport.send(jsonrpcRequest, { relatedRequestId, resumptionToken, onresumptiontoken }).catch((error) => {\n                this._cleanupTimeout(messageId);\n                reject(error);\n            });\n        });\n    }\n    /**\n     * Emits a notification, which is a one-way message that does not expect a response.\n     */\n    async notification(notification, options) {\n        if (!this._transport) {\n            throw new Error(\"Not connected\");\n        }\n        this.assertNotificationCapability(notification.method);\n        const jsonrpcNotification = {\n            ...notification,\n            jsonrpc: \"2.0\",\n        };\n        await this._transport.send(jsonrpcNotification, options);\n    }\n    /**\n     * Registers a handler to invoke when this protocol object receives a request with the given method.\n     *\n     * Note that this will replace any previous request handler for the same method.\n     */\n    setRequestHandler(requestSchema, handler) {\n        const method = requestSchema.shape.method.value;\n        this.assertRequestHandlerCapability(method);\n        this._requestHandlers.set(method, (request, extra) => {\n            return Promise.resolve(handler(requestSchema.parse(request), extra));\n        });\n    }\n    /**\n     * Removes the request handler for the given method.\n     */\n    removeRequestHandler(method) {\n        this._requestHandlers.delete(method);\n    }\n    /**\n     * Asserts that a request handler has not already been set for the given method, in preparation for a new one being automatically installed.\n     */\n    assertCanSetRequestHandler(method) {\n        if (this._requestHandlers.has(method)) {\n            throw new Error(`A request handler for ${method} already exists, which would be overridden`);\n        }\n    }\n    /**\n     * Registers a handler to invoke when this protocol object receives a notification with the given method.\n     *\n     * Note that this will replace any previous notification handler for the same method.\n     */\n    setNotificationHandler(notificationSchema, handler) {\n        this._notificationHandlers.set(notificationSchema.shape.method.value, (notification) => Promise.resolve(handler(notificationSchema.parse(notification))));\n    }\n    /**\n     * Removes the notification handler for the given method.\n     */\n    removeNotificationHandler(method) {\n        this._notificationHandlers.delete(method);\n    }\n}\nexport function mergeCapabilities(base, additional) {\n    return Object.entries(additional).reduce((acc, [key, value]) => {\n        if (value && typeof value === \"object\") {\n            acc[key] = acc[key] ? { ...acc[key], ...value } : value;\n        }\n        else {\n            acc[key] = value;\n        }\n        return acc;\n    }, { ...base });\n}\n//# sourceMappingURL=protocol.js.map","import { mergeCapabilities, Protocol, } from \"../shared/protocol.js\";\nimport { CallToolResultSchema, CompleteResultSchema, EmptyResultSchema, GetPromptResultSchema, InitializeResultSchema, LATEST_PROTOCOL_VERSION, ListPromptsResultSchema, ListResourcesResultSchema, ListResourceTemplatesResultSchema, ListToolsResultSchema, ReadResourceResultSchema, SUPPORTED_PROTOCOL_VERSIONS, } from \"../types.js\";\n/**\n * An MCP client on top of a pluggable transport.\n *\n * The client will automatically begin the initialization flow with the server when connect() is called.\n *\n * To use with custom types, extend the base Request/Notification/Result types and pass them as type parameters:\n *\n * ```typescript\n * // Custom schemas\n * const CustomRequestSchema = RequestSchema.extend({...})\n * const CustomNotificationSchema = NotificationSchema.extend({...})\n * const CustomResultSchema = ResultSchema.extend({...})\n *\n * // Type aliases\n * type CustomRequest = z.infer<typeof CustomRequestSchema>\n * type CustomNotification = z.infer<typeof CustomNotificationSchema>\n * type CustomResult = z.infer<typeof CustomResultSchema>\n *\n * // Create typed client\n * const client = new Client<CustomRequest, CustomNotification, CustomResult>({\n *   name: \"CustomClient\",\n *   version: \"1.0.0\"\n * })\n * ```\n */\nexport class Client extends Protocol {\n    /**\n     * Initializes this client with the given name and version information.\n     */\n    constructor(_clientInfo, options) {\n        var _a;\n        super(options);\n        this._clientInfo = _clientInfo;\n        this._capabilities = (_a = options === null || options === void 0 ? void 0 : options.capabilities) !== null && _a !== void 0 ? _a : {};\n    }\n    /**\n     * Registers new capabilities. This can only be called before connecting to a transport.\n     *\n     * The new capabilities will be merged with any existing capabilities previously given (e.g., at initialization).\n     */\n    registerCapabilities(capabilities) {\n        if (this.transport) {\n            throw new Error(\"Cannot register capabilities after connecting to transport\");\n        }\n        this._capabilities = mergeCapabilities(this._capabilities, capabilities);\n    }\n    assertCapability(capability, method) {\n        var _a;\n        if (!((_a = this._serverCapabilities) === null || _a === void 0 ? void 0 : _a[capability])) {\n            throw new Error(`Server does not support ${capability} (required for ${method})`);\n        }\n    }\n    async connect(transport, options) {\n        await super.connect(transport);\n        // When transport sessionId is already set this means we are trying to reconnect.\n        // In this case we don't need to initialize again.\n        if (transport.sessionId !== undefined) {\n            return;\n        }\n        try {\n            const result = await this.request({\n                method: \"initialize\",\n                params: {\n                    protocolVersion: LATEST_PROTOCOL_VERSION,\n                    capabilities: this._capabilities,\n                    clientInfo: this._clientInfo,\n                },\n            }, InitializeResultSchema, options);\n            if (result === undefined) {\n                throw new Error(`Server sent invalid initialize result: ${result}`);\n            }\n            if (!SUPPORTED_PROTOCOL_VERSIONS.includes(result.protocolVersion)) {\n                throw new Error(`Server's protocol version is not supported: ${result.protocolVersion}`);\n            }\n            this._serverCapabilities = result.capabilities;\n            this._serverVersion = result.serverInfo;\n            this._instructions = result.instructions;\n            await this.notification({\n                method: \"notifications/initialized\",\n            });\n        }\n        catch (error) {\n            // Disconnect if initialization fails.\n            void this.close();\n            throw error;\n        }\n    }\n    /**\n     * After initialization has completed, this will be populated with the server's reported capabilities.\n     */\n    getServerCapabilities() {\n        return this._serverCapabilities;\n    }\n    /**\n     * After initialization has completed, this will be populated with information about the server's name and version.\n     */\n    getServerVersion() {\n        return this._serverVersion;\n    }\n    /**\n     * After initialization has completed, this may be populated with information about the server's instructions.\n     */\n    getInstructions() {\n        return this._instructions;\n    }\n    assertCapabilityForMethod(method) {\n        var _a, _b, _c, _d, _e;\n        switch (method) {\n            case \"logging/setLevel\":\n                if (!((_a = this._serverCapabilities) === null || _a === void 0 ? void 0 : _a.logging)) {\n                    throw new Error(`Server does not support logging (required for ${method})`);\n                }\n                break;\n            case \"prompts/get\":\n            case \"prompts/list\":\n                if (!((_b = this._serverCapabilities) === null || _b === void 0 ? void 0 : _b.prompts)) {\n                    throw new Error(`Server does not support prompts (required for ${method})`);\n                }\n                break;\n            case \"resources/list\":\n            case \"resources/templates/list\":\n            case \"resources/read\":\n            case \"resources/subscribe\":\n            case \"resources/unsubscribe\":\n                if (!((_c = this._serverCapabilities) === null || _c === void 0 ? void 0 : _c.resources)) {\n                    throw new Error(`Server does not support resources (required for ${method})`);\n                }\n                if (method === \"resources/subscribe\" &&\n                    !this._serverCapabilities.resources.subscribe) {\n                    throw new Error(`Server does not support resource subscriptions (required for ${method})`);\n                }\n                break;\n            case \"tools/call\":\n            case \"tools/list\":\n                if (!((_d = this._serverCapabilities) === null || _d === void 0 ? void 0 : _d.tools)) {\n                    throw new Error(`Server does not support tools (required for ${method})`);\n                }\n                break;\n            case \"completion/complete\":\n                if (!((_e = this._serverCapabilities) === null || _e === void 0 ? void 0 : _e.completions)) {\n                    throw new Error(`Server does not support completions (required for ${method})`);\n                }\n                break;\n            case \"initialize\":\n                // No specific capability required for initialize\n                break;\n            case \"ping\":\n                // No specific capability required for ping\n                break;\n        }\n    }\n    assertNotificationCapability(method) {\n        var _a;\n        switch (method) {\n            case \"notifications/roots/list_changed\":\n                if (!((_a = this._capabilities.roots) === null || _a === void 0 ? void 0 : _a.listChanged)) {\n                    throw new Error(`Client does not support roots list changed notifications (required for ${method})`);\n                }\n                break;\n            case \"notifications/initialized\":\n                // No specific capability required for initialized\n                break;\n            case \"notifications/cancelled\":\n                // Cancellation notifications are always allowed\n                break;\n            case \"notifications/progress\":\n                // Progress notifications are always allowed\n                break;\n        }\n    }\n    assertRequestHandlerCapability(method) {\n        switch (method) {\n            case \"sampling/createMessage\":\n                if (!this._capabilities.sampling) {\n                    throw new Error(`Client does not support sampling capability (required for ${method})`);\n                }\n                break;\n            case \"roots/list\":\n                if (!this._capabilities.roots) {\n                    throw new Error(`Client does not support roots capability (required for ${method})`);\n                }\n                break;\n            case \"ping\":\n                // No specific capability required for ping\n                break;\n        }\n    }\n    async ping(options) {\n        return this.request({ method: \"ping\" }, EmptyResultSchema, options);\n    }\n    async complete(params, options) {\n        return this.request({ method: \"completion/complete\", params }, CompleteResultSchema, options);\n    }\n    async setLoggingLevel(level, options) {\n        return this.request({ method: \"logging/setLevel\", params: { level } }, EmptyResultSchema, options);\n    }\n    async getPrompt(params, options) {\n        return this.request({ method: \"prompts/get\", params }, GetPromptResultSchema, options);\n    }\n    async listPrompts(params, options) {\n        return this.request({ method: \"prompts/list\", params }, ListPromptsResultSchema, options);\n    }\n    async listResources(params, options) {\n        return this.request({ method: \"resources/list\", params }, ListResourcesResultSchema, options);\n    }\n    async listResourceTemplates(params, options) {\n        return this.request({ method: \"resources/templates/list\", params }, ListResourceTemplatesResultSchema, options);\n    }\n    async readResource(params, options) {\n        return this.request({ method: \"resources/read\", params }, ReadResourceResultSchema, options);\n    }\n    async subscribeResource(params, options) {\n        return this.request({ method: \"resources/subscribe\", params }, EmptyResultSchema, options);\n    }\n    async unsubscribeResource(params, options) {\n        return this.request({ method: \"resources/unsubscribe\", params }, EmptyResultSchema, options);\n    }\n    async callTool(params, resultSchema = CallToolResultSchema, options) {\n        return this.request({ method: \"tools/call\", params }, resultSchema, options);\n    }\n    async listTools(params, options) {\n        return this.request({ method: \"tools/list\", params }, ListToolsResultSchema, options);\n    }\n    async sendRootsListChanged() {\n        return this.notification({ method: \"notifications/roots/list_changed\" });\n    }\n}\n//# sourceMappingURL=index.js.map","let crypto;\ncrypto = globalThis.crypto; // web browsers\n/**\n * Creates an array of length `size` of random bytes\n * @param size\n * @returns Array of random ints (0 to 255)\n */\nasync function getRandomValues(size) {\n    return (await crypto).getRandomValues(new Uint8Array(size));\n}\n/** Generate cryptographically strong random string\n * @param size The desired length of the string\n * @returns The random string\n */\nasync function random(size) {\n    const mask = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~\";\n    let result = \"\";\n    const randomUints = await getRandomValues(size);\n    for (let i = 0; i < size; i++) {\n        // cap the value of the randomIndex to mask.length - 1\n        const randomIndex = randomUints[i] % mask.length;\n        result += mask[randomIndex];\n    }\n    return result;\n}\n/** Generate a PKCE challenge verifier\n * @param length Length of the verifier\n * @returns A random verifier `length` characters long\n */\nasync function generateVerifier(length) {\n    return await random(length);\n}\n/** Generate a PKCE code challenge from a code verifier\n * @param code_verifier\n * @returns The base64 url encoded code challenge\n */\nexport async function generateChallenge(code_verifier) {\n    const buffer = await (await crypto).subtle.digest(\"SHA-256\", new TextEncoder().encode(code_verifier));\n    // Generate base64url string\n    // btoa is deprecated in Node.js but is used here for web browser compatibility\n    // (which has no good replacement yet, see also https://github.com/whatwg/html/issues/6811)\n    return btoa(String.fromCharCode(...new Uint8Array(buffer)))\n        .replace(/\\//g, '_')\n        .replace(/\\+/g, '-')\n        .replace(/=/g, '');\n}\n/** Generate a PKCE challenge pair\n * @param length Length of the verifer (between 43-128). Defaults to 43.\n * @returns PKCE challenge pair\n */\nexport default async function pkceChallenge(length) {\n    if (!length)\n        length = 43;\n    if (length < 43 || length > 128) {\n        throw `Expected a length between 43 and 128. Received ${length}.`;\n    }\n    const verifier = await generateVerifier(length);\n    const challenge = await generateChallenge(verifier);\n    return {\n        code_verifier: verifier,\n        code_challenge: challenge,\n    };\n}\n/** Verify that a code_verifier produces the expected code challenge\n * @param code_verifier\n * @param expectedChallenge The code challenge to verify\n * @returns True if challenges are equal. False otherwise.\n */\nexport async function verifyChallenge(code_verifier, expectedChallenge) {\n    const actualChallenge = await generateChallenge(code_verifier);\n    return actualChallenge === expectedChallenge;\n}\n","import { z } from \"zod\";\n/**\n * RFC 8414 OAuth 2.0 Authorization Server Metadata\n */\nexport const OAuthMetadataSchema = z\n    .object({\n    issuer: z.string(),\n    authorization_endpoint: z.string(),\n    token_endpoint: z.string(),\n    registration_endpoint: z.string().optional(),\n    scopes_supported: z.array(z.string()).optional(),\n    response_types_supported: z.array(z.string()),\n    response_modes_supported: z.array(z.string()).optional(),\n    grant_types_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_signing_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    service_documentation: z.string().optional(),\n    revocation_endpoint: z.string().optional(),\n    revocation_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    revocation_endpoint_auth_signing_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    introspection_endpoint: z.string().optional(),\n    introspection_endpoint_auth_methods_supported: z\n        .array(z.string())\n        .optional(),\n    introspection_endpoint_auth_signing_alg_values_supported: z\n        .array(z.string())\n        .optional(),\n    code_challenge_methods_supported: z.array(z.string()).optional(),\n})\n    .passthrough();\n/**\n * OAuth 2.1 token response\n */\nexport const OAuthTokensSchema = z\n    .object({\n    access_token: z.string(),\n    token_type: z.string(),\n    expires_in: z.number().optional(),\n    scope: z.string().optional(),\n    refresh_token: z.string().optional(),\n})\n    .strip();\n/**\n * OAuth 2.1 error response\n */\nexport const OAuthErrorResponseSchema = z\n    .object({\n    error: z.string(),\n    error_description: z.string().optional(),\n    error_uri: z.string().optional(),\n});\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration metadata\n */\nexport const OAuthClientMetadataSchema = z.object({\n    redirect_uris: z.array(z.string()).refine((uris) => uris.every((uri) => URL.canParse(uri)), { message: \"redirect_uris must contain valid URLs\" }),\n    token_endpoint_auth_method: z.string().optional(),\n    grant_types: z.array(z.string()).optional(),\n    response_types: z.array(z.string()).optional(),\n    client_name: z.string().optional(),\n    client_uri: z.string().optional(),\n    logo_uri: z.string().optional(),\n    scope: z.string().optional(),\n    contacts: z.array(z.string()).optional(),\n    tos_uri: z.string().optional(),\n    policy_uri: z.string().optional(),\n    jwks_uri: z.string().optional(),\n    jwks: z.any().optional(),\n    software_id: z.string().optional(),\n    software_version: z.string().optional(),\n}).strip();\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration client information\n */\nexport const OAuthClientInformationSchema = z.object({\n    client_id: z.string(),\n    client_secret: z.string().optional(),\n    client_id_issued_at: z.number().optional(),\n    client_secret_expires_at: z.number().optional(),\n}).strip();\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration full response (client information plus metadata)\n */\nexport const OAuthClientInformationFullSchema = OAuthClientMetadataSchema.merge(OAuthClientInformationSchema);\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration error response\n */\nexport const OAuthClientRegistrationErrorSchema = z.object({\n    error: z.string(),\n    error_description: z.string().optional(),\n}).strip();\n/**\n * RFC 7009 OAuth 2.0 Token Revocation request\n */\nexport const OAuthTokenRevocationRequestSchema = z.object({\n    token: z.string(),\n    token_type_hint: z.string().optional(),\n}).strip();\n//# sourceMappingURL=auth.js.map","import pkceChallenge from \"pkce-challenge\";\nimport { LATEST_PROTOCOL_VERSION } from \"../types.js\";\nimport { OAuthClientInformationFullSchema, OAuthMetadataSchema, OAuthTokensSchema } from \"../shared/auth.js\";\nexport class UnauthorizedError extends Error {\n    constructor(message) {\n        super(message !== null && message !== void 0 ? message : \"Unauthorized\");\n    }\n}\n/**\n * Orchestrates the full auth flow with a server.\n *\n * This can be used as a single entry point for all authorization functionality,\n * instead of linking together the other lower-level functions in this module.\n */\nexport async function auth(provider, { serverUrl, authorizationCode, scope, }) {\n    const metadata = await discoverOAuthMetadata(serverUrl);\n    // Handle client registration if needed\n    let clientInformation = await Promise.resolve(provider.clientInformation());\n    if (!clientInformation) {\n        if (authorizationCode !== undefined) {\n            throw new Error(\"Existing OAuth client information is required when exchanging an authorization code\");\n        }\n        if (!provider.saveClientInformation) {\n            throw new Error(\"OAuth client information must be saveable for dynamic registration\");\n        }\n        const fullInformation = await registerClient(serverUrl, {\n            metadata,\n            clientMetadata: provider.clientMetadata,\n        });\n        await provider.saveClientInformation(fullInformation);\n        clientInformation = fullInformation;\n    }\n    // Exchange authorization code for tokens\n    if (authorizationCode !== undefined) {\n        const codeVerifier = await provider.codeVerifier();\n        const tokens = await exchangeAuthorization(serverUrl, {\n            metadata,\n            clientInformation,\n            authorizationCode,\n            codeVerifier,\n            redirectUri: provider.redirectUrl,\n        });\n        await provider.saveTokens(tokens);\n        return \"AUTHORIZED\";\n    }\n    const tokens = await provider.tokens();\n    // Handle token refresh or new authorization\n    if (tokens === null || tokens === void 0 ? void 0 : tokens.refresh_token) {\n        try {\n            // Attempt to refresh the token\n            const newTokens = await refreshAuthorization(serverUrl, {\n                metadata,\n                clientInformation,\n                refreshToken: tokens.refresh_token,\n            });\n            await provider.saveTokens(newTokens);\n            return \"AUTHORIZED\";\n        }\n        catch (error) {\n            console.error(\"Could not refresh OAuth tokens:\", error);\n        }\n    }\n    // Start new authorization flow\n    const { authorizationUrl, codeVerifier } = await startAuthorization(serverUrl, {\n        metadata,\n        clientInformation,\n        redirectUrl: provider.redirectUrl,\n        scope: scope || provider.clientMetadata.scope,\n    });\n    await provider.saveCodeVerifier(codeVerifier);\n    await provider.redirectToAuthorization(authorizationUrl);\n    return \"REDIRECT\";\n}\n/**\n * Looks up RFC 8414 OAuth 2.0 Authorization Server Metadata.\n *\n * If the server returns a 404 for the well-known endpoint, this function will\n * return `undefined`. Any other errors will be thrown as exceptions.\n */\nexport async function discoverOAuthMetadata(serverUrl, opts) {\n    var _a;\n    const url = new URL(\"/.well-known/oauth-authorization-server\", serverUrl);\n    let response;\n    try {\n        response = await fetch(url, {\n            headers: {\n                \"MCP-Protocol-Version\": (_a = opts === null || opts === void 0 ? void 0 : opts.protocolVersion) !== null && _a !== void 0 ? _a : LATEST_PROTOCOL_VERSION\n            }\n        });\n    }\n    catch (error) {\n        // CORS errors come back as TypeError\n        if (error instanceof TypeError) {\n            response = await fetch(url);\n        }\n        else {\n            throw error;\n        }\n    }\n    if (response.status === 404) {\n        return undefined;\n    }\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status} trying to load well-known OAuth metadata`);\n    }\n    return OAuthMetadataSchema.parse(await response.json());\n}\n/**\n * Begins the authorization flow with the given server, by generating a PKCE challenge and constructing the authorization URL.\n */\nexport async function startAuthorization(serverUrl, { metadata, clientInformation, redirectUrl, scope, }) {\n    const responseType = \"code\";\n    const codeChallengeMethod = \"S256\";\n    let authorizationUrl;\n    if (metadata) {\n        authorizationUrl = new URL(metadata.authorization_endpoint);\n        if (!metadata.response_types_supported.includes(responseType)) {\n            throw new Error(`Incompatible auth server: does not support response type ${responseType}`);\n        }\n        if (!metadata.code_challenge_methods_supported ||\n            !metadata.code_challenge_methods_supported.includes(codeChallengeMethod)) {\n            throw new Error(`Incompatible auth server: does not support code challenge method ${codeChallengeMethod}`);\n        }\n    }\n    else {\n        authorizationUrl = new URL(\"/authorize\", serverUrl);\n    }\n    // Generate PKCE challenge\n    const challenge = await pkceChallenge();\n    const codeVerifier = challenge.code_verifier;\n    const codeChallenge = challenge.code_challenge;\n    authorizationUrl.searchParams.set(\"response_type\", responseType);\n    authorizationUrl.searchParams.set(\"client_id\", clientInformation.client_id);\n    authorizationUrl.searchParams.set(\"code_challenge\", codeChallenge);\n    authorizationUrl.searchParams.set(\"code_challenge_method\", codeChallengeMethod);\n    authorizationUrl.searchParams.set(\"redirect_uri\", String(redirectUrl));\n    if (scope) {\n        authorizationUrl.searchParams.set(\"scope\", scope);\n    }\n    return { authorizationUrl, codeVerifier };\n}\n/**\n * Exchanges an authorization code for an access token with the given server.\n */\nexport async function exchangeAuthorization(serverUrl, { metadata, clientInformation, authorizationCode, codeVerifier, redirectUri, }) {\n    const grantType = \"authorization_code\";\n    let tokenUrl;\n    if (metadata) {\n        tokenUrl = new URL(metadata.token_endpoint);\n        if (metadata.grant_types_supported &&\n            !metadata.grant_types_supported.includes(grantType)) {\n            throw new Error(`Incompatible auth server: does not support grant type ${grantType}`);\n        }\n    }\n    else {\n        tokenUrl = new URL(\"/token\", serverUrl);\n    }\n    // Exchange code for tokens\n    const params = new URLSearchParams({\n        grant_type: grantType,\n        client_id: clientInformation.client_id,\n        code: authorizationCode,\n        code_verifier: codeVerifier,\n        redirect_uri: String(redirectUri),\n    });\n    if (clientInformation.client_secret) {\n        params.set(\"client_secret\", clientInformation.client_secret);\n    }\n    const response = await fetch(tokenUrl, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        body: params,\n    });\n    if (!response.ok) {\n        throw new Error(`Token exchange failed: HTTP ${response.status}`);\n    }\n    return OAuthTokensSchema.parse(await response.json());\n}\n/**\n * Exchange a refresh token for an updated access token.\n */\nexport async function refreshAuthorization(serverUrl, { metadata, clientInformation, refreshToken, }) {\n    const grantType = \"refresh_token\";\n    let tokenUrl;\n    if (metadata) {\n        tokenUrl = new URL(metadata.token_endpoint);\n        if (metadata.grant_types_supported &&\n            !metadata.grant_types_supported.includes(grantType)) {\n            throw new Error(`Incompatible auth server: does not support grant type ${grantType}`);\n        }\n    }\n    else {\n        tokenUrl = new URL(\"/token\", serverUrl);\n    }\n    // Exchange refresh token\n    const params = new URLSearchParams({\n        grant_type: grantType,\n        client_id: clientInformation.client_id,\n        refresh_token: refreshToken,\n    });\n    if (clientInformation.client_secret) {\n        params.set(\"client_secret\", clientInformation.client_secret);\n    }\n    const response = await fetch(tokenUrl, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        body: params,\n    });\n    if (!response.ok) {\n        throw new Error(`Token refresh failed: HTTP ${response.status}`);\n    }\n    return OAuthTokensSchema.parse(await response.json());\n}\n/**\n * Performs OAuth 2.0 Dynamic Client Registration according to RFC 7591.\n */\nexport async function registerClient(serverUrl, { metadata, clientMetadata, }) {\n    let registrationUrl;\n    if (metadata) {\n        if (!metadata.registration_endpoint) {\n            throw new Error(\"Incompatible auth server: does not support dynamic client registration\");\n        }\n        registrationUrl = new URL(metadata.registration_endpoint);\n    }\n    else {\n        registrationUrl = new URL(\"/register\", serverUrl);\n    }\n    const response = await fetch(registrationUrl, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(clientMetadata),\n    });\n    if (!response.ok) {\n        throw new Error(`Dynamic client registration failed: HTTP ${response.status}`);\n    }\n    return OAuthClientInformationFullSchema.parse(await response.json());\n}\n//# sourceMappingURL=auth.js.map","var __defProp = Object.defineProperty, __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: !0, configurable: !0, writable: !0, value }) : obj[key] = value, __publicField = (obj, key, value) => __defNormalProp(obj, typeof key != \"symbol\" ? key + \"\" : key, value);\nclass ParseError extends Error {\n  constructor(message, options) {\n    super(message), __publicField(this, \"type\"), __publicField(this, \"field\"), __publicField(this, \"value\"), __publicField(this, \"line\"), this.name = \"ParseError\", this.type = options.type, this.field = options.field, this.value = options.value, this.line = options.line;\n  }\n}\nfunction noop(_arg) {\n}\nfunction createParser(callbacks) {\n  const { onEvent = noop, onError = noop, onRetry = noop, onComment } = callbacks;\n  let incompleteLine = \"\", isFirstChunk = !0, id, data = \"\", eventType = \"\";\n  function feed(newChunk) {\n    const chunk = isFirstChunk ? newChunk.replace(/^\\xEF\\xBB\\xBF/, \"\") : newChunk, [complete, incomplete] = splitLines(`${incompleteLine}${chunk}`);\n    for (const line of complete)\n      parseLine(line);\n    incompleteLine = incomplete, isFirstChunk = !1;\n  }\n  function parseLine(line) {\n    if (line === \"\") {\n      dispatchEvent();\n      return;\n    }\n    if (line.startsWith(\":\")) {\n      onComment && onComment(line.slice(line.startsWith(\": \") ? 2 : 1));\n      return;\n    }\n    const fieldSeparatorIndex = line.indexOf(\":\");\n    if (fieldSeparatorIndex !== -1) {\n      const field = line.slice(0, fieldSeparatorIndex), offset = line[fieldSeparatorIndex + 1] === \" \" ? 2 : 1, value = line.slice(fieldSeparatorIndex + offset);\n      processField(field, value, line);\n      return;\n    }\n    processField(line, \"\", line);\n  }\n  function processField(field, value, line) {\n    switch (field) {\n      case \"event\":\n        eventType = value;\n        break;\n      case \"data\":\n        data = `${data}${value}\n`;\n        break;\n      case \"id\":\n        id = value.includes(\"\\0\") ? void 0 : value;\n        break;\n      case \"retry\":\n        /^\\d+$/.test(value) ? onRetry(parseInt(value, 10)) : onError(\n          new ParseError(`Invalid \\`retry\\` value: \"${value}\"`, {\n            type: \"invalid-retry\",\n            value,\n            line\n          })\n        );\n        break;\n      default:\n        onError(\n          new ParseError(\n            `Unknown field \"${field.length > 20 ? `${field.slice(0, 20)}\\u2026` : field}\"`,\n            { type: \"unknown-field\", field, value, line }\n          )\n        );\n        break;\n    }\n  }\n  function dispatchEvent() {\n    data.length > 0 && onEvent({\n      id,\n      event: eventType || void 0,\n      // If the data buffer's last character is a U+000A LINE FEED (LF) character,\n      // then remove the last character from the data buffer.\n      data: data.endsWith(`\n`) ? data.slice(0, -1) : data\n    }), id = void 0, data = \"\", eventType = \"\";\n  }\n  function reset(options = {}) {\n    incompleteLine && options.consume && parseLine(incompleteLine), id = void 0, data = \"\", eventType = \"\", incompleteLine = \"\";\n  }\n  return { feed, reset };\n}\nfunction splitLines(chunk) {\n  const lines = [];\n  let incompleteLine = \"\";\n  const totalLength = chunk.length;\n  for (let i = 0; i < totalLength; i++) {\n    const char = chunk[i];\n    char === \"\\r\" && chunk[i + 1] === `\n` ? (lines.push(incompleteLine), incompleteLine = \"\", i++) : char === \"\\r\" || char === `\n` ? (lines.push(incompleteLine), incompleteLine = \"\") : incompleteLine += char;\n  }\n  return [lines, incompleteLine];\n}\nexport {\n  ParseError,\n  createParser\n};\n//# sourceMappingURL=index.js.map\n","import { createParser } from \"./index.js\";\nimport { ParseError } from \"./index.js\";\nclass EventSourceParserStream extends TransformStream {\n  constructor({ onError, onRetry, onComment } = {}) {\n    let parser;\n    super({\n      start(controller) {\n        parser = createParser({\n          onEvent: (event) => {\n            controller.enqueue(event);\n          },\n          onError(error) {\n            onError === \"terminate\" ? controller.error(error) : typeof onError == \"function\" && onError(error);\n          },\n          onRetry,\n          onComment\n        });\n      },\n      transform(chunk) {\n        parser.feed(chunk);\n      }\n    });\n  }\n}\nexport {\n  EventSourceParserStream,\n  ParseError\n};\n//# sourceMappingURL=stream.js.map\n","import { isInitializedNotification, isJSONRPCRequest, isJSONRPCResponse, JSONRPCMessageSchema } from \"../types.js\";\nimport { auth, UnauthorizedError } from \"./auth.js\";\nimport { EventSourceParserStream } from \"eventsource-parser/stream\";\n// Default reconnection options for StreamableHTTP connections\nconst DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS = {\n    initialReconnectionDelay: 1000,\n    maxReconnectionDelay: 30000,\n    reconnectionDelayGrowFactor: 1.5,\n    maxRetries: 2,\n};\nexport class StreamableHTTPError extends Error {\n    constructor(code, message) {\n        super(`Streamable HTTP error: ${message}`);\n        this.code = code;\n    }\n}\n/**\n * Client transport for Streamable HTTP: this implements the MCP Streamable HTTP transport specification.\n * It will connect to a server using HTTP POST for sending messages and HTTP GET with Server-Sent Events\n * for receiving messages.\n */\nexport class StreamableHTTPClientTransport {\n    constructor(url, opts) {\n        var _a;\n        this._url = url;\n        this._requestInit = opts === null || opts === void 0 ? void 0 : opts.requestInit;\n        this._authProvider = opts === null || opts === void 0 ? void 0 : opts.authProvider;\n        this._sessionId = opts === null || opts === void 0 ? void 0 : opts.sessionId;\n        this._reconnectionOptions = (_a = opts === null || opts === void 0 ? void 0 : opts.reconnectionOptions) !== null && _a !== void 0 ? _a : DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS;\n    }\n    async _authThenStart() {\n        var _a;\n        if (!this._authProvider) {\n            throw new UnauthorizedError(\"No auth provider\");\n        }\n        let result;\n        try {\n            result = await auth(this._authProvider, { serverUrl: this._url });\n        }\n        catch (error) {\n            (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n            throw error;\n        }\n        if (result !== \"AUTHORIZED\") {\n            throw new UnauthorizedError();\n        }\n        return await this._startOrAuthSse({ resumptionToken: undefined });\n    }\n    async _commonHeaders() {\n        var _a;\n        const headers = {};\n        if (this._authProvider) {\n            const tokens = await this._authProvider.tokens();\n            if (tokens) {\n                headers[\"Authorization\"] = `Bearer ${tokens.access_token}`;\n            }\n        }\n        if (this._sessionId) {\n            headers[\"mcp-session-id\"] = this._sessionId;\n        }\n        return new Headers({ ...headers, ...(_a = this._requestInit) === null || _a === void 0 ? void 0 : _a.headers });\n    }\n    async _startOrAuthSse(options) {\n        var _a, _b;\n        const { resumptionToken } = options;\n        try {\n            // Try to open an initial SSE stream with GET to listen for server messages\n            // This is optional according to the spec - server may not support it\n            const headers = await this._commonHeaders();\n            headers.set(\"Accept\", \"text/event-stream\");\n            // Include Last-Event-ID header for resumable streams if provided\n            if (resumptionToken) {\n                headers.set(\"last-event-id\", resumptionToken);\n            }\n            const response = await fetch(this._url, {\n                method: \"GET\",\n                headers,\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal,\n            });\n            if (!response.ok) {\n                if (response.status === 401 && this._authProvider) {\n                    // Need to authenticate\n                    return await this._authThenStart();\n                }\n                // 405 indicates that the server does not offer an SSE stream at GET endpoint\n                // This is an expected case that should not trigger an error\n                if (response.status === 405) {\n                    return;\n                }\n                throw new StreamableHTTPError(response.status, `Failed to open SSE stream: ${response.statusText}`);\n            }\n            this._handleSseStream(response.body, options);\n        }\n        catch (error) {\n            (_b = this.onerror) === null || _b === void 0 ? void 0 : _b.call(this, error);\n            throw error;\n        }\n    }\n    /**\n     * Calculates the next reconnection delay using  backoff algorithm\n     *\n     * @param attempt Current reconnection attempt count for the specific stream\n     * @returns Time to wait in milliseconds before next reconnection attempt\n     */\n    _getNextReconnectionDelay(attempt) {\n        // Access default values directly, ensuring they're never undefined\n        const initialDelay = this._reconnectionOptions.initialReconnectionDelay;\n        const growFactor = this._reconnectionOptions.reconnectionDelayGrowFactor;\n        const maxDelay = this._reconnectionOptions.maxReconnectionDelay;\n        // Cap at maximum delay\n        return Math.min(initialDelay * Math.pow(growFactor, attempt), maxDelay);\n    }\n    /**\n     * Schedule a reconnection attempt with exponential backoff\n     *\n     * @param lastEventId The ID of the last received event for resumability\n     * @param attemptCount Current reconnection attempt count for this specific stream\n     */\n    _scheduleReconnection(options, attemptCount = 0) {\n        var _a;\n        // Use provided options or default options\n        const maxRetries = this._reconnectionOptions.maxRetries;\n        // Check if we've exceeded maximum retry attempts\n        if (maxRetries > 0 && attemptCount >= maxRetries) {\n            (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, new Error(`Maximum reconnection attempts (${maxRetries}) exceeded.`));\n            return;\n        }\n        // Calculate next delay based on current attempt count\n        const delay = this._getNextReconnectionDelay(attemptCount);\n        // Schedule the reconnection\n        setTimeout(() => {\n            // Use the last event ID to resume where we left off\n            this._startOrAuthSse(options).catch(error => {\n                var _a;\n                (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, new Error(`Failed to reconnect SSE stream: ${error instanceof Error ? error.message : String(error)}`));\n                // Schedule another attempt if this one failed, incrementing the attempt counter\n                this._scheduleReconnection(options, attemptCount + 1);\n            });\n        }, delay);\n    }\n    _handleSseStream(stream, options) {\n        if (!stream) {\n            return;\n        }\n        const { onresumptiontoken, replayMessageId } = options;\n        let lastEventId;\n        const processStream = async () => {\n            var _a, _b, _c, _d;\n            // this is the closest we can get to trying to catch network errors\n            // if something happens reader will throw\n            try {\n                // Create a pipeline: binary stream -> text decoder -> SSE parser\n                const reader = stream\n                    .pipeThrough(new TextDecoderStream())\n                    .pipeThrough(new EventSourceParserStream())\n                    .getReader();\n                while (true) {\n                    const { value: event, done } = await reader.read();\n                    if (done) {\n                        break;\n                    }\n                    // Update last event ID if provided\n                    if (event.id) {\n                        lastEventId = event.id;\n                        onresumptiontoken === null || onresumptiontoken === void 0 ? void 0 : onresumptiontoken(event.id);\n                    }\n                    if (!event.event || event.event === \"message\") {\n                        try {\n                            const message = JSONRPCMessageSchema.parse(JSON.parse(event.data));\n                            if (replayMessageId !== undefined && isJSONRPCResponse(message)) {\n                                message.id = replayMessageId;\n                            }\n                            (_a = this.onmessage) === null || _a === void 0 ? void 0 : _a.call(this, message);\n                        }\n                        catch (error) {\n                            (_b = this.onerror) === null || _b === void 0 ? void 0 : _b.call(this, error);\n                        }\n                    }\n                }\n            }\n            catch (error) {\n                // Handle stream errors - likely a network disconnect\n                (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, new Error(`SSE stream disconnected: ${error}`));\n                // Attempt to reconnect if the stream disconnects unexpectedly and we aren't closing\n                if (this._abortController && !this._abortController.signal.aborted) {\n                    // Use the exponential backoff reconnection strategy\n                    if (lastEventId !== undefined) {\n                        try {\n                            this._scheduleReconnection({\n                                resumptionToken: lastEventId,\n                                onresumptiontoken,\n                                replayMessageId\n                            }, 0);\n                        }\n                        catch (error) {\n                            (_d = this.onerror) === null || _d === void 0 ? void 0 : _d.call(this, new Error(`Failed to reconnect: ${error instanceof Error ? error.message : String(error)}`));\n                        }\n                    }\n                }\n            }\n        };\n        processStream();\n    }\n    async start() {\n        if (this._abortController) {\n            throw new Error(\"StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.\");\n        }\n        this._abortController = new AbortController();\n    }\n    /**\n     * Call this method after the user has finished authorizing via their user agent and is redirected back to the MCP client application. This will exchange the authorization code for an access token, enabling the next connection attempt to successfully auth.\n     */\n    async finishAuth(authorizationCode) {\n        if (!this._authProvider) {\n            throw new UnauthorizedError(\"No auth provider\");\n        }\n        const result = await auth(this._authProvider, { serverUrl: this._url, authorizationCode });\n        if (result !== \"AUTHORIZED\") {\n            throw new UnauthorizedError(\"Failed to authorize\");\n        }\n    }\n    async close() {\n        var _a, _b;\n        // Abort any pending requests\n        (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        (_b = this.onclose) === null || _b === void 0 ? void 0 : _b.call(this);\n    }\n    async send(message, options) {\n        var _a, _b, _c;\n        try {\n            const { resumptionToken, onresumptiontoken } = options || {};\n            if (resumptionToken) {\n                // If we have at last event ID, we need to reconnect the SSE stream\n                this._startOrAuthSse({ resumptionToken, replayMessageId: isJSONRPCRequest(message) ? message.id : undefined }).catch(err => { var _a; return (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, err); });\n                return;\n            }\n            const headers = await this._commonHeaders();\n            headers.set(\"content-type\", \"application/json\");\n            headers.set(\"accept\", \"application/json, text/event-stream\");\n            const init = {\n                ...this._requestInit,\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(message),\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal,\n            };\n            const response = await fetch(this._url, init);\n            // Handle session ID received during initialization\n            const sessionId = response.headers.get(\"mcp-session-id\");\n            if (sessionId) {\n                this._sessionId = sessionId;\n            }\n            if (!response.ok) {\n                if (response.status === 401 && this._authProvider) {\n                    const result = await auth(this._authProvider, { serverUrl: this._url });\n                    if (result !== \"AUTHORIZED\") {\n                        throw new UnauthorizedError();\n                    }\n                    // Purposely _not_ awaited, so we don't call onerror twice\n                    return this.send(message);\n                }\n                const text = await response.text().catch(() => null);\n                throw new Error(`Error POSTing to endpoint (HTTP ${response.status}): ${text}`);\n            }\n            // If the response is 202 Accepted, there's no body to process\n            if (response.status === 202) {\n                // if the accepted notification is initialized, we start the SSE stream\n                // if it's supported by the server\n                if (isInitializedNotification(message)) {\n                    // Start without a lastEventId since this is a fresh connection\n                    this._startOrAuthSse({ resumptionToken: undefined }).catch(err => { var _a; return (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, err); });\n                }\n                return;\n            }\n            // Get original message(s) for detecting request IDs\n            const messages = Array.isArray(message) ? message : [message];\n            const hasRequests = messages.filter(msg => \"method\" in msg && \"id\" in msg && msg.id !== undefined).length > 0;\n            // Check the response type\n            const contentType = response.headers.get(\"content-type\");\n            if (hasRequests) {\n                if (contentType === null || contentType === void 0 ? void 0 : contentType.includes(\"text/event-stream\")) {\n                    // Handle SSE stream responses for requests\n                    // We use the same handler as standalone streams, which now supports\n                    // reconnection with the last event ID\n                    this._handleSseStream(response.body, { onresumptiontoken });\n                }\n                else if (contentType === null || contentType === void 0 ? void 0 : contentType.includes(\"application/json\")) {\n                    // For non-streaming servers, we might get direct JSON responses\n                    const data = await response.json();\n                    const responseMessages = Array.isArray(data)\n                        ? data.map(msg => JSONRPCMessageSchema.parse(msg))\n                        : [JSONRPCMessageSchema.parse(data)];\n                    for (const msg of responseMessages) {\n                        (_b = this.onmessage) === null || _b === void 0 ? void 0 : _b.call(this, msg);\n                    }\n                }\n                else {\n                    throw new StreamableHTTPError(-1, `Unexpected content type: ${contentType}`);\n                }\n            }\n        }\n        catch (error) {\n            (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, error);\n            throw error;\n        }\n    }\n    get sessionId() {\n        return this._sessionId;\n    }\n    /**\n     * Terminates the current session by sending a DELETE request to the server.\n     *\n     * Clients that no longer need a particular session\n     * (e.g., because the user is leaving the client application) SHOULD send an\n     * HTTP DELETE to the MCP endpoint with the Mcp-Session-Id header to explicitly\n     * terminate the session.\n     *\n     * The server MAY respond with HTTP 405 Method Not Allowed, indicating that\n     * the server does not allow clients to terminate sessions.\n     */\n    async terminateSession() {\n        var _a, _b;\n        if (!this._sessionId) {\n            return; // No session to terminate\n        }\n        try {\n            const headers = await this._commonHeaders();\n            const init = {\n                ...this._requestInit,\n                method: \"DELETE\",\n                headers,\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal,\n            };\n            const response = await fetch(this._url, init);\n            // We specifically handle 405 as a valid response according to the spec,\n            // meaning the server does not support explicit session termination\n            if (!response.ok && response.status !== 405) {\n                throw new StreamableHTTPError(response.status, `Failed to terminate session: ${response.statusText}`);\n            }\n            this._sessionId = undefined;\n        }\n        catch (error) {\n            (_b = this.onerror) === null || _b === void 0 ? void 0 : _b.call(this, error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=streamableHttp.js.map","import { logWarning } from '@grafana/runtime';\nimport { SemVer } from 'semver';\n\nconst LLM_PLUGIN_ID = \"grafana-llm-app\";\nconst LLM_PLUGIN_ROUTE = `/api/plugins/${LLM_PLUGIN_ID}`;\nlet LLM_PLUGIN_VERSION = new SemVer(\"0.2.0\");\nfunction setLLMPluginVersion(version) {\n  try {\n    LLM_PLUGIN_VERSION = new SemVer(version);\n  } catch (e) {\n    logWarning(\n      \"Failed to parse version of grafana-llm-app; assuming old version is present.\"\n    );\n  }\n}\n\nexport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE, LLM_PLUGIN_VERSION, setLLMPluginVersion };\n//# sourceMappingURL=constants.mjs.map\n","import React, { useMemo } from 'react';\nimport { LiveChannelScope, isLiveChannelMessageEvent } from '@grafana/data';\nimport { getGrafanaLiveSrv, getBackendSrv, logDebug, config } from '@grafana/runtime';\nimport { Client } from '@modelcontextprotocol/sdk/client/index.js';\nexport { Client } from '@modelcontextprotocol/sdk/client/index.js';\nimport { StreamableHTTPClientTransport } from '@modelcontextprotocol/sdk/client/streamableHttp.js';\nexport { StreamableHTTPClientTransport } from '@modelcontextprotocol/sdk/client/streamableHttp.js';\nimport { JSONRPCMessageSchema } from '@modelcontextprotocol/sdk/types.js';\nimport { filter } from 'rxjs';\nimport { v4 } from 'uuid';\nimport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE } from './constants.mjs';\n\nconst MCP_GRAFANA_PATH = \"mcp/grafana\";\nclass GrafanaLiveTransport {\n  constructor(path) {\n    this._grafanaLiveSrv = getGrafanaLiveSrv();\n    if (path === undefined) {\n      const pathId = v4();\n      path = `${MCP_GRAFANA_PATH}/${pathId}`;\n    }\n    this._subscribeChannel = {\n      scope: LiveChannelScope.Plugin,\n      namespace: LLM_PLUGIN_ID,\n      path: `${path}/subscribe`\n    };\n    this._publishChannel = {\n      scope: LiveChannelScope.Plugin,\n      namespace: LLM_PLUGIN_ID,\n      path: `${path}/publish`\n    };\n  }\n  async start() {\n    if (this._stream !== undefined) {\n      throw new Error(\n        \"GrafanaLiveTransport already started! If using Client class, note that connect() calls start() automatically.\"\n      );\n    }\n    const stream = this._grafanaLiveSrv.getStream(this._subscribeChannel).pipe(filter((event) => isLiveChannelMessageEvent(event)));\n    this._stream = stream;\n    stream.subscribe((event) => {\n      let message;\n      try {\n        message = JSONRPCMessageSchema.parse(event.message);\n      } catch (error) {\n        this.onerror?.(error);\n        return;\n      }\n      this.onmessage?.(message);\n    });\n  }\n  async send(message) {\n    if (this._stream === undefined) {\n      throw new Error(\"not connected\");\n    }\n    const hasPublishOptions = this._grafanaLiveSrv.publish?.length >= 3;\n    if (hasPublishOptions) {\n      const options = { useSocket: true };\n      this._grafanaLiveSrv.publish(\n        this._publishChannel,\n        message,\n        //@ts-expect-error\n        options\n      );\n    }\n    const centrifugeSubscription = (\n      // @ts-expect-error\n      this._grafanaLiveSrv.deps?.centrifugeSrv?.getChannel?.(\n        this._publishChannel\n      )?.subscription\n    );\n    if (centrifugeSubscription) {\n      return centrifugeSubscription.publish(message);\n    }\n    console.warn(\n      \"Websocket subscription not available, falling back to HTTP publish. This may fail in HA setups. If you see this, please create an issue at https://github.com/grafana/grafana-llm-app/issues/new.\"\n    );\n    await this._grafanaLiveSrv.publish(this._publishChannel, message);\n  }\n  async close() {\n    this._stream = undefined;\n  }\n}\nconst clientMap = /* @__PURE__ */ new Map();\nconst MCPClientContext = React.createContext(null);\nfunction clientKey(appName, appVersion) {\n  return `${appName}-${appVersion}`;\n}\nasync function enabled() {\n  try {\n    const settings = await getBackendSrv().get(\n      `${LLM_PLUGIN_ROUTE}/settings`,\n      void 0,\n      void 0,\n      {\n        showSuccessAlert: false,\n        showErrorAlert: false\n      }\n    );\n    if (!settings.enabled) {\n      return false;\n    }\n    if (settings.jsonData.mcp?.enabled !== void 0) {\n      return !!settings.jsonData.mcp?.enabled;\n    }\n    return !settings.jsonData.mcp?.disabled;\n  } catch (e) {\n    logDebug(String(e));\n    logDebug(\n      \"Failed to check if LLM provider is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n    );\n    return false;\n  }\n}\nfunction streamableHTTPURL(appId = LLM_PLUGIN_ID, mcpPath = MCP_GRAFANA_PATH) {\n  let grafanaUrl = config.appUrl || \"http://localhost:3000/\";\n  if (!grafanaUrl.endsWith(\"/\")) {\n    grafanaUrl = `${grafanaUrl}/`;\n  }\n  if (!mcpPath.startsWith(\"/\")) {\n    mcpPath = `/${mcpPath}`;\n  }\n  return new URL(`${grafanaUrl}api/plugins/${appId}/resources${mcpPath}`);\n}\nfunction createClientResource({\n  appName,\n  appVersion,\n  mcpAppName,\n  mcpAppPath\n}) {\n  let status = \"pending\";\n  let result = null;\n  let error = null;\n  const key = clientKey(appName, appVersion);\n  const promise = (async () => {\n    if (clientMap.has(key)) {\n      result = clientMap.get(key);\n      if (result.error) {\n        status = \"error\";\n        error = result.error;\n        throw result.error;\n      }\n      status = \"success\";\n      return result;\n    }\n    try {\n      const isEnabled = await enabled();\n      if (!isEnabled) {\n        status = \"success\";\n        result = { client: null, enabled: isEnabled };\n        clientMap.set(key, result);\n        return result;\n      }\n      const client = new Client({\n        name: appName,\n        version: appVersion\n      });\n      const transport = new StreamableHTTPClientTransport(\n        streamableHTTPURL(mcpAppName, mcpAppPath),\n        {\n          reconnectionOptions: {\n            maxRetries: 5,\n            initialReconnectionDelay: 1e3,\n            maxReconnectionDelay: 5e3,\n            reconnectionDelayGrowFactor: 1.5\n          }\n        }\n      );\n      await client.connect(transport);\n      result = { client, enabled: isEnabled };\n      clientMap.set(key, result);\n      status = \"success\";\n      return result;\n    } catch (e) {\n      status = \"error\";\n      error = e;\n      result = { client: null, enabled: false, error };\n      clientMap.set(key, result);\n      throw e;\n    }\n  })();\n  return {\n    read() {\n      if (status === \"pending\") {\n        throw promise;\n      } else if (status === \"error\") {\n        throw error;\n      } else if (status === \"success\" && result) {\n        return result;\n      }\n      throw new Error(\"Unexpected resource state\");\n    }\n  };\n}\nfunction MCPClientProvider({\n  appName,\n  appVersion,\n  mcpAppName = LLM_PLUGIN_ID,\n  mcpAppPath = MCP_GRAFANA_PATH,\n  children\n}) {\n  const resource = useMemo(\n    () => createClientResource({\n      appName,\n      appVersion,\n      mcpAppName,\n      mcpAppPath\n    }),\n    [appName, appVersion, mcpAppName, mcpAppPath]\n  );\n  const result = resource.read();\n  React.useEffect(() => {\n    return () => {\n      if (result?.client) {\n        result.client.close();\n      }\n      clientMap.delete(clientKey(appName, appVersion));\n    };\n  }, [result, appName, appVersion]);\n  return /* @__PURE__ */ React.createElement(MCPClientContext.Provider, { value: result }, children);\n}\nfunction useMCPClient() {\n  const client = React.useContext(MCPClientContext);\n  if (client === null) {\n    throw new Error(\"MCP is not enabled in this Grafana instance.\");\n  }\n  return client;\n}\nfunction convertToolsToOpenAI(tools) {\n  return tools.map(convertToolToOpenAI);\n}\nfunction convertToolToOpenAI(tool) {\n  return {\n    type: \"function\",\n    function: {\n      name: tool.name,\n      description: tool.description,\n      parameters: tool.inputSchema.properties !== undefined ? tool.inputSchema : undefined\n    }\n  };\n}\n\nexport { GrafanaLiveTransport, MCPClientProvider, convertToolsToOpenAI, enabled, streamableHTTPURL, useMCPClient };\n//# sourceMappingURL=mcp.mjs.map\n","import React from 'react';\nimport { useAsync } from 'react-use';\nimport { mcp } from '@grafana/llm';\nimport { ErrorBoundary } from '@grafana/ui';\nimport { testIds } from '../components/testIds';\n\nexport function MCPToolsList() {\n  const { client, enabled } = mcp.useMCPClient();\n\n  const { error, loading, value } = useAsync(async () => {\n    if (!enabled || !client) {\n      return null;\n    }\n    const result = await client.listTools();\n    return result.tools;\n  }, [client, enabled]);\n\n  if (!enabled) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <p data-testid={testIds.mcpTools.disabled}>MCP is not enabled in this Grafana instance.</p>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <span data-testid={testIds.mcpTools.loading}>Loading MCP tools...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <span data-testid={testIds.mcpTools.error}>Error loading MCP tools: {error.message}</span>\n      </div>\n    );\n  }\n\n  if (!value || value.length === 0) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <p data-testid={testIds.mcpTools.empty}>No MCP tools available.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid={testIds.mcpTools.container} style={{ maxHeight: '400px', overflowY: 'auto' }}>\n      <h2>Available MCP Tools</h2>\n      <ul data-testid={testIds.mcpTools.list}>\n        {value.map((tool: any) => (\n          <li key={tool.name} data-testid={testIds.mcpTools.toolItem}>\n            <strong data-testid={testIds.mcpTools.toolName}>{tool.name}</strong>\n            {tool.description && <span data-testid={testIds.mcpTools.toolDescription}> - {tool.description}</span>}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport function MCPToolsWithProvider() {\n  return (\n    <React.Suspense fallback={<div data-testid={testIds.mcpTools.container}>Connecting to MCP server...</div>}>\n      <ErrorBoundary>\n        {({ error }) => {\n          if (error) {\n            return (\n              <div data-testid={testIds.mcpTools.container}>\n                <span data-testid={testIds.mcpTools.error}>Error loading MCP tools: {error.message}</span>\n              </div>\n            );\n          }\n          return (\n            <mcp.MCPClientProvider appName=\"grafana-llm-app\" appVersion=\"0.21.1\">\n              <MCPToolsList />\n            </mcp.MCPClientProvider>\n          );\n        }}\n      </ErrorBoundary>\n    </React.Suspense>\n  );\n}\n","import React from 'react';\n\nimport { HealthCheckResult, config } from '@grafana/runtime';\nimport { Alert, AlertVariant, Stack } from '@grafana/ui';\n\ninterface HealthCheckDetails {\n  llmProvider: LLMProviderHealthDetails | boolean;\n  vector: VectorHealthDetails | boolean;\n  version: string;\n}\n\ninterface LLMProviderHealthDetails {\n  // Whether the minimum required LLM provider settings have been provided.\n  configured: boolean;\n  // Whether we can call the LLM provider API with the provided settings.\n  ok: boolean;\n  // If set, the error returned when trying to call the LLM provider API.\n  // Will be undefined if ok is true.\n  error?: string;\n  // A map of model names to their health details.\n  // The health check attempts to call the provider API with each\n  // of the configured models and records the result of each call here.\n  models: Record<string, ModelHealthDetails>;\n}\n\ninterface ModelHealthDetails {\n  // Whether we can use this model in calls to the provider.\n  ok: boolean;\n  // If set, the error returned when trying to call the provider API.\n  // Will be undefined if ok is true.\n  error?: string;\n}\n\ninterface VectorHealthDetails {\n  // Whether the vector service has been enabled.\n  enabled: boolean;\n  // Whether we can use the vector service with the provided settings.\n  ok: boolean;\n  // If set, the error returned when trying to call the vector service.\n  // Will be undefined if ok is true.\n  error?: string;\n}\n\nconst isHealthCheckDetails = (obj: unknown): obj is HealthCheckDetails => {\n  return typeof obj === 'object' && obj !== null && 'llmProvider' in obj && 'vector' in obj && 'version' in obj;\n};\n\nconst alertVariants = new Set<AlertVariant>(['success', 'info', 'warning', 'error']);\nconst isAlertVariant = (str: string): str is AlertVariant => alertVariants.has(str as AlertVariant);\nconst getAlertVariant = (status: string): AlertVariant => {\n  if (status.toLowerCase() === 'ok') {\n    return 'success';\n  }\n  return isAlertVariant(status) ? status : 'info';\n};\nconst getAlertSeverity = (status: string, details: HealthCheckDetails): AlertVariant => {\n  const severity = getAlertVariant(status);\n  if (severity !== 'success') {\n    return severity;\n  }\n  if (!isHealthCheckDetails(details)) {\n    return 'success';\n  }\n  if (typeof details.llmProvider === 'object' && typeof details.vector === 'object') {\n    const vectorOk = !details.vector.enabled || details.vector.ok;\n    return details.llmProvider.ok && vectorOk ? 'success' : 'warning';\n  }\n  return severity;\n};\n\nexport function ShowHealthCheckResult(props: HealthCheckResult) {\n  let severity = getAlertVariant(props.status ?? 'error');\n  if (!isHealthCheckDetails(props.details)) {\n    return <Alert severity={severity} title={props.message} />;\n  }\n\n  severity = getAlertSeverity(props.status ?? 'error', props.details);\n  const showLLMProvider =\n    typeof props.details.llmProvider === 'boolean' ||\n    (typeof props.details.llmProvider === 'object' && props.details.llmProvider.configured);\n  const showVector =\n    typeof props.details.vector === 'boolean' ||\n    (typeof props.details.vector === 'object' && props.details.vector.enabled);\n  return (\n    <Stack direction=\"column\">\n      <ShowGrafanaHealth />\n      {showLLMProvider && <ShowLLMProviderHealth provider={props.details.llmProvider} />}\n      {showVector && <ShowVectorHealth vector={props.details.vector} />}\n    </Stack>\n  );\n}\n\nfunction ShowGrafanaHealth() {\n  if (config.liveEnabled) {\n    return null;\n  }\n  return (\n    <Alert title=\"Grafana Live is disabled\" severity=\"warning\">\n      <div>\n        Grafana Live is disabled. This plugin requires Grafana Live to be enabled in order to function correctly.\n      </div>\n      <div>\n        Set the{' '}\n        <a href=\"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/#max_connections\">\n          <code>max_connections</code>\n        </a>{' '}\n        setting to a non-zero value in the Grafana configuration file to enable Grafana Live.\n      </div>\n    </Alert>\n  );\n}\n\nfunction ShowLLMProviderHealth({ provider }: { provider: LLMProviderHealthDetails | boolean }) {\n  if (typeof provider === 'boolean') {\n    const severity = provider ? 'success' : 'error';\n    const message = provider ? 'LLM provider health check succeeded!' : 'LLM provider health check failed.';\n    return <Alert title={message} severity={severity} />;\n  }\n\n  const message = provider.ok ? 'LLM provider health check succeeded!' : 'LLM provider health check failed.';\n  const severity = provider.ok ? 'success' : 'error';\n\n  return (\n    <Stack direction=\"column\" width=\"100%\">\n      <Alert severity={severity} title={message}>\n        <b>Models</b>\n        <div>\n          {Object.entries(provider.models).map(([model, details], i) => (\n            <li key={i}>\n              {model}: {details.ok ? 'OK' : `Error: ${details.error}`}\n            </li>\n          ))}\n        </div>\n      </Alert>\n    </Stack>\n  );\n}\n\nfunction ShowVectorHealth({ vector }: { vector: VectorHealthDetails | boolean }) {\n  if (typeof vector === 'boolean') {\n    const severity = vector ? 'success' : 'error';\n    const message = vector ? 'Vector service health check succeeded!' : 'Vector service health check failed.';\n    return <Alert title={message} severity={severity} />;\n  }\n  const severity = vector.ok ? 'success' : 'error';\n  const message = vector.ok ? 'Vector service health check succeeded!' : 'Vector service health check failed.';\n  return (\n    <Alert title={message} severity={severity}>\n      {vector.error && <div>Error: {vector.error}</div>}\n    </Alert>\n  );\n}\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { createOperatorSubscriber } from './OperatorSubscriber';\nexport function scanInternals(accumulator, seed, hasSeed, emitOnNext, emitBeforeComplete) {\n    return function (source, subscriber) {\n        var hasState = hasSeed;\n        var state = seed;\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var i = index++;\n            state = hasState\n                ?\n                    accumulator(state, value, i)\n                :\n                    ((hasState = true), value);\n            emitOnNext && subscriber.next(state);\n        }, emitBeforeComplete &&\n            (function () {\n                hasState && subscriber.next(state);\n                subscriber.complete();\n            })));\n    };\n}\n//# sourceMappingURL=scanInternals.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { reduce } from './reduce';\nimport { operate } from '../util/lift';\nvar arrReducer = function (arr, value) { return (arr.push(value), arr); };\nexport function toArray() {\n    return operate(function (source, subscriber) {\n        reduce(arrReducer, [])(source).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=toArray.js.map","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import { LiveChannelScope, isLiveChannelMessageEvent } from '@grafana/data';\nimport { getBackendSrv, getGrafanaLiveSrv, logDebug } from '@grafana/runtime';\nimport { useState, useCallback, useEffect } from 'react';\nimport { useAsync } from 'react-use';\nimport { pipe } from 'rxjs';\nimport { filter, map, scan, tap, takeWhile, toArray } from 'rxjs/operators';\nimport { v4 } from 'uuid';\nimport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE, setLLMPluginVersion } from './constants.mjs';\n\nconst LLM_CHAT_COMPLETIONS_PATH = \"llm/v1/chat/completions\";\nvar Model = /* @__PURE__ */ ((Model2) => {\n  Model2[\"BASE\"] = \"base\";\n  Model2[\"LARGE\"] = \"large\";\n  return Model2;\n})(Model || {});\nfunction isContentMessage(message) {\n  return \"content\" in message;\n}\nfunction isDoneMessage(message) {\n  return \"done\" in message && message.done != null;\n}\nfunction isErrorResponse(response) {\n  return \"error\" in response;\n}\nfunction isFunctionCallMessage(message) {\n  return \"name\" in message && \"arguments\" in message;\n}\nfunction isToolCallsMessage(message) {\n  return \"tool_calls\" in message && message.tool_calls != null;\n}\nfunction extractContent() {\n  return pipe(\n    filter(\n      (response) => isContentMessage(response.choices[0].delta)\n    ),\n    // The type assertion is needed here because the type predicate above doesn't seem to propagate.\n    map(\n      (response) => response.choices[0].delta.content\n    )\n  );\n}\nfunction accumulateContent() {\n  return pipe(\n    extractContent(),\n    scan((acc, curr) => acc + curr, \"\")\n  );\n}\nasync function chatCompletions(request) {\n  const response = await getBackendSrv().post(\n    `/api/plugins/grafana-llm-app/resources/${LLM_CHAT_COMPLETIONS_PATH}`,\n    request,\n    {\n      headers: { \"Content-Type\": \"application/json\" }\n    }\n  );\n  return response;\n}\nfunction streamChatCompletions(request) {\n  const channel = {\n    scope: LiveChannelScope.Plugin,\n    namespace: LLM_PLUGIN_ID,\n    path: LLM_CHAT_COMPLETIONS_PATH + \"/\" + v4(),\n    data: request\n  };\n  const messages = getGrafanaLiveSrv().getStream(channel).pipe(filter((event) => isLiveChannelMessageEvent(event)));\n  return messages.pipe(\n    // Filter out messages that don't have the expected structure\n    filter((event) => {\n      if (!event.message.choices) {\n        return false;\n      }\n      return true;\n    }),\n    tap((event) => {\n      if (isErrorResponse(event.message)) {\n        throw new Error(event.message.error);\n      }\n    }),\n    // Stop the stream when we get a done message or when the finish_reason is \"stop\"\n    takeWhile((event) => {\n      if (isErrorResponse(event.message)) {\n        return true;\n      }\n      if (event.message.choices && event.message.choices[0].delta && \"done\" in event.message.choices[0].delta && event.message.choices[0].delta.done === true) {\n        return false;\n      }\n      if (event.message.choices && \"finish_reason\" in event.message.choices[0] && event.message.choices[0].finish_reason === \"stop\") {\n        return false;\n      }\n      return true;\n    }),\n    map((event) => event.message)\n  );\n}\nlet loggedWarning = false;\nconst health = async () => {\n  try {\n    const settings = await getBackendSrv().get(\n      `${LLM_PLUGIN_ROUTE}/settings`,\n      void 0,\n      void 0,\n      {\n        showSuccessAlert: false,\n        showErrorAlert: false\n      }\n    );\n    if (!settings.enabled) {\n      return {\n        configured: false,\n        ok: false,\n        error: \"The Grafana LLM plugin is not enabled.\"\n      };\n    }\n  } catch (e) {\n    logDebug(String(e));\n    logDebug(\n      \"Failed to check if LLM provider is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n    );\n    loggedWarning = true;\n    return {\n      configured: false,\n      ok: false,\n      error: \"The Grafana LLM plugin is not installed.\"\n    };\n  }\n  let response;\n  try {\n    response = await getBackendSrv().get(\n      `${LLM_PLUGIN_ROUTE}/health`,\n      void 0,\n      void 0,\n      {\n        showSuccessAlert: false,\n        showErrorAlert: false\n      }\n    );\n  } catch (e) {\n    if (!loggedWarning) {\n      logDebug(String(e));\n      logDebug(\n        \"Failed to check if LLM provider is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n      );\n      loggedWarning = true;\n    }\n    return {\n      configured: false,\n      ok: false,\n      error: \"The Grafana LLM plugin is not installed.\"\n    };\n  }\n  const { details } = response;\n  if (details?.version !== undefined) {\n    setLLMPluginVersion(details.version);\n  }\n  if (details?.llmProvider === undefined) {\n    return {\n      configured: false,\n      ok: false,\n      error: \"The Grafana LLM plugin is outdated; please update it.\"\n    };\n  }\n  return typeof details.llmProvider === \"boolean\" ? { configured: details.llmProvider, ok: details.llmProvider } : details.llmProvider;\n};\nconst enabled = async () => {\n  const healthDetails = await health();\n  return healthDetails.configured && healthDetails.ok;\n};\nvar StreamStatus = /* @__PURE__ */ ((StreamStatus2) => {\n  StreamStatus2[\"IDLE\"] = \"idle\";\n  StreamStatus2[\"GENERATING\"] = \"generating\";\n  StreamStatus2[\"COMPLETED\"] = \"completed\";\n  return StreamStatus2;\n})(StreamStatus || {});\nconst TIMEOUT = 1e4;\nfunction useLLMStream(model = \"large\" /* LARGE */, temperature = 1, notifyError = () => {\n}) {\n  const [messages, setMessages] = useState([]);\n  const [reply, setReply] = useState(\"\");\n  const [streamStatus, setStreamStatus] = useState(\n    \"idle\" /* IDLE */\n  );\n  const [error, setError] = useState();\n  const onError = useCallback(\n    (e) => {\n      setStreamStatus(\"idle\" /* IDLE */);\n      setMessages([]);\n      setError(e);\n      notifyError(\n        \"Failed to generate content using LLM provider\",\n        `Please try again or if the problem persists, contact your organization admin.`\n      );\n      console.error(e);\n    },\n    [notifyError]\n  );\n  const { error: enabledError, value: isEnabled } = useAsync(\n    async () => await enabled(),\n    [enabled]\n  );\n  const { error: asyncError, value } = useAsync(async () => {\n    if (!isEnabled || !messages.length) {\n      return { enabled: isEnabled };\n    }\n    setStreamStatus(\"generating\" /* GENERATING */);\n    setError(undefined);\n    const stream = streamChatCompletions({\n      model,\n      temperature,\n      messages\n    }).pipe(\n      // Accumulate the stream content into a stream of strings, where each\n      // element contains the accumulated message so far.\n      accumulateContent()\n      // The stream is just a regular Observable, so we can use standard rxjs\n      // functionality to update state, e.g. recording when the stream\n      // has completed.\n      // The operator decision tree on the rxjs website is a useful resource:\n      // https://rxjs.dev/operator-decision-tree.)\n    );\n    return {\n      enabled: isEnabled,\n      stream: stream.subscribe({\n        next: setReply,\n        error: onError,\n        complete: () => {\n          setStreamStatus(\"completed\" /* COMPLETED */);\n          setTimeout(() => {\n            setStreamStatus(\"idle\" /* IDLE */);\n          });\n          setMessages([]);\n          setError(undefined);\n        }\n      })\n    };\n  }, [messages, isEnabled]);\n  useEffect(() => {\n    return () => {\n      if (value?.stream) {\n        value.stream.unsubscribe();\n      }\n    };\n  }, [value]);\n  useEffect(() => {\n    let timeout;\n    if (streamStatus === \"generating\" /* GENERATING */ && reply === \"\") {\n      timeout = setTimeout(() => {\n        onError(new Error(`LLM stream timed out after ${TIMEOUT}ms`));\n      }, TIMEOUT);\n    }\n    return () => {\n      timeout && clearTimeout(timeout);\n    };\n  }, [streamStatus, reply, onError]);\n  if (asyncError || enabledError) {\n    setError(asyncError || enabledError);\n  }\n  return {\n    setMessages,\n    reply,\n    streamStatus,\n    error,\n    value\n  };\n}\nfunction accumulateToolCalls() {\n  return pipe(\n    filter(\n      (response) => isToolCallsMessage(response.choices[0].delta)\n    ),\n    // Collect all tool call chunks\n    toArray(),\n    // Process the array to reconstruct the complete tool call message\n    map((responses) => {\n      const toolCallChunks = responses.map(\n        (r) => r.choices[0].delta\n      );\n      return recoverToolCallMessage(toolCallChunks);\n    })\n  );\n}\nfunction recoverToolCallMessage(toolCallMessages) {\n  const recoveredToolCallMessage = {\n    role: \"assistant\",\n    tool_calls: []\n  };\n  for (const msg of toolCallMessages) {\n    for (const tc of msg.tool_calls) {\n      if (tc.index >= recoveredToolCallMessage.tool_calls.length) {\n        recoveredToolCallMessage.tool_calls.push({\n          ...tc,\n          function: { ...tc.function, arguments: tc.function.arguments ?? \"\" }\n        });\n      } else {\n        recoveredToolCallMessage.tool_calls[tc.index].function.arguments += tc.function.arguments ?? \"\";\n      }\n    }\n  }\n  for (const tc of recoveredToolCallMessage.tool_calls) {\n    if (!tc.function.arguments) {\n      tc.function.arguments = \"{}\";\n    }\n  }\n  return recoveredToolCallMessage;\n}\n\nexport { Model, StreamStatus, TIMEOUT, accumulateContent, accumulateToolCalls, chatCompletions, enabled, extractContent, health, isContentMessage, isDoneMessage, isErrorResponse, isFunctionCallMessage, isToolCallsMessage, recoverToolCallMessage, streamChatCompletions, useLLMStream };\n//# sourceMappingURL=llm.mjs.map\n","import { operate } from '../util/lift';\nimport { scanInternals } from './scanInternals';\nexport function scan(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, true));\n}\n//# sourceMappingURL=scan.js.map","import { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\nexport function tap(observerOrNext, error, complete) {\n    var tapObserver = isFunction(observerOrNext) || error || complete\n        ?\n            { next: observerOrNext, error: error, complete: complete }\n        : observerOrNext;\n    return tapObserver\n        ? operate(function (source, subscriber) {\n            var _a;\n            (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n            var isUnsub = true;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                var _a;\n                (_a = tapObserver.next) === null || _a === void 0 ? void 0 : _a.call(tapObserver, value);\n                subscriber.next(value);\n            }, function () {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.complete) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                subscriber.complete();\n            }, function (err) {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.error) === null || _a === void 0 ? void 0 : _a.call(tapObserver, err);\n                subscriber.error(err);\n            }, function () {\n                var _a, _b;\n                if (isUnsub) {\n                    (_a = tapObserver.unsubscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                }\n                (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n            }));\n        })\n        :\n            identity;\n}\n//# sourceMappingURL=tap.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function takeWhile(predicate, inclusive) {\n    if (inclusive === void 0) { inclusive = false; }\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var result = predicate(value, index++);\n            (result || inclusive) && subscriber.next(value);\n            !result && subscriber.complete();\n        }));\n    });\n}\n//# sourceMappingURL=takeWhile.js.map","import { scanInternals } from './scanInternals';\nimport { operate } from '../util/lift';\nexport function reduce(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, false, true));\n}\n//# sourceMappingURL=reduce.js.map","import React from 'react';\n\nimport { Badge, Button, Divider, Field, FieldSet, Input, Label, Select } from '@grafana/ui';\nimport { openai } from '@grafana/llm';\n\nimport { ProviderType } from './AppConfig';\n\nexport type ModelMapping = Partial<Record<openai.Model, string>>;\n\nexport interface ModelSettings {\n  default?: openai.Model;\n  mapping: ModelMapping;\n}\n\nexport interface ModelMappingConfig {\n  id: openai.Model;\n  name: string;\n  label: string;\n  description: string;\n}\nconst DEFAULT_MODEL_ID = openai.Model.BASE;\nfunction defaultModelMappingConfig(provider: ProviderType): ModelMappingConfig[] {\n  return provider === 'anthropic'\n    ? [\n        {\n          id: openai.Model.BASE,\n          name: 'claude-4-sonnet-20250514',\n          label: 'Base',\n          description: 'An effective, balanced model, suitable for most tasks.',\n        },\n        {\n          id: openai.Model.LARGE,\n          name: 'claude-4-sonnet-20250514',\n          label: 'Large',\n          description: 'An effective, balanced model, suitable for most tasks.',\n        },\n      ]\n    : [\n        {\n          id: openai.Model.BASE,\n          name: 'gpt-4.1-mini',\n          label: 'Base',\n          description: 'A fast and cost-effective model for efficient, high-throughput tasks.',\n        },\n        {\n          id: openai.Model.LARGE,\n          name: 'gpt-4.1',\n          label: 'Large',\n          description: 'A larger, higher cost model for more advanced tasks with longer context windows.',\n        },\n      ];\n}\n\nconst initModelSettings = (\n  provider: ProviderType,\n  settings: ModelSettings,\n  defaultModelMapping: ModelMappingConfig[]\n): ModelSettings => {\n  return {\n    default: settings.default ?? DEFAULT_MODEL_ID,\n    // If the settings are empty, set the default models\n    // If the settings are not empty, filter out any models that are not in the default list\n    mapping: settings.mapping\n      ? (Object.fromEntries(\n          Object.entries(settings.mapping).filter(([m, _]) => defaultModelMapping.find((d) => d.id === m))\n        ) as ModelMapping)\n      : (Object.fromEntries(defaultModelMapping.map((entry) => [entry.id, entry.name])) as ModelMapping),\n  };\n};\n\nexport function ModelConfig({\n  provider,\n  settings,\n  onChange,\n}: {\n  provider: ProviderType;\n  settings: ModelSettings;\n  onChange: (settings: ModelSettings) => void;\n}) {\n  const defaultModelMapping = defaultModelMappingConfig(provider);\n  settings = initModelSettings(provider, settings, defaultModelMapping);\n  const setDefault = (model: openai.Model) => onChange({ ...settings, default: model });\n\n  return (\n    <FieldSet>\n      {/*\n        Only show custom model mappings for non-Azure providers.\n        When using the Azure provider users can just customise the deployments\n        instead.\n      */}\n      {provider === 'azure' && (\n        <Field\n          label=\"Default Model\"\n          description=\"The default model is used when no model is specified in the chat request.\"\n        >\n          <Select\n            options={defaultModelMapping.map((entry) => ({ label: entry.label, value: entry.id }))}\n            width={60}\n            value={settings.default ?? DEFAULT_MODEL_ID}\n            onChange={(e) => setDefault(e.value ?? (DEFAULT_MODEL_ID as openai.Model))}\n          />\n        </Field>\n      )}\n      {provider !== 'azure' && (\n        <>\n          <Label description=\"Map custom models used for LLM features. The default model is used when no model is specified in the chat request.\">\n            Model mappings\n          </Label>\n          {defaultModelMapping.map((entry, i) => {\n            const modelSetting = settings.mapping[entry.id];\n            const isDefault = settings.default === entry.id;\n            const FieldLabel = (\n              <>\n                <Label>\n                  {entry.label}\n                  <Divider direction=\"vertical\" spacing={1} />\n                  {isDefault ? (\n                    <div style={{ margin: '1px auto' }}>\n                      <Badge text=\"Default\" color=\"blue\" />\n                    </div>\n                  ) : (\n                    <Button variant=\"secondary\" size=\"sm\" onClick={() => setDefault(entry.id)}>\n                      Set as default\n                    </Button>\n                  )}\n                </Label>\n              </>\n            );\n\n            return (\n              <Field key={i} label={FieldLabel} description={entry.description}>\n                <Input\n                  width={60}\n                  type=\"text\"\n                  name=\"model\"\n                  value={modelSetting}\n                  placeholder={entry.name}\n                  onChange={(e) => {\n                    const newModelName = e.currentTarget.value;\n                    const newMapping = {\n                      ...settings.mapping,\n                      [entry.id]: newModelName || undefined,\n                    };\n                    onChange({ ...settings, mapping: newMapping });\n                  }}\n                />\n              </Field>\n            );\n          })}\n        </>\n      )}\n    </FieldSet>\n  );\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Button, Spinner, Stack, TextArea } from '@grafana/ui';\nimport { useAsync } from 'react-use';\nimport { finalize, lastValueFrom, partition, startWith } from 'rxjs';\nimport { llm, mcp } from '@grafana/llm';\nimport { CallToolResultSchema } from '@modelcontextprotocol/sdk/types';\nimport { RenderedToolCall } from './types';\n\ninterface ChatMessage {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\ninterface DevSandboxChatProps {\n  useStream: boolean;\n  toolCalls: Map<string, RenderedToolCall>;\n  setToolCalls: (calls: Map<string, RenderedToolCall>) => void;\n}\n\n// Helper function to handle tool calls\nasync function handleToolCall(\n  fc: { function: { name: string; arguments: string }; id: string },\n  client: any,\n  toolCalls: Map<string, RenderedToolCall>,\n  setToolCalls: (calls: Map<string, RenderedToolCall>) => void,\n  messages: llm.Message[]\n) {\n  const { function: f, id } = fc;\n  console.log('f', f);\n\n  setToolCalls(new Map(toolCalls.set(id, { name: f.name, arguments: f.arguments, running: true })));\n\n  const args = JSON.parse(f.arguments);\n\n  try {\n    const response = await client.callTool({ name: f.name, arguments: args });\n    const toolResult = CallToolResultSchema.parse(response);\n    const textContent = toolResult.content\n      .filter((c) => c.type === 'text')\n      .map((c) => c.text)\n      .join('');\n    messages.push({ role: 'tool', tool_call_id: id, content: textContent });\n    setToolCalls(new Map(toolCalls.set(id, { name: f.name, arguments: f.arguments, running: false, response })));\n  } catch (e: any) {\n    const error = e.message ?? e.toString();\n    messages.push({ role: 'tool', tool_call_id: id, content: error });\n    setToolCalls(new Map(toolCalls.set(id, { name: f.name, arguments: f.arguments, running: false, error })));\n  }\n}\n\nexport function DevSandboxChat({ useStream, toolCalls, setToolCalls }: DevSandboxChatProps) {\n  const { client } = mcp.useMCPClient();\n\n  // Chat state\n  const [chatHistory, setChatHistory] = useState<ChatMessage[]>([]);\n  const [currentInput, setCurrentInput] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // Ref for auto-scrolling\n  const chatContainerRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom when new messages are added\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatHistory]);\n\n  // Get available tools\n  const {\n    loading: toolsLoading,\n    error: toolsError,\n    value: toolsData,\n  } = useAsync(async () => {\n    const enabled = await llm.enabled();\n    if (!enabled) {\n      return { enabled: false, tools: [] };\n    }\n    const { tools } = (await client?.listTools()) ?? { tools: [] };\n    return { enabled: true, tools };\n  }, [client]);\n\n  const handleStreamingChatWithHistory = async (messages: llm.Message[], tools: any[]) => {\n    let stream = llm.streamChatCompletions({\n      model: llm.Model.LARGE,\n      messages,\n      tools: mcp.convertToolsToOpenAI(tools),\n    });\n\n    let [toolCallsStream, otherMessages] = partition(\n      stream,\n      (chunk: llm.ChatCompletionsResponse<llm.ChatCompletionsChunk>) => llm.isToolCallsMessage(chunk.choices[0].delta)\n    );\n\n    let contentMessages = otherMessages.pipe(\n      llm.accumulateContent(),\n      finalize(() => {\n        console.log('stream finalized');\n      })\n    );\n\n    // Subscribe to content updates\n    contentMessages.subscribe((content) => {\n      setChatHistory((prev) =>\n        prev.map((msg, idx) => (idx === prev.length - 1 && msg.role === 'assistant' ? { ...msg, content } : msg))\n      );\n    });\n\n    let toolCallMessages = await lastValueFrom(toolCallsStream.pipe(llm.accumulateToolCalls()));\n\n    while (toolCallMessages.tool_calls.length > 0) {\n      messages.push(toolCallMessages);\n\n      const tcs = toolCallMessages.tool_calls.filter((tc) => tc.type === 'function');\n      await Promise.all(tcs.map((fc) => handleToolCall(fc, client, toolCalls, setToolCalls, messages)));\n\n      stream = llm.streamChatCompletions({\n        model: llm.Model.LARGE,\n        messages,\n        tools: mcp.convertToolsToOpenAI(tools),\n      });\n\n      [toolCallsStream, otherMessages] = partition(\n        stream,\n        (chunk: llm.ChatCompletionsResponse<llm.ChatCompletionsChunk>) => llm.isToolCallsMessage(chunk.choices[0].delta)\n      );\n\n      const firstMessage: Partial<llm.ChatCompletionsResponse<llm.ChatCompletionsChunk>> = {\n        choices: [{ delta: { role: 'assistant', content: '' } }],\n      };\n\n      contentMessages = otherMessages.pipe(\n        //@ts-expect-error\n        startWith(firstMessage),\n        llm.accumulateContent(),\n        finalize(() => {\n          console.log('stream finalized');\n        })\n      );\n\n      contentMessages.subscribe((content) => {\n        setChatHistory((prev) =>\n          prev.map((msg, idx) => (idx === prev.length - 1 && msg.role === 'assistant' ? { ...msg, content } : msg))\n        );\n      });\n\n      toolCallMessages = await lastValueFrom(toolCallsStream.pipe(llm.accumulateToolCalls()));\n    }\n  };\n\n  const handleNonStreamingChatWithHistory = async (messages: llm.Message[], tools: any[]) => {\n    let response = await llm.chatCompletions({\n      model: llm.Model.BASE,\n      messages,\n      tools: mcp.convertToolsToOpenAI(tools),\n    });\n\n    let functionCalls = response.choices[0].message.tool_calls?.filter((tc) => tc.type === 'function') ?? [];\n\n    while (functionCalls.length > 0) {\n      messages.push(response.choices[0].message);\n      await Promise.all(functionCalls.map((fc) => handleToolCall(fc, client, toolCalls, setToolCalls, messages)));\n\n      response = await llm.chatCompletions({\n        model: llm.Model.LARGE,\n        messages,\n        tools: mcp.convertToolsToOpenAI(tools),\n      });\n      functionCalls = response.choices[0].message.tool_calls?.filter((tc) => tc.type === 'function') ?? [];\n    }\n\n    // Update the assistant message in history\n    setChatHistory((prev) =>\n      prev.map((msg, idx) =>\n        idx === prev.length - 1 && msg.role === 'assistant'\n          ? { ...msg, content: response.choices[0].message.content || '' }\n          : msg\n      )\n    );\n  };\n\n  const sendMessage = async () => {\n    if (!currentInput.trim() || isGenerating || !toolsData?.enabled) {\n      return;\n    }\n\n    const userMessage: ChatMessage = {\n      role: 'user',\n      content: currentInput.trim(),\n      timestamp: new Date(),\n    };\n\n    // Add user message to history\n    setChatHistory((prev) => [...prev, userMessage]);\n    setCurrentInput('');\n    setIsGenerating(true);\n    setToolCalls(new Map());\n\n    // Create assistant message placeholder\n    const assistantMessage: ChatMessage = {\n      role: 'assistant',\n      content: '',\n      timestamp: new Date(),\n    };\n\n    setChatHistory((prev) => [...prev, assistantMessage]);\n\n    const messages: llm.Message[] = [\n      {\n        role: 'system',\n        content:\n          'You are a helpful assistant with deep knowledge of the Grafana, Prometheus and general observability ecosystem.',\n      },\n      ...chatHistory.map((msg) => ({ role: msg.role, content: msg.content })),\n      { role: 'user', content: userMessage.content },\n    ];\n\n    try {\n      if (useStream) {\n        await handleStreamingChatWithHistory(messages, toolsData.tools);\n      } else {\n        await handleNonStreamingChatWithHistory(messages, toolsData.tools);\n      }\n    } catch (error) {\n      console.error('Error in chat completion:', error);\n      // Update the assistant message with error\n      setChatHistory((prev) =>\n        prev.map((msg, idx) =>\n          idx === prev.length - 1 && msg.role === 'assistant'\n            ? { ...msg, content: `Error: ${error instanceof Error ? error.message : 'Unknown error'}` }\n            : msg\n        )\n      );\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  if (toolsError) {\n    return <div>Error: {toolsError.message}</div>;\n  }\n\n  if (!toolsData?.enabled) {\n    return <div>LLM plugin not enabled.</div>;\n  }\n\n  return (\n    <Stack direction=\"column\" gap={3}>\n      {/* Chat history */}\n      <div\n        ref={chatContainerRef}\n        style={{\n          height: '400px',\n          overflowY: 'auto',\n          border: '1px solid var(--border-color)',\n          borderRadius: '8px',\n          padding: '16px',\n          backgroundColor: 'var(--background-color-secondary)',\n        }}\n      >\n        {chatHistory.length === 0 ? (\n          <div style={{ color: 'var(--text-color-secondary)', fontStyle: 'italic' }}>\n            Start a conversation by typing a message below...\n          </div>\n        ) : (\n          <Stack direction=\"column\" gap={1}>\n            {chatHistory.map((message, index) => (\n              <div\n                key={index}\n                style={{\n                  display: 'flex',\n                  flexDirection: 'row',\n                  marginBottom: '12px',\n                  width: '100%',\n                }}\n              >\n                <div\n                  style={{\n                    maxWidth: '90%',\n                    padding: '10px 14px',\n                    borderRadius: '12px',\n                    backgroundColor: message.role === 'user' ? '#007acc' : 'var(--background-color-primary)',\n                    color: message.role === 'user' ? 'white' : 'var(--text-color-primary)',\n                    whiteSpace: 'pre-wrap',\n                    wordBreak: 'break-word',\n                    boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)',\n                    border: message.role === 'assistant' ? '1px solid var(--border-color)' : 'none',\n                    fontSize: '14px',\n                    lineHeight: '1.4',\n                  }}\n                >\n                  {message.content ||\n                    (message.role === 'assistant' && isGenerating && index === chatHistory.length - 1 ? (\n                      <span style={{ opacity: 0.7 }}>...</span>\n                    ) : (\n                      ''\n                    ))}\n                </div>\n              </div>\n            ))}\n          </Stack>\n        )}\n      </div>\n\n      {/* Input area */}\n      <Stack direction=\"row\" gap={2}>\n        <TextArea\n          value={currentInput}\n          onChange={(e) => setCurrentInput(e.currentTarget.value)}\n          onKeyDown={handleKeyPress}\n          placeholder=\"Type your message... (Enter to send, Shift+Enter for new line)\"\n          disabled={isGenerating}\n          style={{ flex: 1 }}\n          rows={3}\n        />\n        <Button onClick={sendMessage} disabled={!currentInput.trim() || isGenerating || toolsLoading} variant=\"primary\">\n          {isGenerating ? <Spinner size=\"sm\" /> : 'Send'}\n        </Button>\n      </Stack>\n    </Stack>\n  );\n}\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { Button, Field, Input, TextArea, Switch, Select } from '@grafana/ui';\n\ninterface ToolParameterFormProps {\n  schema: any; // JSON Schema object\n  onParametersChange: (parameters: Record<string, any>) => void;\n  onSubmit: () => void;\n  isLoading?: boolean;\n}\n\ninterface FormField {\n  name: string;\n  type: string;\n  required: boolean;\n  description?: string;\n  example?: any;\n  enum?: string[];\n  default?: any;\n}\n\n/**\n * Parses a JSON schema and extracts form field definitions\n */\nfunction parseSchema(schema: any): FormField[] {\n  if (!schema?.properties) {\n    return [];\n  }\n\n  const required = schema.required || [];\n  return Object.entries(schema.properties).map(([name, prop]: [string, any]) => ({\n    name,\n    type: prop.type || 'string',\n    required: required.includes(name),\n    description: prop.description,\n    example: prop.example,\n    enum: prop.enum,\n    default: prop.default,\n  }));\n}\n\nconst FormFieldComponent = React.memo(\n  ({ field, value, onChange }: { field: FormField; value: any; onChange: (value: any) => void }) => {\n    const handleChange = (newValue: any) => {\n      onChange(newValue);\n    };\n\n    const fieldProps = {\n      label: field.name,\n      description: field.description,\n      required: field.required,\n    };\n\n    // Handle enum/select fields\n    if (field.enum && field.enum.length > 0) {\n      const options = field.enum.map((option) => ({ label: option, value: option }));\n      return (\n        <Field {...fieldProps}>\n          <Select\n            options={options}\n            value={value}\n            onChange={(option) => handleChange(option?.value)}\n            placeholder={field.example ? `e.g., ${field.example}` : `Select ${field.name}...`}\n            isClearable={!field.required}\n          />\n        </Field>\n      );\n    }\n\n    // Handle different field types\n    switch (field.type) {\n      case 'boolean':\n        return (\n          <Field {...fieldProps}>\n            <Switch value={Boolean(value)} onChange={(e) => handleChange(e.currentTarget.checked)} />\n          </Field>\n        );\n\n      case 'number':\n      case 'integer':\n        return (\n          <Field {...fieldProps}>\n            <Input\n              type=\"number\"\n              value={value || ''}\n              onChange={(e) => {\n                const numValue =\n                  field.type === 'integer' ? parseInt(e.currentTarget.value, 10) : parseFloat(e.currentTarget.value);\n                handleChange(isNaN(numValue) ? undefined : numValue);\n              }}\n              placeholder={field.example ? `e.g., ${field.example}` : undefined}\n            />\n          </Field>\n        );\n\n      case 'array':\n        return (\n          <Field {...fieldProps} description={`${field.description || ''} (Enter one item per line)`}>\n            <TextArea\n              value={Array.isArray(value) ? value.join('\\n') : ''}\n              onChange={(e) => {\n                const lines = e.currentTarget.value.split('\\n').filter((line) => line.trim());\n                handleChange(lines.length > 0 ? lines : undefined);\n              }}\n              placeholder={\n                field.example\n                  ? `e.g.,\\n${Array.isArray(field.example) ? field.example.join('\\n') : field.example}`\n                  : 'Enter items, one per line'\n              }\n              rows={3}\n            />\n          </Field>\n        );\n\n      case 'object':\n        return (\n          <Field {...fieldProps} description={`${field.description || ''} (Enter valid JSON)`}>\n            <TextArea\n              value={typeof value === 'object' ? JSON.stringify(value, null, 2) : value || ''}\n              onChange={(e) => {\n                try {\n                  const parsed = JSON.parse(e.currentTarget.value);\n                  handleChange(parsed);\n                } catch {\n                  // Keep the raw value if it's not valid JSON yet\n                  handleChange(e.currentTarget.value);\n                }\n              }}\n              placeholder={\n                field.example ? `e.g.,\\n${JSON.stringify(field.example, null, 2)}` : '{\\n  \"key\": \"value\"\\n}'\n              }\n              rows={4}\n            />\n          </Field>\n        );\n\n      case 'string':\n      default:\n        // For long descriptions or if it looks like it might be multi-line, use TextArea\n        const isLongField =\n          (field.description && field.description.length > 100) ||\n          field.name.toLowerCase().includes('description') ||\n          field.name.toLowerCase().includes('query') ||\n          field.name.toLowerCase().includes('message');\n\n        if (isLongField) {\n          return (\n            <Field {...fieldProps}>\n              <TextArea\n                value={value || ''}\n                onChange={(e) => handleChange(e.currentTarget.value || undefined)}\n                placeholder={field.example ? `e.g., ${field.example}` : undefined}\n                rows={3}\n              />\n            </Field>\n          );\n        }\n\n        return (\n          <Field {...fieldProps}>\n            <Input\n              value={value || ''}\n              onChange={(e) => handleChange(e.currentTarget.value || undefined)}\n              placeholder={field.example ? `e.g., ${field.example}` : undefined}\n            />\n          </Field>\n        );\n    }\n  }\n);\n\nFormFieldComponent.displayName = 'FormFieldComponent';\n\n/**\n * A dynamic form component that generates input fields based on a JSON schema.\n * Provides a user-friendly interface for entering tool parameters.\n */\nexport function ToolParameterForm({ schema, onParametersChange, onSubmit, isLoading }: ToolParameterFormProps) {\n  const [formData, setFormData] = useState<Record<string, any>>({});\n\n  // Memoize fields to prevent recreation on every render\n  const fields = useMemo(() => parseSchema(schema), [schema]);\n\n  // Initialize form data with defaults\n  useEffect(() => {\n    const initialData: Record<string, any> = {};\n    fields.forEach((field) => {\n      if (field.default !== undefined) {\n        initialData[field.name] = field.default;\n      }\n    });\n    setFormData(initialData);\n  }, [fields]);\n\n  // Update parent when form data changes - use a callback to avoid dependency issues\n  useEffect(() => {\n    // Only include fields that have values\n    const cleanedData = Object.entries(formData).reduce(\n      (acc, [key, value]) => {\n        if (value !== undefined && value !== '' && value !== null) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {} as Record<string, any>\n    );\n\n    // Use a timeout to debounce updates to parent\n    const timeoutId = setTimeout(() => {\n      onParametersChange(cleanedData);\n    }, 100);\n\n    return () => clearTimeout(timeoutId);\n  }, [formData, onParametersChange]);\n\n  const handleFieldChange = useCallback((fieldName: string, value: any) => {\n    setFormData((prev) => ({\n      ...prev,\n      [fieldName]: value,\n    }));\n  }, []);\n\n  const isFormValid = () => {\n    return fields.every((field) => {\n      if (!field.required) {\n        return true;\n      }\n      const value = formData[field.name];\n      return value !== undefined && value !== '' && value !== null;\n    });\n  };\n\n  if (fields.length === 0) {\n    return (\n      <div style={{ padding: '16px', textAlign: 'center' }}>\n        <p style={{ color: 'var(--text-color-secondary)', marginBottom: '16px' }}>This tool requires no parameters.</p>\n        <Button variant=\"primary\" onClick={onSubmit} disabled={isLoading}>\n          {isLoading ? 'Running...' : 'Run Tool'}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ padding: '16px' }}>\n      <div style={{ marginBottom: '20px' }}>\n        {fields.map((field) => (\n          <div key={field.name} style={{ marginBottom: '16px' }}>\n            <FormFieldComponent\n              field={field}\n              value={formData[field.name]}\n              onChange={(value) => handleFieldChange(field.name, value)}\n            />\n          </div>\n        ))}\n      </div>\n\n      <Button variant=\"primary\" onClick={onSubmit} disabled={isLoading || !isFormValid()} style={{ width: '100%' }}>\n        {isLoading ? 'Running...' : 'Run Tool'}\n      </Button>\n\n      {!isFormValid() && (\n        <div\n          style={{\n            marginTop: '8px',\n            fontSize: '12px',\n            color: 'var(--error-color)',\n            textAlign: 'center',\n          }}\n        >\n          Please fill in all required fields\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useCallback } from 'react';\nimport { Button, Spinner, Icon, TextArea, CollapsableSection, Tab, TabsBar } from '@grafana/ui';\nimport { Tool } from '@modelcontextprotocol/sdk/types';\nimport { mcp } from '@grafana/llm';\nimport { ToolParameterForm } from './ToolParameterForm';\n\n// Tool category mapping\nconst TOOL_CATEGORIES: Record<string, string> = {\n  // Admin\n  list_teams: 'Admin',\n  list_users_by_org: 'Admin',\n  // Search\n  search_dashboards: 'Search',\n  // Dashboard\n  get_dashboard_by_uid: 'Dashboard',\n  update_dashboard: 'Dashboard',\n  get_dashboard_panel_queries: 'Dashboard',\n  // Datasources\n  list_datasources: 'Datasources',\n  get_datasource_by_uid: 'Datasources',\n  get_datasource_by_name: 'Datasources',\n  // Prometheus\n  query_prometheus: 'Prometheus',\n  list_prometheus_metric_metadata: 'Prometheus',\n  list_prometheus_metric_names: 'Prometheus',\n  list_prometheus_label_names: 'Prometheus',\n  list_prometheus_label_values: 'Prometheus',\n  // Incident\n  list_incidents: 'Incident',\n  create_incident: 'Incident',\n  add_activity_to_incident: 'Incident',\n  get_incident: 'Incident',\n  // Loki\n  query_loki_logs: 'Loki',\n  list_loki_label_names: 'Loki',\n  list_loki_label_values: 'Loki',\n  query_loki_stats: 'Loki',\n  // Alerting\n  list_alert_rules: 'Alerting',\n  get_alert_rule_by_uid: 'Alerting',\n  list_contact_points: 'Alerting',\n  // OnCall\n  list_oncall_schedules: 'OnCall',\n  get_oncall_shift: 'OnCall',\n  get_current_oncall_users: 'OnCall',\n  list_oncall_teams: 'OnCall',\n  list_oncall_users: 'OnCall',\n  // Sift\n  get_sift_investigation: 'Sift',\n  get_sift_analysis: 'Sift',\n  list_sift_investigations: 'Sift',\n  find_error_pattern_logs: 'Sift',\n  find_slow_requests: 'Sift',\n  // Pyroscope\n  list_pyroscope_label_names: 'Pyroscope',\n  list_pyroscope_label_values: 'Pyroscope',\n  list_pyroscope_profile_types: 'Pyroscope',\n  fetch_pyroscope_profile: 'Pyroscope',\n  // Asserts\n  get_assertions: 'Asserts',\n};\n\ninterface ToolInspectorProps {\n  tool: Tool;\n}\n\ninterface ToolCallResult {\n  loading: boolean;\n  success?: boolean;\n  response?: any;\n  error?: string;\n}\n\nconst ToolInspector = React.memo(({ tool }: ToolInspectorProps) => {\n  const { client } = mcp.useMCPClient();\n  const [expanded, setExpanded] = useState(false);\n  const [parametersInput, setParametersInput] = useState('{}');\n  const [formParameters, setFormParameters] = useState<any>({});\n  const [inputMode, setInputMode] = useState<'form' | 'json'>('form');\n  const [callResult, setCallResult] = useState<ToolCallResult | null>(null);\n\n  // Memoize the callback to prevent unnecessary re-renders\n  const handleFormParametersChange = useCallback((parameters: any) => {\n    setFormParameters(parameters);\n  }, []);\n\n  const handleTestTool = useCallback(async () => {\n    if (!client) {\n      return;\n    }\n\n    setCallResult({ loading: true });\n\n    try {\n      // Use parameters from form or JSON based on current mode\n      let parameters = {};\n\n      if (inputMode === 'form') {\n        parameters = formParameters;\n      } else {\n        if (parametersInput.trim()) {\n          try {\n            parameters = JSON.parse(parametersInput);\n          } catch (e) {\n            setCallResult({\n              loading: false,\n              success: false,\n              error: `Invalid JSON parameters: ${e instanceof Error ? e.message : 'Unknown error'}`,\n            });\n            return;\n          }\n        }\n      }\n\n      // Call the tool\n      const response = await client.callTool({\n        name: tool.name,\n        arguments: parameters,\n      });\n\n      setCallResult({\n        loading: false,\n        success: true,\n        response,\n      });\n    } catch (error) {\n      setCallResult({\n        loading: false,\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      });\n    }\n  }, [client, inputMode, formParameters, parametersInput, tool.name]);\n\n  const formatSchema = (schema: any) => {\n    if (!schema) {\n      return 'No schema available';\n    }\n\n    try {\n      return JSON.stringify(schema, null, 2);\n    } catch {\n      return String(schema);\n    }\n  };\n\n  const generateExampleParameters = useCallback(() => {\n    if (!tool.inputSchema?.properties) {\n      return '{}';\n    }\n\n    const example: any = {};\n    const properties = tool.inputSchema.properties;\n\n    Object.keys(properties).forEach((key) => {\n      const prop = properties[key] as any;\n      if (prop && typeof prop === 'object') {\n        if (prop.type === 'string') {\n          example[key] = prop.example || 'example_value';\n        } else if (prop.type === 'number') {\n          example[key] = prop.example || 42;\n        } else if (prop.type === 'boolean') {\n          example[key] = prop.example || true;\n        } else if (prop.type === 'array') {\n          example[key] = prop.example || [];\n        } else if (prop.type === 'object') {\n          example[key] = prop.example || {};\n        } else {\n          example[key] = prop.example || null;\n        }\n      }\n    });\n\n    return JSON.stringify(example, null, 2);\n  }, [tool.inputSchema]);\n\n  const fillExampleParameters = useCallback(() => {\n    setParametersInput(generateExampleParameters());\n  }, [generateExampleParameters]);\n\n  return (\n    <div\n      style={{\n        border: '1px solid var(--border-color)',\n        borderRadius: '8px',\n        marginBottom: '12px',\n        backgroundColor: 'var(--background-color-primary)',\n      }}\n    >\n      {/* Tool Header */}\n      <div\n        style={{\n          padding: '12px 16px',\n          borderBottom: expanded ? '1px solid var(--border-color)' : 'none',\n          cursor: 'pointer',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n        onClick={() => setExpanded(!expanded)}\n      >\n        <div style={{ flex: 1 }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n            <code\n              style={{\n                fontWeight: 500,\n                fontSize: '15px',\n                backgroundColor: 'var(--background-color-secondary)',\n                padding: '2px 6px',\n                borderRadius: '3px',\n                border: '1px solid var(--border-color)',\n              }}\n            >\n              {tool.name}\n            </code>\n            {tool.annotations?.title && tool.annotations.title !== tool.name && (\n              <span style={{ fontSize: '14px', color: 'var(--text-color-secondary)' }}>({tool.annotations.title})</span>\n            )}\n          </div>\n          {tool.description && (\n            <div\n              style={{\n                fontSize: '13px',\n                color: 'var(--text-color-secondary)',\n                lineHeight: '1.4',\n                marginBottom: '4px',\n              }}\n            >\n              {tool.description}\n            </div>\n          )}\n          {/* Additional metadata */}\n          <div style={{ display: 'flex', gap: '12px', fontSize: '12px', color: 'var(--text-color-secondary)' }}>\n            {(() => {\n              const properties = tool.inputSchema?.properties;\n              const paramCount =\n                properties && typeof properties === 'object' && properties !== null\n                  ? Object.keys(properties).length\n                  : 0;\n              return paramCount > 0 ? <span>Parameters: {paramCount}</span> : null;\n            })()}\n            {(() => {\n              const required = tool.inputSchema?.required;\n              const requiredCount = Array.isArray(required) ? required.length : 0;\n              return requiredCount > 0 ? <span>Required: {requiredCount}</span> : null;\n            })()}\n          </div>\n        </div>\n        <Icon name={expanded ? 'angle-up' : 'angle-down'} />\n      </div>\n\n      {/* Expanded Content */}\n      {expanded && (\n        <div style={{ padding: '16px' }}>\n          {/* Tool Schema */}\n          <div style={{ marginBottom: '20px' }}>\n            <h4 style={{ margin: '0 0 8px 0', fontSize: '14px' }}>Input Schema</h4>\n            <pre\n              style={{\n                backgroundColor: 'var(--background-color-secondary)',\n                padding: '12px',\n                borderRadius: '4px',\n                fontSize: '12px',\n                lineHeight: '1.4',\n                overflow: 'auto',\n                maxHeight: '200px',\n                border: '1px solid var(--border-color)',\n              }}\n            >\n              {formatSchema(tool.inputSchema)}\n            </pre>\n          </div>\n\n          {/* Parameter Input */}\n          <div style={{ marginBottom: '16px' }}>\n            <div style={{ marginBottom: '12px' }}>\n              <h4 style={{ margin: '0 0 8px 0', fontSize: '14px' }}>Test Parameters</h4>\n              <TabsBar>\n                <Tab label=\"Form\" active={inputMode === 'form'} onChangeTab={() => setInputMode('form')} />\n                <Tab label=\"JSON\" active={inputMode === 'json'} onChangeTab={() => setInputMode('json')} />\n              </TabsBar>\n            </div>\n\n            {inputMode === 'form' ? (\n              <ToolParameterForm\n                schema={tool.inputSchema}\n                onParametersChange={handleFormParametersChange}\n                onSubmit={handleTestTool}\n                isLoading={callResult?.loading}\n              />\n            ) : (\n              <div>\n                <div\n                  style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    marginBottom: '8px',\n                  }}\n                >\n                  <span style={{ fontSize: '12px', color: 'var(--text-color-secondary)' }}>JSON Mode</span>\n                  <Button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    onClick={fillExampleParameters}\n                    disabled={!tool.inputSchema?.properties}\n                  >\n                    Fill Example\n                  </Button>\n                </div>\n                <TextArea\n                  value={parametersInput}\n                  onChange={(e) => setParametersInput(e.currentTarget.value)}\n                  placeholder=\"Enter JSON parameters for testing...\"\n                  rows={4}\n                  style={{ fontFamily: 'monospace', fontSize: '12px' }}\n                />\n                <div style={{ marginTop: '12px' }}>\n                  <Button\n                    variant=\"primary\"\n                    size=\"sm\"\n                    onClick={handleTestTool}\n                    disabled={callResult?.loading || !client}\n                  >\n                    {callResult?.loading ? <Spinner size=\"sm\" /> : 'Test Tool'}\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Call Result */}\n          {callResult && !callResult.loading && (\n            <div style={{ marginTop: '16px' }}>\n              <h4 style={{ margin: '0 0 8px 0', fontSize: '14px' }}>\n                Result{' '}\n                {callResult.success ? (\n                  <Icon name=\"check\" style={{ color: 'var(--success-color)', marginLeft: '8px' }} />\n                ) : (\n                  <Icon name=\"exclamation-triangle\" style={{ color: 'var(--error-color)', marginLeft: '8px' }} />\n                )}\n              </h4>\n\n              {callResult.error ? (\n                <div\n                  style={{\n                    backgroundColor: 'var(--error-background)',\n                    color: 'var(--error-text-color)',\n                    padding: '12px',\n                    borderRadius: '4px',\n                    fontSize: '13px',\n                  }}\n                >\n                  {callResult.error}\n                </div>\n              ) : (\n                <pre\n                  style={{\n                    backgroundColor: 'var(--background-color-secondary)',\n                    padding: '12px',\n                    borderRadius: '4px',\n                    fontSize: '12px',\n                    lineHeight: '1.4',\n                    overflow: 'auto',\n                    maxHeight: '300px',\n                    border: '1px solid var(--border-color)',\n                  }}\n                >\n                  {JSON.stringify(callResult.response, null, 2)}\n                </pre>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n});\n\nToolInspector.displayName = 'ToolInspector';\n\ninterface DevSandboxToolInspectorProps {\n  tools: Tool[];\n}\n\nexport function DevSandboxToolInspector({ tools }: DevSandboxToolInspectorProps) {\n  const [searchFilter, setSearchFilter] = useState('');\n\n  // Memoize filtered tools to prevent recalculation on every render\n  const filteredTools = React.useMemo(() => {\n    const searchLower = searchFilter.toLowerCase();\n    return tools.filter((tool) => {\n      const name = tool.name.toLowerCase();\n      const title = (tool.annotations?.title ?? '').toLowerCase();\n      const description = (tool.description || '').toLowerCase();\n      return name.includes(searchLower) || title.includes(searchLower) || description.includes(searchLower);\n    });\n  }, [tools, searchFilter]);\n\n  // Memoize grouped tools\n  const { groupedTools, sortedCategories } = React.useMemo(() => {\n    const grouped = filteredTools.reduce(\n      (groups, tool) => {\n        const category = TOOL_CATEGORIES[tool.name] || 'Ungrouped';\n        if (!groups[category]) {\n          groups[category] = [];\n        }\n        groups[category].push(tool);\n        return groups;\n      },\n      {} as Record<string, Tool[]>\n    );\n\n    // Sort categories with Ungrouped at the end\n    const sorted = Object.keys(grouped).sort((a, b) => {\n      if (a === 'Ungrouped') {\n        return 1;\n      }\n      if (b === 'Ungrouped') {\n        return -1;\n      }\n      return a.localeCompare(b);\n    });\n\n    return { groupedTools: grouped, sortedCategories: sorted };\n  }, [filteredTools]);\n\n  if (tools.length === 0) {\n    return (\n      <div\n        style={{\n          color: 'var(--text-color-secondary)',\n          fontStyle: 'italic',\n          textAlign: 'center',\n          padding: '24px',\n        }}\n      >\n        No MCP tools available\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Search Filter */}\n      <div style={{ marginBottom: '16px' }}>\n        <input\n          type=\"text\"\n          placeholder=\"Search tools...\"\n          value={searchFilter}\n          onChange={(e) => setSearchFilter(e.target.value)}\n          style={{\n            width: '100%',\n            padding: '8px 12px',\n            border: '1px solid var(--border-color)',\n            borderRadius: '4px',\n            backgroundColor: 'var(--background-color-primary)',\n            fontSize: '14px',\n          }}\n        />\n      </div>\n\n      {/* Tools List */}\n      <div>\n        {filteredTools.length === 0 ? (\n          <div\n            style={{\n              color: 'var(--text-color-secondary)',\n              fontStyle: 'italic',\n              textAlign: 'center',\n              padding: '24px',\n            }}\n          >\n            No tools match your search\n          </div>\n        ) : (\n          sortedCategories.map((category) => (\n            <CollapsableSection key={category} label={`${category} (${groupedTools[category].length})`} isOpen={true}>\n              <div style={{ marginTop: '8px' }}>\n                {groupedTools[category].map((tool) => (\n                  <ToolInspector key={tool.name} tool={tool} />\n                ))}\n              </div>\n            </CollapsableSection>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { Suspense, useState } from 'react';\nimport { Button, Checkbox, FieldSet, LoadingPlaceholder, Modal, Tab, TabsBar } from '@grafana/ui';\nimport { useAsync } from 'react-use';\nimport { llm, mcp } from '@grafana/llm';\nimport { DevSandboxChat } from './DevSandboxChat';\nimport { RenderedToolCall } from './types';\nimport { DevSandboxToolInspector } from './DevSandboxToolInspector';\n\ntype SandboxTab = 'chat' | 'tools';\n\nfunction DevSandboxContent() {\n  const { client } = mcp.useMCPClient();\n  const [activeTab, setActiveTab] = useState<SandboxTab>('chat');\n\n  // Main state\n  const [useStream, setUseStream] = useState(true);\n  const [toolCalls, setToolCalls] = useState<Map<string, RenderedToolCall>>(new Map());\n\n  // Get available tools\n  const {\n    loading: _,\n    error: toolsError,\n    value: toolsData,\n  } = useAsync(async () => {\n    const enabled = await llm.enabled();\n    if (!enabled) {\n      return { enabled: false, tools: [] };\n    }\n    const { tools } = (await client?.listTools()) ?? { tools: [] };\n    return { enabled: true, tools };\n  }, [client]);\n\n  if (toolsError) {\n    return <div>Error: {toolsError.message}</div>;\n  }\n\n  if (!toolsData?.enabled) {\n    return <div>LLM plugin not enabled.</div>;\n  }\n\n  return (\n    <>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n        <TabsBar>\n          <Tab label=\"Chat\" active={activeTab === 'chat'} onChangeTab={() => setActiveTab('chat')} />\n          <Tab\n            label=\"Tool Inspector\"\n            active={activeTab === 'tools'}\n            onChangeTab={() => setActiveTab('tools')}\n            counter={toolsData?.tools?.length || 0}\n          />\n        </TabsBar>\n        {activeTab === 'chat' && (\n          <Checkbox label=\"Streaming\" value={useStream} onChange={(e) => setUseStream(e.currentTarget.checked)} />\n        )}\n      </div>\n\n      <div style={{ paddingTop: 10, minHeight: 400, display: 'flex', flexDirection: 'column' }}>\n        {activeTab === 'chat' && (\n          <DevSandboxChat useStream={useStream} toolCalls={toolCalls} setToolCalls={setToolCalls} />\n        )}\n        {activeTab === 'tools' && <DevSandboxToolInspector tools={toolsData?.tools || []} />}\n      </div>\n    </>\n  );\n}\n\nexport const DevSandbox = () => {\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n\n  const closeModal = () => {\n    setModalIsOpen(false);\n  };\n\n  return (\n    <FieldSet label=\"Development Sandbox\">\n      <Button onClick={() => setModalIsOpen(true)}>Open development sandbox</Button>\n      <Modal title=\"Development Sandbox\" isOpen={modalIsOpen} onDismiss={closeModal}>\n        <Suspense fallback={<LoadingPlaceholder text=\"Loading MCP...\" />}>\n          <mcp.MCPClientProvider appName=\"Grafana App With Model Context Protocol\" appVersion=\"1.0.0\">\n            <DevSandboxContent />\n          </mcp.MCPClientProvider>\n        </Suspense>\n\n        <div style={{ marginTop: '16px', display: 'flex', justifyContent: 'flex-end' }}>\n          <Button variant=\"primary\" onClick={closeModal}>\n            Close\n          </Button>\n        </div>\n      </Modal>\n    </FieldSet>\n  );\n};\n","import React from 'react';\n\nimport { IconButton, InlineField, InlineFieldRow, Input, Select } from '@grafana/ui';\n\nexport type AzureModelDeployments = Array<[string, string]>;\n\nexport function AzureModelDeploymentConfig({\n  modelMapping,\n  modelNames,\n  onChange,\n}: {\n  modelMapping: AzureModelDeployments;\n  modelNames: string[];\n  onChange: (modelMapping: AzureModelDeployments) => void;\n}) {\n  return (\n    <>\n      <IconButton\n        name=\"plus\"\n        aria-label=\"Add model mapping\"\n        onClick={(e) => {\n          e.preventDefault();\n          onChange([...modelMapping, ['', '']]);\n        }}\n      />\n      {modelMapping.map(([model, deployment], i) => (\n        <ModelMappingField\n          key={i}\n          model={model}\n          deployment={deployment}\n          modelNames={modelNames}\n          onChange={(model, deployment) => {\n            onChange([...modelMapping.slice(0, i), [model, deployment], ...modelMapping.slice(i + 1)]);\n          }}\n          onRemove={() => onChange([...modelMapping.slice(0, i), ...modelMapping.slice(i + 1)])}\n        />\n      ))}\n    </>\n  );\n}\n\nfunction ModelMappingField({\n  model,\n  deployment,\n  modelNames,\n  onChange,\n  onRemove,\n}: {\n  model: string;\n  deployment: string;\n  modelNames: string[];\n  onChange: (model: string, deployment: string) => void;\n  onRemove: () => void;\n}): JSX.Element {\n  return (\n    <InlineFieldRow>\n      <InlineField label=\"Model\">\n        <Select\n          placeholder=\"model label\"\n          options={modelNames.filter((n) => n !== deployment && n !== '').map((value) => ({ label: value, value }))}\n          value={model}\n          onChange={(event) => event.value !== undefined && onChange(event.value, deployment)}\n        />\n      </InlineField>\n      <InlineField label=\"Deployment\">\n        <Input\n          width={40}\n          name=\"AzureDeployment\"\n          placeholder=\"deployment name\"\n          value={deployment}\n          onChange={(event) => event.currentTarget.value !== undefined && onChange(model, event.currentTarget.value)}\n        />\n      </InlineField>\n      <IconButton\n        name=\"trash-alt\"\n        aria-label=\"Remove model mapping\"\n        onClick={(e) => {\n          e.preventDefault();\n          onRemove();\n        }}\n      />\n    </InlineFieldRow>\n  );\n}\n","import React, { ChangeEvent, useEffect, useState } from 'react';\n\nimport { openai } from '@grafana/llm';\nimport { Checkbox, Field, FieldSet, Input, SecretInput, Select, Stack, useStyles2 } from '@grafana/ui';\n\nimport { SelectableValue } from '@grafana/data';\nimport { testIds } from 'components/testIds';\nimport { getStyles, ProviderType, Secrets, SecretsSet } from './AppConfig';\nimport { AzureModelDeploymentConfig, AzureModelDeployments } from './AzureConfig';\n\nconst OPENAI_API_URL = 'https://api.openai.com';\nconst AZURE_OPENAI_URL_TEMPLATE = 'https://<resource-name>.openai.azure.com';\n\nexport interface OpenAISettings {\n  // The URL to reach OpenAI.\n  url?: string;\n  // The API path to append to the URL.\n  // Defaults to /v1 if not provided.\n  apiPath?: string;\n  // The organization ID for OpenAI.\n  organizationId?: string;\n  // Whether to use Azure OpenAI.\n  provider?: ProviderType;\n  // A mapping of OpenAI models to Azure deployment names.\n  azureModelMapping?: AzureModelDeployments;\n  // If the LLM features have been explicitly disabled.\n  disabled?: boolean;\n}\n\nexport function OpenAIConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n  allowCustomPath = false,\n}: {\n  settings: OpenAISettings;\n  onChange: (settings: OpenAISettings) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  onChangeSecrets: (secrets: Secrets) => void;\n  allowCustomPath: boolean;\n}) {\n  const s = useStyles2(getStyles);\n  // Helper to update settings using the name of the HTML event.\n  const onChangeField = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange({\n      ...settings,\n      [event.currentTarget.name]:\n        event.currentTarget.type === 'checkbox' ? event.currentTarget.checked : event.currentTarget.value.trim(),\n    });\n  };\n\n  // Update settings when provider changes, set default URL for OpenAI\n  const onChangeProvider = (value: ProviderType) => {\n    onChange({\n      ...settings,\n      provider: value,\n      url: value === 'openai' ? OPENAI_API_URL : '',\n    });\n  };\n\n  // Use separate state to track whether the user has checked the useCustomPath checkbox.\n  // This is required because we don't store the checkbox state as a bool in the settings,\n  // which our onChangeField assumes we do.\n  const [useCustomPath, setUseCustomPath] = useState(settings.apiPath !== undefined);\n  useEffect(() => {\n    // When the user checks the useCustomPath checkbox we want to immediately\n    // update the apiPath field, since the empty string is a valid value;\n    // the user shouldn't have to manually modify the input field to trigger\n    // the onChange.\n    // Similarly when they uncheck the checkbox, we want to clear the apiPath field.\n    const apiPath = useCustomPath ? (settings.apiPath ?? '') : undefined;\n    onChange({\n      ...settings,\n      apiPath,\n    });\n  }, [useCustomPath]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <FieldSet>\n      {settings.provider !== 'custom' && (\n        <Field label=\"Provider\">\n          <Select\n            data-testid={testIds.appConfig.provider}\n            options={\n              [\n                { label: 'OpenAI', value: 'openai' },\n                { label: 'Azure OpenAI', value: 'azure' },\n              ] as Array<SelectableValue<ProviderType>>\n            }\n            value={settings.provider ?? 'openai'}\n            onChange={(e) => onChangeProvider(e.value as ProviderType)}\n            width={60}\n          />\n        </Field>\n      )}\n\n      <Field\n        label={settings.provider === 'azure' ? 'Azure OpenAI Language API Endpoint' : 'API URL'}\n        className={s.marginTop}\n      >\n        <Input\n          width={60}\n          name=\"url\"\n          data-testid={testIds.appConfig.openAIUrl}\n          value={settings.provider === 'openai' ? OPENAI_API_URL : settings.url}\n          placeholder={\n            settings.provider === 'azure'\n              ? AZURE_OPENAI_URL_TEMPLATE\n              : settings.provider === 'openai'\n                ? OPENAI_API_URL\n                : `https://llm.domain.com`\n          }\n          onChange={onChangeField}\n          disabled={settings.provider === 'openai'}\n        />\n      </Field>\n\n      {allowCustomPath && (\n        <Field\n          label=\"API Path\"\n          description=\"Customize the API path appended to the URL. Defaults to /v1 if unchecked.\"\n          className={s.marginTop}\n        >\n          <Stack direction=\"row\" gap={1} alignItems={'center'}>\n            <Checkbox\n              data-testid={testIds.appConfig.customizeOpenAIApiPath}\n              name=\"Use custom API path\"\n              value={useCustomPath}\n              onChange={(e) => setUseCustomPath(e.currentTarget.checked)}\n            />\n\n            <Input\n              width={57}\n              name=\"apiPath\"\n              data-testid={testIds.appConfig.openAIApiPath}\n              value={settings.apiPath ?? ''}\n              placeholder={useCustomPath ? '' : '/v1'}\n              onChange={onChangeField}\n              disabled={!useCustomPath}\n            />\n          </Stack>\n        </Field>\n      )}\n\n      <Field label={settings.provider === 'azure' ? 'Azure OpenAI Key' : 'API Key'}>\n        <SecretInput\n          width={60}\n          data-testid={testIds.appConfig.openAIKey}\n          name=\"openAIKey\"\n          value={secrets.openAIKey}\n          isConfigured={secretsSet.openAIKey ?? false}\n          placeholder={settings.provider === 'azure' ? '' : 'sk-...'}\n          onChange={(e) => onChangeSecrets({ ...secrets, openAIKey: e.currentTarget.value })}\n          onReset={() => onChangeSecrets({ ...secrets, openAIKey: '' })}\n        />\n      </Field>\n\n      {settings.provider === 'openai' && (\n        <Field label=\"API Organization ID\">\n          <Input\n            width={60}\n            name=\"organizationId\"\n            data-testid={testIds.appConfig.openAIOrganizationID}\n            value={settings.organizationId}\n            placeholder={settings.organizationId ? '' : 'org-...'}\n            onChange={onChangeField}\n          />\n        </Field>\n      )}\n\n      {settings.provider === 'azure' && (\n        <Field label=\"Azure OpenAI Model Mapping\" description=\"Mapping from model name to Azure deployment name.\">\n          <AzureModelDeploymentConfig\n            modelMapping={settings.azureModelMapping ?? []}\n            modelNames={Object.values(openai.Model)}\n            onChange={(azureModelMapping) =>\n              onChange({\n                ...settings,\n                azureModelMapping,\n              })\n            }\n          />\n        </Field>\n      )}\n    </FieldSet>\n  );\n}\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\n\nexport function OpenAILogo({ width, height }: { width: number; height: number }) {\n  const theme = useTheme2();\n\n  // This is the white OpenAI logo SVG from their logo pack.\n\n  // If there's a better way to include an SVG inside a Grafana Plugin, let me know!!\n  return (\n    <svg width={width} height={height} viewBox=\"0 0 320 320\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g clipPath=\"url(#clip0_10145_290560)\">\n        <path\n          d=\"M297.06 130.97C304.32 109.18 301.82 85.31 290.21 65.49C272.75 35.09 237.65 19.45 203.37 26.81C188.12 9.63002 166.21 -0.139981 143.24 1.93887e-05C108.2 -0.0799806 77.11 22.48 66.33 55.82C43.82 60.43 24.39 74.52 13.02 94.49C-4.57001 124.81 -0.560007 163.03 22.94 189.03C15.68 210.82 18.18 234.69 29.79 254.51C47.25 284.91 82.35 300.55 116.63 293.19C131.87 310.37 153.79 320.14 176.76 319.99C211.82 320.08 242.92 297.5 253.7 264.13C276.21 259.52 295.64 245.43 307.01 225.46C324.58 195.14 320.56 156.95 297.07 130.95L297.06 130.97ZM176.78 299.08C162.75 299.1 149.16 294.19 138.39 285.2C138.88 284.94 139.73 284.47 140.28 284.13L204 247.33C207.26 245.48 209.26 242.01 209.24 238.26V148.43L236.17 163.98C236.46 164.12 236.65 164.4 236.69 164.72V239.11C236.65 272.19 209.86 299.01 176.78 299.08ZM47.94 244.05C40.91 231.91 38.38 217.68 40.79 203.87C41.26 204.15 42.09 204.66 42.68 205L106.4 241.8C109.63 243.69 113.63 243.69 116.87 241.8L194.66 196.88V227.98C194.68 228.3 194.53 228.61 194.28 228.81L129.87 266C101.18 282.52 64.54 272.7 47.95 244.05H47.94ZM31.17 104.96C38.17 92.8 49.22 83.5 62.38 78.67C62.38 79.22 62.35 80.19 62.35 80.87V154.48C62.33 158.22 64.33 161.69 67.58 163.54L145.37 208.45L118.44 224C118.17 224.18 117.83 224.21 117.53 224.08L53.11 186.86C24.48 170.28 14.66 133.65 31.16 104.97L31.17 104.96ZM252.43 156.45L174.64 111.53L201.57 95.99C201.84 95.81 202.18 95.78 202.48 95.91L266.9 133.1C295.58 149.67 305.41 186.36 288.84 215.04C281.83 227.18 270.79 236.48 257.64 241.32V165.51C257.67 161.77 255.68 158.31 252.44 156.45H252.43ZM279.23 116.11C278.76 115.82 277.93 115.32 277.34 114.98L213.62 78.18C210.39 76.29 206.39 76.29 203.15 78.18L125.36 123.1V92C125.34 91.68 125.49 91.37 125.74 91.17L190.15 54.01C218.84 37.46 255.52 47.31 272.06 76.01C279.05 88.13 281.58 102.32 279.21 116.11H279.23ZM110.72 171.54L83.78 155.99C83.49 155.85 83.3 155.57 83.26 155.25V80.86C83.28 47.74 110.15 20.9 143.27 20.92C157.28 20.92 170.84 25.84 181.61 34.8C181.12 35.06 180.28 35.53 179.72 35.87L116 72.67C112.74 74.52 110.74 77.98 110.76 81.73L110.72 171.52V171.54ZM125.35 140L160 119.99L194.65 139.99V180L160 200L125.35 180V140Z\"\n          fill={theme.colors.text.primary}\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_10145_290560\">\n          <rect width=\"320\" height=\"320\" fill={theme.colors.text.primary} />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n}\n","import React, { ChangeEvent } from 'react';\n\nimport { Field, FieldSet, Input, SecretInput, useStyles2 } from '@grafana/ui';\n\nimport { testIds } from 'components/testIds';\nimport { getStyles, Secrets, SecretsSet } from './AppConfig';\n\nconst ANTHROPIC_API_URL = 'https://api.anthropic.com';\n\nexport interface AnthropicSettings {\n  // The URL to reach Anthropic.\n  url?: string;\n  // If the LLM features have been explicitly disabled.\n  disabled?: boolean;\n}\n\nexport function AnthropicConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: {\n  settings: AnthropicSettings;\n  onChange: (settings: AnthropicSettings) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  onChangeSecrets: (secrets: Secrets) => void;\n}) {\n  const s = useStyles2(getStyles);\n  // Helper to update settings using the name of the HTML event.\n  const onChangeField = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange({\n      ...settings,\n      [event.currentTarget.name]:\n        event.currentTarget.type === 'checkbox' ? event.currentTarget.checked : event.currentTarget.value.trim(),\n    });\n  };\n\n  return (\n    <FieldSet>\n      <Field label=\"API URL\" className={s.marginTop}>\n        <Input\n          width={60}\n          name=\"url\"\n          data-testid={testIds.appConfig.anthropicUrl}\n          value={ANTHROPIC_API_URL}\n          placeholder={ANTHROPIC_API_URL}\n          onChange={onChangeField}\n          disabled={true}\n        />\n      </Field>\n\n      <Field label=\"API Key\">\n        <SecretInput\n          width={60}\n          data-testid={testIds.appConfig.anthropicKey}\n          name=\"anthropicKey\"\n          value={secrets.anthropicKey}\n          isConfigured={secretsSet.anthropicKey ?? false}\n          placeholder={secretsSet.anthropicKey ? 'sk-ant-...' : 'not configured'}\n          onChange={(e) => onChangeSecrets({ ...secrets, anthropicKey: e.currentTarget.value })}\n          onReset={() => onChangeSecrets({ ...secrets, anthropicKey: '' })}\n        />\n      </Field>\n    </FieldSet>\n  );\n}\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\n\nexport function AnthropicLogo({ width, height }: { width: number; height: number }) {\n  const theme = useTheme2();\n\n  return (\n    <svg width={width} height={height} viewBox=\"0 0 92.2 65\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M66.5,0H52.4l25.7,65h14.1L66.5,0z M25.7,0L0,65h14.4l5.3-13.6h26.9L51.8,65h14.4L40.5,0C40.5,0,25.7,0,25.7,0z\n        M24.3,39.3l8.8-22.8l8.8,22.8H24.3z\"\n        fill={theme.colors.text.primary}\n      />\n    </svg>\n  );\n}\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Badge, Button, Card, Checkbox, ConfirmModal, FieldSet, Icon, useStyles2 } from '@grafana/ui';\n\nimport { AppPluginSettings, Secrets, SecretsSet, ProviderType, getEffectiveProvider } from './AppConfig';\nimport { ModelConfig } from './ModelConfig';\nimport { DevSandbox } from './DevSandbox/DevSandbox';\nimport { OpenAIConfig } from './OpenAI';\nimport { OpenAILogo } from './OpenAILogo';\nimport { AnthropicConfig } from './AnthropicConfig';\nimport { AnthropicLogo } from './AnthropicLogo';\n\n// LLMOptions are the possible UI options for LLMs (grafana-provided cloud-only).\nexport type LLMOptions = 'grafana-provided' | 'openai' | 'test' | 'disabled' | 'unconfigured' | 'custom' | 'anthropic';\n\n// This maps the current settings to decide what UI selection (LLMOptions) to show\nfunction getLLMOptionFromSettings(settings: AppPluginSettings): LLMOptions {\n  // Backwards compatibility for disabled field\n  if (settings.disabled || settings.openAI?.disabled) {\n    return 'disabled';\n  }\n\n  const provider = getEffectiveProvider(settings);\n\n  switch (provider) {\n    case 'azure':\n    case 'openai':\n      return 'openai';\n    case 'custom':\n      return 'custom';\n    case 'test':\n      return 'test';\n    case 'grafana':\n      return 'grafana-provided';\n    case 'anthropic':\n      return 'anthropic';\n    default:\n      return 'unconfigured';\n  }\n}\n\nexport function LLMConfig({\n  settings,\n  secrets,\n  secretsSet,\n  optIn,\n  setOptIn,\n  onChange,\n  onChangeSecrets,\n}: {\n  settings: AppPluginSettings;\n  onChange: (settings: AppPluginSettings) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  optIn: boolean;\n  setOptIn: (optIn: boolean) => void;\n  onChangeSecrets: (secrets: Secrets) => void;\n}) {\n  const s = useStyles2(getStyles);\n  // should only be relevant for Grafana Cloud\n  const allowGrafanaManagedLLM = settings.enableGrafanaManagedLLM === true;\n\n  // llmOption is the currently chosen LLM option in the UI\n  const llmOption = getLLMOptionFromSettings(settings);\n\n  // previousOpenAIProvider caches the value of the openAI provider, as it is overwritten by the grafana option\n  const [previousOpenAIProvider, setPreviousOpenAIProvider] = useState<ProviderType>();\n\n  const [confirmationDialog, setConfirmationDialog] = useState<{\n    isOpen: boolean;\n    title: string;\n    message: string;\n    onConfirm: () => void;\n    onCancel: () => void;\n  } | null>(null);\n\n  const optInChange = () => {\n    setOptIn(!optIn);\n  };\n\n  const hasExistingModelConfigurations = () => {\n    const modelMapping = settings.models?.mapping;\n    return modelMapping && Object.keys(modelMapping).some((key) => modelMapping[key as keyof typeof modelMapping]);\n  };\n\n  const showProviderSwitchConfirmation = (newProvider: ProviderType, switchAction: () => void) => {\n    if (hasExistingModelConfigurations() && getEffectiveProvider(settings) !== newProvider) {\n      setConfirmationDialog({\n        isOpen: true,\n        title: 'Switch LLM Provider?',\n        message: `You have existing model configurations that may not be compatible with the new provider. Your current model mappings will be preserved, but you may need to update the model names to work with ${getProviderDisplayName(newProvider)}.`,\n        onConfirm: () => {\n          switchAction();\n          setConfirmationDialog(null);\n        },\n        onCancel: () => {\n          setConfirmationDialog(null);\n        },\n      });\n    } else {\n      switchAction();\n    }\n  };\n\n  const getProviderDisplayName = (provider: ProviderType): string => {\n    switch (provider) {\n      case 'openai':\n        return 'OpenAI';\n      case 'anthropic':\n        return 'Anthropic';\n      case 'azure':\n        return 'Azure OpenAI';\n      case 'custom':\n        return 'Custom API';\n      case 'grafana':\n        return 'Grafana-provided OpenAI';\n      case 'test':\n        return 'Test Provider';\n      default:\n        return 'the selected provider';\n    }\n  };\n\n  // Handlers for when different LLM options are chosen in the UI\n  const selectLLMDisabled = () => {\n    if (llmOption !== 'disabled') {\n      // Cache if OpenAI or Azure provider is used, so can restore\n      if (previousOpenAIProvider === undefined) {\n        setPreviousOpenAIProvider(settings.provider);\n      }\n\n      onChange({ ...settings, provider: undefined, disabled: true, openAI: { ...settings.openAI, disabled: true } });\n    }\n  };\n\n  const selectLLMTest = () => {\n    if (llmOption !== 'test') {\n      // Cache if OpenAI or Azure provider is used, so can restore\n      if (previousOpenAIProvider === undefined) {\n        setPreviousOpenAIProvider(settings.provider);\n      }\n\n      onChange({ ...settings, provider: 'test', disabled: false, openAI: { ...settings.openAI, disabled: false } });\n    }\n  };\n\n  const selectGrafanaManaged = () => {\n    if (llmOption !== 'grafana-provided') {\n      // Cache if OpenAI or Azure provider is used, so can restore\n      if (previousOpenAIProvider === undefined) {\n        setPreviousOpenAIProvider(settings.provider);\n      }\n\n      onChange({ ...settings, provider: 'grafana', disabled: false, openAI: { disabled: false } });\n    }\n  };\n\n  const selectOpenAI = () => {\n    if (llmOption !== 'openai') {\n      const switchToOpenAI = () => {\n        // Restore the provider (OpenAI or Azure) & clear the cache\n        // If the previous provider was not a valid openAI vendor, default to openai\n        // Otherwise the state would revert to the incorrect previous provider\n        if (previousOpenAIProvider === 'openai' || previousOpenAIProvider === 'azure') {\n          onChange({ ...settings, provider: previousOpenAIProvider, disabled: false, openAI: { disabled: false } });\n          setPreviousOpenAIProvider(undefined);\n        } else {\n          onChange({ ...settings, provider: 'openai', disabled: false, openAI: { disabled: false } });\n          setPreviousOpenAIProvider(undefined);\n        }\n      };\n      showProviderSwitchConfirmation('openai', switchToOpenAI);\n    }\n  };\n\n  const selectAnthropicProvider = () => {\n    if (llmOption !== 'anthropic') {\n      const switchToAnthropic = () => {\n        onChange({ ...settings, provider: 'anthropic', disabled: false });\n      };\n      showProviderSwitchConfirmation('anthropic', switchToAnthropic);\n    }\n  };\n\n  const selectCustom = () => {\n    if (llmOption !== 'custom') {\n      const switchToCustom = () => {\n        onChange({ ...settings, provider: 'custom', disabled: false, openAI: { disabled: false } });\n      };\n      showProviderSwitchConfirmation('custom', switchToCustom);\n    }\n  };\n\n  return (\n    <>\n      {settings.enableDevSandbox && <DevSandbox />}\n      <FieldSet label=\"LLM Provider Configuration\" className={s.sidePadding}>\n        {allowGrafanaManagedLLM && (\n          <div className={s.providerSection}>\n            <div className={s.sectionHeader}>\n              <h4>\n                Grafana-Provided Service{' '}\n                {llmOption === 'grafana-provided' && <Badge text=\"Currently Active\" color=\"green\" />}\n              </h4>\n            </div>\n            <div onClick={selectGrafanaManaged}>\n              <Card\n                isSelected={llmOption === 'grafana-provided'}\n                // onClick={selectGrafanaManaged} // prevents events passing to children, use parent div instead!\n                className={s.cardWithoutBottomMargin}\n              >\n                <Card.Heading>Use OpenAI provided by Grafana</Card.Heading>\n                <Card.Description>\n                  <div>Enable LLM features in Grafana by using a connection to OpenAI that is provided by Grafana</div>\n                  {llmOption === 'grafana-provided' && (\n                    <>\n                      <div className={s.openaiTermsBox}>\n                        <h4>Terms of Usage (Last updated: February 16th, 2024)</h4>\n                        <div>\n                          To enable OpenAI via Grafana Labs, please note that some data from your Grafana instance will\n                          be sent to OpenAI when you use the LLM-based features. Grafana Labs imposes usage limits for\n                          this service.\n                        </div>\n                        <div>\n                          Additionally, the following terms (&quot;AI Terms&quot;) are hereby added to and become part\n                          of your licensing agreement with Grafana Labs (the &quot;Agreement&quot;) as additional terms.\n                          Capitalized terms not defined in these AI Terms have the meanings given in the Agreement.\n                          These terms apply to your specific use of the OpenAI via Grafana Labs feature(s), and are\n                          separate, necessary terms regarding your use of this feature and therefore are not\n                          &apos;click-wrap&apos;, &apos;shrink-wrap&apos;, different or additional terms, or the like,\n                          to the extent your licensing agreement with Grafana Labs purports to supersede any such terms.\n                        </div>\n                        <ul>\n                          <li>Grafana Labs uses OpenAI&apos;s API platform to provide the LLM features.</li>\n                          <li>\n                            OpenAI does not train aggregated models on inputs or outputs of the API platform as used in\n                            connection with Grafana Labs Product(s).\n                          </li>\n                          <li>\n                            OpenAI does retain data for a short time in order to provide the services and monitor for\n                            abuse. All data sent to OpenAI is encrypted in transit and at rest.\n                          </li>\n                          <li>\n                            All features utilizing OpenAI are clearly marked in the Grafana Labs Product(s), and each\n                            feature sends minimal data to OpenAI&mdash;and only at the request of a user (for example,\n                            when a user clicks the button to request an Incident auto-summary).\n                          </li>\n                          <li>\n                            Grafana Labs will add new features regularly that utilize features connecting to\n                            OpenAI&apos;s APIs, which may include, but are not limited to:\n                            <ul>\n                              <li>Explaining Flamegraphs & offer suggestions to fix issues</li>\n                              <li>Incident auto-summary</li>\n                              <li>\n                                Suggesting names & descriptions for panels & dashboards, and summarize differences when\n                                saving changes\n                              </li>\n                              <li>Explaining error log lines in Sift</li>\n                              <li>Generating KQL queries in the Azure Data Explorer plugin</li>\n                            </ul>\n                          </li>\n                          <li>\n                            Visit the OpenAI trust portal for more detail about OpenAI:{' '}\n                            <Button\n                              size=\"sm\"\n                              variant=\"secondary\"\n                              onClick={(e: React.MouseEvent) => {\n                                window.open('https://trust.openai.com/', '_blank');\n                                e.stopPropagation();\n                              }}\n                            >\n                              https://trust.openai.com/\n                            </Button>\n                          </li>\n                          <li>\n                            If you enable this feature, OpenAI will be a subprocessor of Grafana Labs for the purpose of\n                            any data processing agreement you may have in place with Grafana Labs.\n                          </li>\n                          <li>\n                            Disclaimer. Outputs are generated through machine learning processes and are not tested,\n                            verified, endorsed or guaranteed to be accurate, complete or current by Grafana Labs. You\n                            should independently review and verify all outputs as to appropriateness for any or all of\n                            your use cases or applications. The warranties, disclaimers, and limitations of liability in\n                            the Agreement apply to the AI Features.\n                          </li>\n                        </ul>\n                      </div>\n                      <div>\n                        By clicking the &quot;I Accept&quot; button, you agree to these additional AI Terms on behalf of\n                        yourself and/or your organization. Please read these terms carefully before proceeding. If you\n                        do not agree to these terms, do not click the &quot;I Accept&quot; button.\n                      </div>\n                      <Checkbox value={optIn} onClick={optInChange} label=\"I Accept\" />\n                    </>\n                  )}\n                </Card.Description>\n                <Card.Figure>\n                  <Icon name=\"grafana\" size=\"lg\" />\n                </Card.Figure>\n              </Card>\n            </div>\n          </div>\n        )}\n        <div className={s.providerSection}>\n          <div className={s.sectionHeader}>\n            <h4>\n              Bring Your Own Service{' '}\n              {allowGrafanaManagedLLM &&\n                (llmOption === 'openai' || llmOption === 'anthropic' || llmOption === 'custom') && (\n                  <Badge text=\"Currently Active\" color=\"green\" />\n                )}\n            </h4>\n          </div>\n          <div onClick={selectOpenAI}>\n            <Card isSelected={llmOption === 'openai'} className={s.cardWithoutBottomMargin}>\n              <Card.Heading>Use OpenAI-compatible API</Card.Heading>\n              <Card.Description>\n                Enable LLM features in Grafana using OpenAI-compatible API\n                {llmOption === 'openai' && (\n                  <>\n                    <OpenAIConfig\n                      settings={settings.openAI ?? {}}\n                      onChange={(openAI) => onChange({ ...settings, openAI })}\n                      secrets={secrets}\n                      secretsSet={secretsSet}\n                      onChangeSecrets={onChangeSecrets}\n                      allowCustomPath={false}\n                    />\n                    <ModelConfig\n                      provider={settings.provider ?? 'openai'}\n                      settings={settings.models ?? { mapping: {} }}\n                      onChange={(models) => onChange({ ...settings, models })}\n                    />\n                  </>\n                )}\n              </Card.Description>\n              <Card.Figure>\n                <OpenAILogo width={20} height={20} />\n              </Card.Figure>\n            </Card>\n          </div>\n          <div onClick={selectAnthropicProvider}>\n            <Card isSelected={llmOption === 'anthropic'} className={s.cardWithoutBottomMargin}>\n              <Card.Heading>Use Anthropic API</Card.Heading>\n              <Card.Description>\n                Enable LLM features in Grafana using Anthropic&apos;s Claude models\n                {llmOption === 'anthropic' && (\n                  <>\n                    <AnthropicConfig\n                      settings={settings.anthropic ?? {}}\n                      onChange={(anthropic) => onChange({ ...settings, anthropic })}\n                      secrets={secrets}\n                      secretsSet={secretsSet}\n                      onChangeSecrets={onChangeSecrets}\n                    />\n                    <ModelConfig\n                      provider={settings.provider ?? 'anthropic'}\n                      settings={settings.models ?? { mapping: {} }}\n                      onChange={(models) => onChange({ ...settings, models })}\n                    />\n                  </>\n                )}\n              </Card.Description>\n              <Card.Figure>\n                <AnthropicLogo width={20} height={20} />\n              </Card.Figure>\n            </Card>\n          </div>\n          <div onClick={selectCustom}>\n            <Card isSelected={llmOption === 'custom'} className={s.cardWithoutBottomMargin}>\n              <Card.Heading>Use a Custom API</Card.Heading>\n              <Card.Description>\n                {'Enable LLM features in Grafana using a custom API (with \"OpenAI-like\" signature)'}\n                {llmOption === 'custom' && (\n                  <>\n                    <OpenAIConfig\n                      settings={settings.openAI ?? {}}\n                      onChange={(openAI) => onChange({ ...settings, openAI })}\n                      secrets={secrets}\n                      secretsSet={secretsSet}\n                      onChangeSecrets={onChangeSecrets}\n                      allowCustomPath={true}\n                    />\n                    <ModelConfig\n                      provider={settings.provider ?? 'custom'}\n                      settings={settings.models ?? { mapping: {} }}\n                      onChange={(models) => onChange({ ...settings, models })}\n                    />\n                  </>\n                )}\n              </Card.Description>\n              <Card.Figure>\n                <Icon name=\"ai\" size=\"lg\" />\n              </Card.Figure>\n            </Card>\n          </div>\n          {process.env.NODE_ENV === 'development' && (\n            <Card isSelected={llmOption === 'test'} className={s.cardWithoutBottomMargin} onClick={selectLLMTest}>\n              <Card.Heading>Test LLM features</Card.Heading>\n              <Card.Figure>\n                <Icon name=\"bug\" size=\"lg\" />\n              </Card.Figure>\n            </Card>\n          )}\n          <Card isSelected={llmOption === 'disabled'} onClick={selectLLMDisabled} className={s.cardWithoutBottomMargin}>\n            <Card.Heading>Disable all LLM features in Grafana</Card.Heading>\n            <Card.Description>&nbsp;</Card.Description>\n            <Card.Figure>\n              <Icon name=\"times\" size=\"lg\" />\n            </Card.Figure>\n          </Card>\n        </div>\n      </FieldSet>\n      {confirmationDialog && (\n        <ConfirmModal\n          isOpen={confirmationDialog.isOpen}\n          title={confirmationDialog.title}\n          body={confirmationDialog.message}\n          confirmText=\"Switch Provider\"\n          dismissText=\"Cancel\"\n          onConfirm={confirmationDialog.onConfirm}\n          onDismiss={confirmationDialog.onCancel}\n        />\n      )}\n    </>\n  );\n}\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  sidePadding: css`\n    margin-left: ${theme.spacing(1)};\n    margin-right: ${theme.spacing(1)};\n  `,\n  nestedList: css`\n    margin-left: ${theme.spacing(3)};\n  `,\n  openaiTermsBox: css({\n    overflowY: 'auto',\n    height: '250px',\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(1),\n    padding: `${theme.spacing(1)} ${theme.spacing(2)} ${theme.spacing(1)} ${theme.spacing(2)}`,\n    border: `1px solid ${theme.colors.border.medium}`,\n    background: theme.colors.background.primary,\n    color: theme.colors.text.primary,\n\n    ' ul': {\n      // space important, matches all children of type 'ul'\n      paddingLeft: theme.spacing(2),\n    },\n    '> ul > li:not(:last-child)': {\n      // slight vertical padding between main bullet points\n      marginBottom: theme.spacing(0.5),\n    },\n  }),\n  cardWithoutBottomMargin: css`\n    margin-bottom: 0;\n    margin-top: ${theme.spacing(1)};\n  `,\n  sectionHeader: css`\n    margin-top: ${theme.spacing(3)};\n    margin-bottom: ${theme.spacing(2)};\n    display: flex;\n    align-items: center;\n    gap: ${theme.spacing(1)};\n\n    h4 {\n      margin: 0;\n      color: ${theme.colors.text.primary};\n      font-weight: ${theme.typography.fontWeightMedium};\n      display: flex;\n      align-items: center;\n      gap: ${theme.spacing(1)};\n    }\n  `,\n  providerSection: css`\n    background: ${theme.colors.background.secondary};\n    border: 1px solid ${theme.colors.border.weak};\n    border-radius: ${theme.shape.borderRadius()};\n    padding: ${theme.spacing(2)};\n    margin-bottom: ${theme.spacing(2)};\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  `,\n});\n","import React from 'react';\n\nimport { InlineField, Input, SecretInput, useStyles2 } from '@grafana/ui';\n\nimport { testIds } from 'components/testIds';\nimport { Secrets, SecretsSet, getStyles } from '../AppConfig';\n\nimport { AuthSettings } from '../Vector';\n\nexport const BasicAuthConfig = ({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n  secretKey,\n}: {\n  settings?: AuthSettings;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  onChange: (settings: AuthSettings) => void;\n  onChangeSecrets: (secrets: Secrets) => void;\n  secretKey: 'vectorEmbedderBasicAuthPassword' | 'vectorStoreBasicAuthPassword';\n}) => {\n  const s = useStyles2(getStyles);\n\n  const onPasswordReset = () => {\n    onChangeSecrets({\n      ...secrets,\n      [secretKey]: '',\n    });\n  };\n\n  const onPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    onChangeSecrets({\n      ...secrets,\n      [secretKey]: event.currentTarget.value,\n    });\n  };\n\n  return (\n    <>\n      <InlineField label=\"User\" labelWidth={s.inlineFieldWidth}>\n        <Input\n          width={s.inlineFieldInputWidth}\n          placeholder=\"user\"\n          data-testid={testIds.appConfig.basicAuthUsername}\n          value={settings?.basicAuthUser}\n          onChange={(e) => onChange({ ...settings, basicAuthUser: e.currentTarget.value })}\n        />\n      </InlineField>\n      <InlineField label=\"Password\" labelWidth={s.inlineFieldWidth}>\n        <SecretInput\n          width={s.inlineFieldInputWidth}\n          placeholder=\"password\"\n          data-testid={testIds.appConfig.basicAuthPassword}\n          value={secrets[secretKey]}\n          isConfigured={secretsSet[secretKey] ?? false}\n          onReset={onPasswordReset}\n          onChange={onPasswordChange}\n        />\n      </InlineField>\n    </>\n  );\n};\n","import React from 'react';\n\nimport { Checkbox, Field, FieldSet, InlineField, Input, Select, useStyles2, Label, SecretInput } from '@grafana/ui';\n\nimport { testIds } from 'components/testIds';\nimport { Secrets, SecretsSet, getStyles } from './AppConfig';\n\nimport { BasicAuthConfig } from './AuthSettings/BasicAuth';\nimport { SelectableValue } from '@grafana/data';\n\nexport interface VectorSettings {\n  // Whether the vector service should be enabled.\n  enabled?: boolean;\n  // The model used by the embedder and for embeddings stored in the store.\n  model?: string;\n  // Embedder settings.\n  embed?: EmbedderSettings;\n  // Store settings.\n  store?: StoreSettings;\n}\n\nexport interface AuthSettings {\n  url?: string;\n  authType?: string;\n  basicAuthUser?: string;\n}\n\ninterface GrafanaVectorAPISettings extends AuthSettings {}\n\ninterface EmbedderSettings {\n  type?: EmbedderOptions;\n  grafanaVectorAPI?: GrafanaVectorAPISettings;\n}\n\ninterface QdrantSettings {\n  address?: string;\n  secure?: boolean;\n}\n\ninterface StoreSettings {\n  type?: string;\n  qdrant?: QdrantSettings;\n  grafanaVectorAPI?: GrafanaVectorAPISettings;\n}\n\nexport interface Props<T> {\n  settings?: T;\n  onChange: (settings: T) => void;\n}\n\ninterface SecretProps {\n  onChangeSecrets: (secrets: Secrets) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n}\n\nconst OPENAI_DEFAULT_MODEL = 'text-embedding-ada-002';\nconst VECTORAPI_DEFAULT_MODEL = 'BAAI/bge-small-en-v1.5';\n\nexport function VectorConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: Props<VectorSettings> & SecretProps) {\n  // update the model value if the embedder type changes\n  React.useEffect(() => {\n    if (settings?.embed?.type === 'openai' && settings?.model !== OPENAI_DEFAULT_MODEL) {\n      onChange({ ...settings, model: OPENAI_DEFAULT_MODEL });\n    } else if (\n      settings?.embed?.type === 'grafana/vectorapi' &&\n      (settings?.model === undefined || settings?.model === OPENAI_DEFAULT_MODEL)\n    ) {\n      onChange({ ...settings, model: VECTORAPI_DEFAULT_MODEL });\n    }\n  }, [settings, settings?.embed?.type, onChange]);\n\n  return (\n    <FieldSet label=\"Vector Settings\">\n      <Field label=\"Enabled\" description=\"Enable vector database powered features.\">\n        <Checkbox\n          name=\"enabled\"\n          data-testid={testIds.appConfig.vectorEnabled}\n          value={settings?.enabled || false}\n          onChange={(e) => onChange({ ...settings, enabled: e.currentTarget.checked })}\n        />\n      </Field>\n\n      {settings?.enabled && (\n        <>\n          <Field\n            label=\"Model\"\n            description=\"The model used by the embedder and for embeddings stored in the store\"\n            disabled={settings.embed?.type === 'openai' || settings.embed?.type === undefined}\n          >\n            <Input\n              width={60}\n              name=\"model\"\n              data-testid={testIds.appConfig.model}\n              value={settings?.model}\n              placeholder={settings?.model}\n              onChange={(e) => onChange({ ...settings, model: e.currentTarget.value })}\n            />\n          </Field>\n\n          <EmbedderConfig\n            settings={settings?.embed}\n            secrets={secrets}\n            secretsSet={secretsSet}\n            onChange={(embed) => onChange({ ...settings, embed })}\n            onChangeSecrets={onChangeSecrets}\n          />\n\n          <StoreConfig\n            settings={settings?.store}\n            secrets={secrets}\n            secretsSet={secretsSet}\n            onChange={(store) => onChange({ ...settings, store })}\n            onChangeSecrets={onChangeSecrets}\n          />\n        </>\n      )}\n    </FieldSet>\n  );\n}\n\ntype EmbedderOptions = 'openai' | 'grafana/vectorapi';\n\nexport function EmbedderConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: Props<EmbedderSettings> & SecretProps) {\n  const s = useStyles2(getStyles);\n\n  return (\n    <>\n      <h4>Embedder</h4>\n      <Field label=\"Embedder Provider\" description=\"Select the embedder API to use\">\n        <>\n          <Select\n            options={\n              [\n                { label: 'OpenAI API', value: 'openai' },\n                { label: 'Grafana Vector API', value: 'grafana/vectorapi' },\n              ] as Array<SelectableValue<EmbedderOptions>>\n            }\n            placeholder=\"Select Embedder Provider\"\n            value={settings?.type}\n            width={60}\n            onChange={(e) => onChange({ type: e.value })}\n          />\n          {settings?.type === 'openai' && <Label> Using configured OpenAI as embedder provider </Label>}\n        </>\n      </Field>\n\n      {settings?.type === 'grafana/vectorapi' && (\n        <>\n          <Field label=\"Auth Type\">\n            <Select\n              options={[\n                { label: 'No Auth', value: 'no-auth' },\n                { label: 'Basic Auth', value: 'basic-auth' },\n              ]}\n              value={settings?.grafanaVectorAPI?.authType ?? 'no-auth'}\n              onChange={(e) =>\n                e.value !== undefined &&\n                onChange({ ...settings, grafanaVectorAPI: { ...settings.grafanaVectorAPI, authType: e.value } })\n              }\n              width={60}\n            />\n          </Field>\n          <InlineField label=\"URL\" tooltip=\"Address of the Grafana Vector API\" labelWidth={s.inlineFieldWidth}>\n            <Input\n              name=\"url\"\n              value={settings?.grafanaVectorAPI?.url}\n              width={s.inlineFieldInputWidth}\n              data-testid={testIds.appConfig.grafanaVectorApiUrl}\n              placeholder={'http://vectorapi:8889'}\n              onChange={(e) =>\n                onChange({\n                  ...settings,\n                  grafanaVectorAPI: { ...settings.grafanaVectorAPI, url: e.currentTarget.value },\n                })\n              }\n            />\n          </InlineField>\n          {settings?.grafanaVectorAPI?.authType === 'basic-auth' && (\n            <BasicAuthConfig\n              settings={settings.grafanaVectorAPI}\n              secrets={secrets}\n              secretsSet={secretsSet}\n              onChange={(authSettings) => onChange({ ...settings, grafanaVectorAPI: authSettings })}\n              onChangeSecrets={onChangeSecrets}\n              secretKey=\"vectorEmbedderBasicAuthPassword\"\n            />\n          )}\n        </>\n      )}\n    </>\n  );\n}\n\nfunction QdrantConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: Props<QdrantSettings> & SecretProps) {\n  const s = useStyles2(getStyles);\n  return (\n    <>\n      <Field label=\"Address\" description=\"Address of the qdrant gRPC server\">\n        <Input\n          width={s.inlineFieldInputWidth}\n          name=\"url\"\n          data-testid={testIds.appConfig.qdrantAddress}\n          value={settings?.address}\n          placeholder={'localhost:6334'}\n          onChange={(e) => onChange({ ...settings, address: e.currentTarget.value })}\n        />\n      </Field>\n      <Field label=\"Secure\" description=\"Whether to use a secure connection\">\n        <Checkbox\n          name=\"secure\"\n          data-testid={testIds.appConfig.qdrantSecure}\n          checked={settings?.secure}\n          onChange={(e) => onChange({ ...settings, secure: e.currentTarget.checked })}\n        />\n      </Field>\n      {settings?.secure && (\n        <Field label=\"API key\" description=\"API key for the qdrant gRPC server\">\n          <SecretInput\n            name=\"qdrantApiKey\"\n            width={s.inlineFieldInputWidth}\n            data-testid={testIds.appConfig.qdrantApiKey}\n            onChange={(e) => onChangeSecrets({ ...secrets, qdrantApiKey: e.currentTarget.value })}\n            onReset={() => onChangeSecrets({ ...secrets, qdrantApiKey: '' })}\n            isConfigured={secretsSet.qdrantApiKey ?? false}\n            value={secrets.qdrantApiKey}\n          />\n        </Field>\n      )}\n    </>\n  );\n}\n\nfunction GrafanaVectorAPIConfig({ settings, onChange }: Props<GrafanaVectorAPISettings>) {\n  const s = useStyles2(getStyles);\n  return (\n    <>\n      <InlineField label=\"URL\" tooltip=\"Address of the Grafana Vector API\" labelWidth={s.inlineFieldWidth}>\n        <Input\n          name=\"url\"\n          value={settings?.url}\n          width={s.inlineFieldInputWidth}\n          data-testid={testIds.appConfig.grafanaVectorApiUrl}\n          placeholder={'http://vectorapi:8889'}\n          onChange={(e) => onChange({ ...settings, url: e.currentTarget.value })}\n        />\n      </InlineField>\n    </>\n  );\n}\n\nfunction StoreConfig({ settings, secrets, secretsSet, onChange, onChangeSecrets }: Props<StoreSettings> & SecretProps) {\n  return (\n    <>\n      <h4>Store</h4>\n      <Field label=\"Store Type\" description=\"The type of store\">\n        <Select\n          options={[\n            { label: 'Qdrant', value: 'qdrant' },\n            { label: 'Grafana Vector API', value: 'grafana/vectorapi' },\n          ]}\n          value={settings?.type}\n          onChange={(e) =>\n            e.value !== undefined &&\n            onChange({ ...settings, type: e.value, qdrant: undefined, grafanaVectorAPI: undefined })\n          }\n          width={60}\n        />\n      </Field>\n      {settings?.type === 'qdrant' && (\n        <QdrantConfig\n          settings={settings.qdrant}\n          secrets={secrets}\n          secretsSet={secretsSet}\n          onChange={(qdrant) => onChange({ ...settings, qdrant })}\n          onChangeSecrets={onChangeSecrets}\n        />\n      )}\n      {settings?.type === 'grafana/vectorapi' && (\n        <>\n          <Field label=\"Auth Type\">\n            <Select\n              options={[\n                { label: 'No Auth', value: 'no-auth' },\n                { label: 'Basic Auth', value: 'basic-auth' },\n              ]}\n              value={settings?.grafanaVectorAPI?.authType ?? 'no-auth'}\n              onChange={(e) =>\n                e.value !== undefined &&\n                onChange({ ...settings, grafanaVectorAPI: { ...settings.grafanaVectorAPI, authType: e.value } })\n              }\n              width={60}\n            />\n          </Field>\n          <GrafanaVectorAPIConfig\n            settings={settings.grafanaVectorAPI}\n            onChange={(grafanaVectorAPI) => onChange({ ...settings, grafanaVectorAPI })}\n          />\n        </>\n      )}\n      {settings?.type === 'grafana/vectorapi' && settings?.grafanaVectorAPI?.authType === 'basic-auth' && (\n        <BasicAuthConfig\n          settings={settings.grafanaVectorAPI}\n          secrets={secrets}\n          secretsSet={secretsSet}\n          onChange={(authSettings) => onChange({ ...settings, grafanaVectorAPI: authSettings })}\n          onChangeSecrets={onChangeSecrets}\n          secretKey=\"vectorStoreBasicAuthPassword\"\n        />\n      )}\n    </>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { lastValueFrom } from 'rxjs';\n\nimport { css } from '@emotion/css';\nimport { AppPluginMeta, GrafanaTheme2, KeyValue, PluginConfigPageProps, PluginMeta } from '@grafana/data';\nimport { FetchResponse, HealthCheckResult, getBackendSrv } from '@grafana/runtime';\nimport { Alert, Button, LoadingPlaceholder, useStyles2 } from '@grafana/ui';\n\nimport { testIds } from '../testIds';\nimport { ModelSettings } from './ModelConfig';\nimport { ShowHealthCheckResult } from './HealthCheck';\nimport { LLMConfig } from './LLMConfig';\nimport { OpenAISettings } from './OpenAI';\nimport { AnthropicSettings } from './AnthropicConfig';\nimport { VectorConfig, VectorSettings } from './Vector';\n///////////////////////\n\nexport type ProviderType = 'openai' | 'azure' | 'grafana' | 'test' | 'custom' | 'anthropic';\n\nexport interface AppPluginSettings {\n  provider?: ProviderType;\n  disabled?: boolean;\n  openAI?: OpenAISettings;\n  anthropic?: AnthropicSettings;\n  vector?: VectorSettings;\n  models?: ModelSettings;\n  // The enableGrafanaManagedLLM flag will enable the plugin to use Grafana-managed OpenAI\n  // This will only work for Grafana Cloud install plugins\n  enableGrafanaManagedLLM?: boolean;\n  displayVectorStoreOptions?: boolean;\n  enableDevSandbox?: boolean;\n}\n\nexport type Secrets = {\n  openAIKey?: string;\n  anthropicKey?: string;\n  qdrantApiKey?: string;\n  vectorStoreBasicAuthPassword?: string;\n  vectorEmbedderBasicAuthPassword?: string;\n};\n\nexport type SecretsSet = {\n  [Property in keyof Secrets]: boolean;\n};\n\nfunction initialSecrets(secureJsonFields: KeyValue<boolean>): SecretsSet {\n  return {\n    openAIKey: secureJsonFields.openAIKey ?? false,\n    anthropicKey: secureJsonFields.anthropicKey ?? false,\n    vectorEmbedderBasicAuthPassword: secureJsonFields.vectorEmbedderBasicAuthPassword ?? false,\n    vectorStoreBasicAuthPassword: secureJsonFields.vectorStoreBasicAuthPassword ?? false,\n    qdrantApiKey: secureJsonFields.qdrantApiKey ?? false,\n  };\n}\n\nexport interface AppConfigProps extends PluginConfigPageProps<AppPluginMeta<AppPluginSettings>> {}\n\n// Helper function to get the effective provider, handling both legacy and new provider fields\nexport function getEffectiveProvider(settings: AppPluginSettings): ProviderType | undefined {\n  // If the root provider is set, use it (new format)\n  if (settings.provider) {\n    return settings.provider;\n  }\n  // Otherwise fall back to the legacy openAI.provider field\n  return settings.openAI?.provider;\n}\n\nexport const AppConfig = ({ plugin }: AppConfigProps) => {\n  const s = useStyles2(getStyles);\n  const { enabled, pinned, jsonData, secureJsonFields } = plugin.meta;\n  const [settings, setSettings] = useState<AppPluginSettings>(jsonData ?? {});\n  const [newSecrets, setNewSecrets] = useState<Secrets>({});\n  // Whether each secret is already configured in the plugin backend.\n  const [configuredSecrets, setConfiguredSecrets] = useState<SecretsSet>(initialSecrets(secureJsonFields ?? {}));\n  // Whether any settings have been updated.\n  const [updated, setUpdated] = useState(false);\n\n  const [managedLLMOptIn, setManagedLLMOptIn] = useState<boolean>(false);\n\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [healthCheck, setHealthCheck] = useState<HealthCheckResult | undefined>(undefined);\n\n  const validateInputs = (): string | undefined => {\n    // Check if Grafana-provided OpenAI enabled, that it has been opted-in\n    if (settings?.provider === 'grafana' && !managedLLMOptIn) {\n      return 'You must click the \"I Accept\" checkbox to use OpenAI provided by Grafana';\n    }\n    return;\n  };\n  const errorState = validateInputs();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const optIn = await getLLMOptInState();\n      setManagedLLMOptIn(optIn);\n    };\n\n    if (settings.enableGrafanaManagedLLM === true) {\n      fetchData();\n    }\n  }, [settings.enableGrafanaManagedLLM]);\n\n  useEffect(() => {\n    // clear health check status if any setting changed\n    if (updated) {\n      setHealthCheck(undefined);\n    }\n  }, [updated]);\n\n  const doSave = async () => {\n    if (errorState !== undefined) {\n      return;\n    }\n    setIsUpdating(true);\n    setHealthCheck(undefined);\n\n    const originalSettings = { ...plugin.meta.jsonData };\n\n    let key: keyof SecretsSet;\n    const secureJsonData: Secrets = {};\n    for (key in configuredSecrets) {\n      // Only include secrets that are not already configured on the backend,\n      // otherwise we'll overwrite them.\n      if (!configuredSecrets[key]) {\n        secureJsonData[key] = newSecrets[key];\n      }\n    }\n\n    // Migrate the provider to the new format before saving\n    const settingsToSave = {\n      ...settings,\n      provider: getEffectiveProvider(settings),\n    };\n\n    try {\n      await updateAndSavePluginSettings(plugin.meta.id, settings.enableGrafanaManagedLLM, {\n        enabled,\n        pinned,\n        jsonData: settingsToSave,\n        secureJsonData,\n      });\n\n      // Note: health-check uses the state saved in the plugin settings.\n      let healthCheckResult: HealthCheckResult | undefined = undefined;\n      const effectiveProvider = getEffectiveProvider(settings);\n      if (effectiveProvider !== undefined) {\n        const result = await checkPluginHealth(plugin.meta.id);\n        healthCheckResult = result.data;\n\n        if (healthCheckResult.status?.toLowerCase() !== 'ok') {\n          await updateAndSavePluginSettings(plugin.meta.id, settings.enableGrafanaManagedLLM, {\n            enabled,\n            pinned,\n            jsonData: originalSettings,\n            secureJsonData: {},\n          });\n          plugin.meta.jsonData = originalSettings;\n          setHealthCheck(healthCheckResult);\n          setIsUpdating(false);\n          return;\n        }\n      }\n      setHealthCheck(healthCheckResult);\n\n      // If moving away from Grafana-managed LLM, opt-out of the feature automatically\n      // This logic should only be triggered if the Grafana-managed LLM feature is enabled (Grafana Cloud Only)\n      if (settings.enableGrafanaManagedLLM === true) {\n        if (managedLLMOptIn && effectiveProvider !== 'grafana') {\n          await saveLLMOptInState(false);\n        } else {\n          await saveLLMOptInState(managedLLMOptIn);\n        }\n      }\n\n      // Update the frontend settings explicitly, it is otherwise not updated until page reload\n      plugin.meta.jsonData = settingsToSave;\n\n      setIsUpdating(false);\n      setUpdated(false);\n    } catch (e) {\n      // Rolllback to original settings on any error\n      try {\n        await updateAndSavePluginSettings(plugin.meta.id, settings.enableGrafanaManagedLLM, {\n          enabled,\n          pinned,\n          jsonData: originalSettings,\n          secureJsonData: {},\n        });\n        plugin.meta.jsonData = originalSettings;\n      } catch (rollbackError) {\n        console.error('Failed to rollback settings:', rollbackError);\n      }\n      setIsUpdating(false);\n      throw e;\n    }\n  };\n\n  return (\n    <div data-testid={testIds.appConfig.container}>\n      <LLMConfig\n        settings={settings}\n        onChange={(newSettings: AppPluginSettings) => {\n          setSettings(newSettings);\n          setUpdated(true);\n        }}\n        secrets={newSecrets}\n        secretsSet={configuredSecrets}\n        optIn={managedLLMOptIn}\n        setOptIn={(optIn) => {\n          setManagedLLMOptIn(optIn);\n          setUpdated(true);\n        }}\n        onChangeSecrets={(secrets: Secrets) => {\n          // Update the new secrets.\n          setNewSecrets(secrets);\n          // Mark each secret as not configured. This will cause it to be included\n          // in the request body when the user clicks \"Save settings\".\n          for (const key of Object.keys(secrets)) {\n            setConfiguredSecrets({ ...configuredSecrets, [key]: false });\n          }\n          setUpdated(true);\n        }}\n      />\n      {settings.displayVectorStoreOptions === true && (\n        <VectorConfig\n          settings={settings.vector}\n          secrets={newSecrets}\n          secretsSet={configuredSecrets}\n          onChange={(vector) => {\n            setSettings({ ...settings, vector });\n            setUpdated(true);\n          }}\n          onChangeSecrets={(secrets) => {\n            // Update the new secrets.\n            setNewSecrets(secrets);\n            // Mark each secret as not configured. This will cause it to be included\n            // in the request body when the user clicks \"Save settings\".\n            for (const key of Object.keys(secrets)) {\n              setConfiguredSecrets({ ...configuredSecrets, [key]: false });\n            }\n            setUpdated(true);\n          }}\n        />\n      )}\n\n      {errorState !== undefined && <Alert title={errorState} severity=\"error\" />}\n      {isUpdating ? (\n        <LoadingPlaceholder text=\"Running health check...\" />\n      ) : (\n        healthCheck && <ShowHealthCheckResult {...healthCheck} />\n      )}\n      <div className={s.marginTop}>\n        <Button\n          type=\"submit\"\n          data-testid={testIds.appConfig.submit}\n          onClick={doSave}\n          disabled={!updated || isUpdating || errorState !== undefined}\n        >\n          Save &amp; test\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  colorWeak: css`\n    color: ${theme.colors.text.secondary};\n  `,\n  marginTop: css`\n    margin-top: ${theme.spacing(3)};\n  `,\n  inlineFieldWidth: 15,\n  inlineFieldInputWidth: 40,\n});\n\nexport const updateGrafanaPluginSettings = (pluginId: string, data: Partial<PluginMeta>) => {\n  const response = getBackendSrv().fetch({\n    url: `/api/plugins/${pluginId}/settings`,\n    method: 'POST',\n    data,\n  });\n\n  return lastValueFrom(response);\n};\n\nexport const updateGcomProvisionedPluginSettings = (data: Partial<PluginMeta>) => {\n  const response = getBackendSrv().fetch({\n    url: `/api/plugins/grafana-llm-app/resources/save-plugin-settings`,\n    method: 'POST',\n    data,\n  });\n\n  return lastValueFrom(response);\n};\n\nexport const updateAndSavePluginSettings = async (\n  pluginId: string,\n  persistToGcom = false,\n  data: Partial<PluginMeta>\n) => {\n  const gcomPluginData = {\n    jsonData: data.jsonData,\n    secureJsonData: data.secureJsonData,\n  };\n\n  if (persistToGcom === true) {\n    await updateGcomProvisionedPluginSettings(gcomPluginData).then((response: FetchResponse) => {\n      if (!response.ok) {\n        throw response.data;\n      }\n    });\n  }\n  await updateGrafanaPluginSettings(pluginId, data).then((response: FetchResponse) => {\n    if (!response.ok) {\n      throw response.data;\n    }\n  });\n};\n\nconst checkPluginHealth = (pluginId: string): Promise<FetchResponse<HealthCheckResult>> => {\n  const response = getBackendSrv().fetch({\n    url: `/api/plugins/${pluginId}/health`,\n  });\n  return lastValueFrom(response) as Promise<FetchResponse<HealthCheckResult>>;\n};\n\nexport async function saveLLMOptInState(optIn: boolean): Promise<void> {\n  return lastValueFrom(\n    getBackendSrv().fetch({\n      url: `api/plugins/grafana-llm-app/resources/grafana-llm-state`,\n      method: 'POST',\n      data: { allowed: optIn },\n    })\n  ).then((response: FetchResponse) => {\n    if (!response.ok) {\n      throw response.data;\n    }\n  });\n}\n\nexport async function getLLMOptInState(): Promise<boolean> {\n  return lastValueFrom(\n    getBackendSrv().fetch({\n      url: `api/plugins/grafana-llm-app/resources/grafana-llm-state`,\n      method: 'GET',\n    })\n  ).then((response: FetchResponse) => {\n    if (!response.ok || response.data?.status !== 'success') {\n      throw response.data;\n    }\n    return response.data.data?.allowed ?? false;\n  });\n}\n","import { AppPlugin } from '@grafana/data';\n\nimport { MainPage } from './pages';\nimport { AppConfig } from './components/AppConfig';\n\nexport const plugin = new AppPlugin<{}>().setRootPage(MainPage).addConfigPage({\n  title: 'Configuration',\n  icon: 'cog',\n  body: AppConfig,\n  id: 'configuration',\n});\n","import React from 'react';\nimport { css } from '@emotion/css';\nimport { PluginPage } from '@grafana/runtime';\nimport { useTheme2 } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { Models } from './Models';\nimport { MCPToolsWithProvider } from './MCPTools';\nimport { testIds } from 'components/testIds';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: ${theme.spacing(4)};\n    padding: ${theme.spacing(2)};\n    max-width: 1200px;\n    margin: 0 auto;\n  `,\n  header: css`\n    text-align: center;\n    margin-bottom: ${theme.spacing(3)};\n  `,\n  title: css`\n    font-size: ${theme.typography.h1.fontSize};\n    font-weight: ${theme.typography.h1.fontWeight};\n    color: ${theme.colors.text.primary};\n    margin: 0 0 ${theme.spacing(1)} 0;\n  `,\n  subtitle: css`\n    font-size: ${theme.typography.h4.fontSize};\n    color: ${theme.colors.text.secondary};\n    margin: 0;\n    font-weight: normal;\n  `,\n  sectionsContainer: css`\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: ${theme.spacing(4)};\n\n    @media (max-width: 768px) {\n      grid-template-columns: 1fr;\n    }\n  `,\n  section: css`\n    background: ${theme.colors.background.secondary};\n    border-radius: ${theme.shape.radius.default};\n    border: 1px solid ${theme.colors.border.medium};\n    padding: ${theme.spacing(3)};\n    overflow: hidden;\n  `,\n  sectionTitle: css`\n    font-size: ${theme.typography.h3.fontSize};\n    font-weight: ${theme.typography.h3.fontWeight};\n    color: ${theme.colors.text.primary};\n    margin: 0 0 ${theme.spacing(2)} 0;\n    padding-bottom: ${theme.spacing(1)};\n    border-bottom: 1px solid ${theme.colors.border.weak};\n  `,\n  sectionContent: css`\n    // Remove default margins from child components\n    h1,\n    h2 {\n      margin-top: 0;\n      font-size: ${theme.typography.h4.fontSize};\n    }\n\n    pre {\n      max-height: 300px;\n      overflow-y: auto;\n      background: ${theme.colors.background.primary};\n      border: 1px solid ${theme.colors.border.weak};\n      border-radius: ${theme.shape.radius.default};\n      padding: ${theme.spacing(2)};\n      font-size: ${theme.typography.bodySmall.fontSize};\n    }\n\n    ul {\n      margin: 0;\n      padding-left: ${theme.spacing(3)};\n    }\n\n    li {\n      margin-bottom: ${theme.spacing(0.5)};\n      line-height: 1.5;\n    }\n  `,\n  fullWidthSection: css`\n    grid-column: 1 / -1;\n    background: ${theme.colors.background.secondary};\n    border-radius: ${theme.shape.radius.default};\n    border: 1px solid ${theme.colors.border.medium};\n    padding: ${theme.spacing(3)};\n    margin-top: ${theme.spacing(2)};\n  `,\n  infoBox: css`\n    background: ${theme.colors.info.transparent};\n    border: 1px solid ${theme.colors.info.border};\n    border-radius: ${theme.shape.radius.default};\n    padding: ${theme.spacing(2)};\n    margin-bottom: ${theme.spacing(3)};\n    color: ${theme.colors.info.text};\n    font-size: ${theme.typography.bodySmall.fontSize};\n    line-height: 1.4;\n  `,\n});\n\nexport function MainPage() {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  return (\n    <PluginPage>\n      <div data-testid={testIds.mainPage.container} className={styles.container}>\n        <header className={styles.header}>\n          <h1 className={styles.title}>Grafana LLM</h1>\n          <p className={styles.subtitle}>Large Language Model integration with Model Context Protocol support</p>\n        </header>\n\n        <div className={styles.infoBox}>\n          <strong>About this plugin:</strong> This plugin provides LLM capabilities to Grafana through OpenAI-compatible\n          APIs and extends functionality with Model Context Protocol (MCP) tools for enhanced AI workflows.\n        </div>\n\n        <div className={styles.sectionsContainer}>\n          <section className={styles.section}>\n            <h2 className={styles.sectionTitle}>Language Models</h2>\n            <div className={styles.sectionContent}>\n              <Models />\n            </div>\n          </section>\n\n          <section className={styles.section}>\n            <h2 className={styles.sectionTitle}>MCP Tools</h2>\n            <div className={styles.sectionContent}>\n              <MCPToolsWithProvider />\n            </div>\n          </section>\n        </div>\n\n        <section className={styles.fullWidthSection}>\n          <h2 className={styles.sectionTitle}>Getting Started</h2>\n          <div className={styles.sectionContent}>\n            <p>\n              <strong>Models:</strong> View and manage available language models configured for this Grafana instance.\n              Models are provided through the configured LLM provider (OpenAI, Anthropic, or custom).\n            </p>\n            <p>\n              <strong>MCP Tools:</strong> Model Context Protocol tools extend LLM capabilities with access to Grafana\n              data sources, dashboards, alerts, and other contextual information. These tools can be used by AI\n              assistants to provide more relevant and data-driven responses.\n            </p>\n          </div>\n        </section>\n      </div>\n    </PluginPage>\n  );\n}\n"],"names":["ANY","Symbol","Comparator","constructor","comp","options","parseOptions","loose","value","trim","split","join","debug","this","parse","semver","operator","version","r","re","t","COMPARATORLOOSE","COMPARATOR","m","match","TypeError","undefined","SemVer","toString","test","er","cmp","intersects","Range","includePrerelease","startsWith","includes","module","exports","safeRe","SPACE_CHARACTERS","range","raw","set","formatted","replace","map","parseRange","filter","c","length","first","isNullSet","isAny","i","comps","k","format","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","cache","get","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","rangeList","parseComparator","replaceGTE0","rangeMap","Map","comparators","size","has","delete","result","values","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","remainingComparators","slice","testComparator","pop","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","id","toLowerCase","replaceTilde","TILDELOOSE","TILDE","_","M","p","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","from","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","prerelease","allowed","major","minor","patch","MAX_LENGTH","MAX_SAFE_INTEGER","compareIdentifiers","LOOSE","FULL","num","build","compare","other","compareMain","comparePre","a","b","compareBuild","inc","release","identifier","identifierBase","base","Number","Error","push","isNaN","s","eq","neq","gt","gte","lt","lte","op","String","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","next","exec","index","lastIndex","COERCEFULL","COERCE","versionA","versionB","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","prefix","throwErrors","parsed","list","sort","v","internalRe","constants","identifiers","valid","clean","diff","rcompare","compareLoose","rsort","coerce","satisfies","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","simplifyRange","subset","src","tokens","SEMVER_SPEC_VERSION","RELEASE_TYPES","rcompareIdentifiers","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","process","env","NODE_DEBUG","args","console","error","numeric","anum","bnum","max","key","firstKey","keys","looseOption","Object","freeze","emptyOpts","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","name","isGlobal","safe","token","makeSafeRegex","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","LONETILDE","LONECARET","r1","r2","versions","maxSV","rangeObj","forEach","min","minSV","minver","setMin","comparator","compver","hilo","gtfn","ltefn","ltfn","ecomp","high","low","prev","ranges","simplified","original","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","Set","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","add","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","__WEBPACK_EXTERNAL_MODULE__6089__","__WEBPACK_EXTERNAL_MODULE__7781__","__WEBPACK_EXTERNAL_MODULE__8531__","__WEBPACK_EXTERNAL_MODULE__2007__","__WEBPACK_EXTERNAL_MODULE__5959__","__WEBPACK_EXTERNAL_MODULE__1269__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","definition","o","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","toStringTag","testIds","appConfig","container","provider","openAIKey","customizeOpenAIApiPath","openAIApiPath","openAIOrganizationID","openAIUrl","anthropicKey","anthropicUrl","vectorEnabled","qdrantAddress","qdrantSecure","qdrantApiKey","grafanaVectorApiUrl","model","submit","basicAuthUsername","basicAuthPassword","mainPage","models","mcpTools","disabled","loading","empty","toolItem","toolName","toolDescription","extendStatics","setPrototypeOf","__proto__","Array","__extends","__","create","__assign","assign","arguments","apply","__values","iterator","done","__read","e","ar","__spreadArray","pack","l","concat","fn","deps","_a","initialState","mountedRef","lastCallId","useRef","isMounted","useCallback","current","useEffect","useState","state","callback","_i","callId","prevState","then","useAsyncFn","SuppressedError","util","objectUtil","Models","useAsync","getBackendSrv","div","data-testid","span","message","h1","pre","JSON","stringify","assertEqual","val","assertIs","_arg","assertNever","_x","arrayToEnum","items","item","getValidEnumValues","validKeys","objectKeys","filtered","objectValues","object","find","arr","checker","isInteger","isFinite","Math","floor","joinValues","array","separator","jsonStringifyReplacer","mergeShapes","second","ZodParsedType","getParsedType","data","string","nan","number","boolean","function","bigint","symbol","isArray","null","catch","promise","Date","date","unknown","ZodIssueCode","ZodError","errors","issues","super","addIssue","addIssues","subs","actualProto","_mapper","mapper","issue","fieldErrors","_errors","processError","code","unionErrors","returnTypeError","argumentsError","path","curr","el","assert","isEmpty","flatten","formErrors","errorMap","_ctx","invalid_type","received","expected","invalid_literal","unrecognized_keys","invalid_union","invalid_union_discriminator","invalid_enum_value","invalid_arguments","invalid_return_type","invalid_date","invalid_string","validation","position","endsWith","too_small","type","exact","inclusive","minimum","too_big","maximum","custom","invalid_intersection_types","not_multiple_of","multipleOf","not_finite","defaultError","overrideErrorMap","getErrorMap","makeIssue","params","errorMaps","issueData","fullPath","fullIssue","errorMessage","maps","reverse","addIssueToContext","ctx","overrideMap","common","contextualErrorMap","schemaErrorMap","x","ParseStatus","dirty","abort","mergeArray","status","results","arrayValue","INVALID","mergeObjectAsync","pairs","syncPairs","pair","mergeObjectSync","finalObject","alwaysSet","DIRTY","OK","isAborted","isDirty","isValid","isAsync","Promise","receiver","kind","f","errorUtil","_ZodEnum_cache","_ZodNativeEnum_cache","errToObj","ParseInputLazyPath","parent","_cachedPath","_path","_key","handleResult","success","_error","processCreateParams","invalid_type_error","required_error","description","iss","_b","ZodType","_def","_getType","input","_getOrReturnCtx","parsedType","_processInputParams","_parseSync","_parse","_parseAsync","resolve","safeParse","async","err","parseAsync","safeParseAsync","maybeAsyncResult","refine","check","getIssueProperties","_refinement","setError","refinement","refinementData","ZodEffects","schema","typeName","ZodFirstPartyTypeKind","effect","superRefine","def","spa","bind","optional","nullable","nullish","or","and","transform","brand","default","describe","pipe","readonly","isNullable","isOptional","vendor","validate","ZodOptional","ZodNullable","ZodArray","ZodPromise","option","ZodUnion","incoming","ZodIntersection","defaultValueFunc","ZodDefault","innerType","defaultValue","ZodBranded","catchValueFunc","ZodCatch","catchValue","This","target","ZodPipeline","ZodReadonly","cuidRegex","cuid2Regex","ulidRegex","uuidRegex","nanoidRegex","jwtRegex","durationRegex","emailRegex","emojiRegex","ipv4Regex","ipv4CidrRegex","ipv6Regex","ipv6CidrRegex","base64Regex","base64urlRegex","dateRegexSource","dateRegex","timeRegexSource","regex","precision","datetimeRegex","opts","local","offset","isValidJWT","jwt","alg","header","base64","padEnd","decoded","atob","typ","isValidCidr","ip","ZodString","checks","tooBig","tooSmall","URL","toUpperCase","_regex","_addCheck","email","url","emoji","uuid","nanoid","cuid","cuid2","ulid","base64url","cidr","datetime","time","duration","minLength","maxLength","len","nonempty","isDatetime","ch","isDate","isTime","isDuration","isEmail","isURL","isEmoji","isUUID","isNANOID","isCUID","isCUID2","isULID","isIP","isCIDR","isBase64","isBase64url","floatSafeRemainder","step","valDecCount","stepDecCount","decCount","parseInt","toFixed","pow","ZodNumber","setLimit","int","positive","negative","nonpositive","nonnegative","finite","MIN_SAFE_INTEGER","minValue","maxValue","isInt","ZodBigInt","BigInt","_getInvalidInput","ZodBoolean","Boolean","ZodDate","getTime","minDate","maxDate","ZodSymbol","ZodUndefined","ZodNull","ZodAny","_any","ZodUnknown","_unknown","ZodNever","never","ZodVoid","void","exactLength","all","element","deepPartialify","ZodObject","newShape","shape","fieldSchema","unwrap","ZodTuple","_cached","nonstrict","passthrough","augment","extend","_getCached","shapeKeys","extraKeys","catchall","unknownKeys","keyValidator","strict","_c","_d","strip","augmentation","merge","merging","setKey","pick","mask","omit","deepPartial","partial","required","newField","keyof","createZodEnum","strictCreate","lazycreate","childCtx","types","getDiscriminator","ZodLazy","ZodLiteral","ZodEnum","ZodNativeEnum","enum","ZodDiscriminatedUnion","discriminator","discriminatorValue","optionsMap","discriminatorValues","mergeValues","aType","bType","bKeys","sharedKeys","indexOf","newObj","sharedValue","newArray","handleParsed","parsedLeft","parsedRight","merged","left","right","rest","itemIndex","schemas","ZodRecord","keySchema","keyType","valueSchema","valueType","third","ZodMap","entries","finalMap","ZodSet","minSize","maxSize","finalizeSet","elements","parsedSet","ZodFunction","implement","makeArgsIssue","makeReturnsIssue","returns","me","parsedArgs","Reflect","parsedReturns","parameters","returnType","func","strictImplement","expectedValues","enumValues","Values","Enum","extract","newDef","exclude","opt","WeakMap","nativeEnumValues","promisified","sourceType","checkCtx","arg","fatal","processed","executeRefinement","acc","inner","createWithPreprocess","preprocess","removeDefault","newCtx","removeCatch","ZodNaN","BRAND","inResult","in","out","handleAsync","cleanParams","_params","_fatal","late","stringType","numberType","nanType","bigIntType","booleanType","dateType","symbolType","undefinedType","nullType","anyType","unknownType","neverType","voidType","arrayType","objectType","strictObjectType","unionType","discriminatedUnionType","intersectionType","tupleType","recordType","mapType","setType","functionType","lazyType","literalType","enumType","nativeEnumType","promiseType","effectsType","optionalType","nullableType","preprocessType","pipelineType","NEVER","defaultErrorMap","setErrorMap","EMPTY_PATH","ZodTransformer","Schema","ZodSchema","any","discriminatedUnion","cls","intersection","lazy","literal","nativeEnum","oboolean","onumber","ostring","pipeline","record","strictObject","transformer","tuple","union","quotelessJson","LATEST_PROTOCOL_VERSION","SUPPORTED_PROTOCOL_VERSIONS","JSONRPC_VERSION","ProgressTokenSchema","CursorSchema","RequestMetaSchema","progressToken","BaseRequestParamsSchema","_meta","RequestSchema","method","BaseNotificationParamsSchema","NotificationSchema","ResultSchema","RequestIdSchema","JSONRPCRequestSchema","jsonrpc","isJSONRPCRequest","JSONRPCNotificationSchema","JSONRPCResponseSchema","isJSONRPCResponse","ErrorCode","JSONRPCErrorSchema","EmptyResultSchema","CancelledNotificationSchema","requestId","reason","ImplementationSchema","ClientCapabilitiesSchema","experimental","sampling","roots","listChanged","InitializeRequestSchema","protocolVersion","capabilities","clientInfo","ServerCapabilitiesSchema","logging","completions","prompts","resources","subscribe","tools","InitializeResultSchema","serverInfo","instructions","InitializedNotificationSchema","PingRequestSchema","ProgressSchema","progress","total","ProgressNotificationSchema","PaginatedRequestSchema","cursor","PaginatedResultSchema","nextCursor","ResourceContentsSchema","uri","mimeType","TextResourceContentsSchema","text","BlobResourceContentsSchema","blob","ResourceSchema","ResourceTemplateSchema","uriTemplate","ListResourcesRequestSchema","ListResourcesResultSchema","ListResourceTemplatesRequestSchema","ListResourceTemplatesResultSchema","resourceTemplates","ReadResourceRequestSchema","ReadResourceResultSchema","contents","ResourceListChangedNotificationSchema","SubscribeRequestSchema","UnsubscribeRequestSchema","ResourceUpdatedNotificationSchema","PromptArgumentSchema","PromptSchema","ListPromptsRequestSchema","ListPromptsResultSchema","GetPromptRequestSchema","TextContentSchema","ImageContentSchema","AudioContentSchema","EmbeddedResourceSchema","resource","PromptMessageSchema","role","content","GetPromptResultSchema","messages","PromptListChangedNotificationSchema","ToolAnnotationsSchema","title","readOnlyHint","destructiveHint","idempotentHint","openWorldHint","ToolSchema","inputSchema","properties","annotations","ListToolsRequestSchema","ListToolsResultSchema","CallToolResultSchema","isError","CallToolRequestSchema","toolResult","ToolListChangedNotificationSchema","LoggingLevelSchema","SetLevelRequestSchema","level","LoggingMessageNotificationSchema","logger","ModelHintSchema","ModelPreferencesSchema","hints","costPriority","speedPriority","intelligencePriority","SamplingMessageSchema","CreateMessageRequestSchema","systemPrompt","includeContext","temperature","maxTokens","stopSequences","metadata","modelPreferences","CreateMessageResultSchema","stopReason","ResourceReferenceSchema","PromptReferenceSchema","CompleteRequestSchema","ref","argument","CompleteResultSchema","completion","hasMore","RootSchema","ListRootsRequestSchema","ListRootsResultSchema","RootsListChangedNotificationSchema","McpError","Protocol","_options","_requestMessageId","_requestHandlers","_requestHandlerAbortControllers","_notificationHandlers","_responseHandlers","_progressHandlers","_timeoutInfo","setNotificationHandler","notification","controller","_onprogress","setRequestHandler","_request","_setupTimeout","messageId","timeout","maxTotalTimeout","onTimeout","resetTimeoutOnProgress","timeoutId","setTimeout","startTime","now","_resetTimeout","info","totalElapsed","RequestTimeout","clearTimeout","_cleanupTimeout","connect","transport","_transport","onclose","_onclose","onerror","_onerror","onmessage","extra","_onresponse","_onrequest","isJSONRPCNotification","_onnotification","start","responseHandlers","clear","ConnectionClosed","handler","fallbackNotificationHandler","request","fallbackRequestHandler","send","MethodNotFound","abortController","AbortController","fullExtra","signal","sessionId","sendNotification","relatedRequestId","sendRequest","resultSchema","authInfo","aborted","isSafeInteger","InternalError","finally","responseHandler","timeoutInfo","response","close","resumptionToken","onresumptiontoken","reject","_e","enforceStrictCapabilities","assertCapabilityForMethod","throwIfAborted","jsonrpcRequest","onprogress","cancel","addEventListener","assertNotificationCapability","jsonrpcNotification","requestSchema","assertRequestHandlerCapability","removeRequestHandler","assertCanSetRequestHandler","notificationSchema","removeNotificationHandler","Client","_clientInfo","_capabilities","registerCapabilities","additional","reduce","assertCapability","capability","_serverCapabilities","_serverVersion","_instructions","getServerCapabilities","getServerVersion","getInstructions","ping","complete","setLoggingLevel","getPrompt","listPrompts","listResources","listResourceTemplates","readResource","subscribeResource","unsubscribeResource","callTool","listTools","sendRootsListChanged","generateChallenge","code_verifier","buffer","subtle","digest","TextEncoder","encode","btoa","fromCharCode","Uint8Array","pkceChallenge","verifier","randomUints","getRandomValues","random","generateVerifier","code_challenge","globalThis","crypto","OAuthMetadataSchema","issuer","authorization_endpoint","token_endpoint","registration_endpoint","scopes_supported","response_types_supported","response_modes_supported","grant_types_supported","token_endpoint_auth_methods_supported","token_endpoint_auth_signing_alg_values_supported","service_documentation","revocation_endpoint","revocation_endpoint_auth_methods_supported","revocation_endpoint_auth_signing_alg_values_supported","introspection_endpoint","introspection_endpoint_auth_methods_supported","introspection_endpoint_auth_signing_alg_values_supported","code_challenge_methods_supported","OAuthTokensSchema","access_token","token_type","expires_in","scope","refresh_token","OAuthClientMetadataSchema","error_description","error_uri","redirect_uris","uris","canParse","token_endpoint_auth_method","grant_types","response_types","client_name","client_uri","logo_uri","contacts","tos_uri","policy_uri","jwks_uri","jwks","software_id","software_version","OAuthClientInformationSchema","client_id","client_secret","client_id_issued_at","client_secret_expires_at","OAuthClientInformationFullSchema","token_type_hint","UnauthorizedError","auth","serverUrl","authorizationCode","fetch","headers","ok","json","discoverOAuthMetadata","clientInformation","saveClientInformation","fullInformation","clientMetadata","registrationUrl","body","registerClient","codeVerifier","redirectUri","grantType","tokenUrl","URLSearchParams","grant_type","redirect_uri","exchangeAuthorization","redirectUrl","saveTokens","newTokens","refreshToken","refreshAuthorization","authorizationUrl","responseType","codeChallengeMethod","challenge","codeChallenge","searchParams","startAuthorization","saveCodeVerifier","redirectToAuthorization","__defProp","__publicField","configurable","writable","__defNormalProp","ParseError","field","line","noop","EventSourceParserStream","TransformStream","onError","onRetry","onComment","parser","callbacks","onEvent","incompleteLine","isFirstChunk","eventType","parseLine","event","fieldSeparatorIndex","processField","feed","newChunk","chunk","incomplete","lines","totalLength","char","splitLines","reset","consume","createParser","enqueue","DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS","initialReconnectionDelay","maxReconnectionDelay","reconnectionDelayGrowFactor","maxRetries","StreamableHTTPError","StreamableHTTPClientTransport","_url","_requestInit","requestInit","_authProvider","authProvider","_sessionId","_reconnectionOptions","reconnectionOptions","_authThenStart","_startOrAuthSse","_commonHeaders","Headers","_abortController","statusText","_handleSseStream","_getNextReconnectionDelay","attempt","initialDelay","growFactor","maxDelay","_scheduleReconnection","attemptCount","delay","stream","replayMessageId","lastEventId","reader","pipeThrough","TextDecoderStream","getReader","read","processStream","finishAuth","init","hasRequests","msg","contentType","responseMessages","terminateSession","LLM_PLUGIN_ROUTE","LLM_PLUGIN_VERSION","MCP_GRAFANA_PATH","clientMap","MCPClientContext","clientKey","appName","appVersion","MCPClientProvider","mcpAppName","mcpAppPath","children","useMemo","isEnabled","settings","showSuccessAlert","showErrorAlert","enabled","jsonData","mcp","logDebug","client","appId","mcpPath","grafanaUrl","config","appUrl","streamableHTTPURL","createClientResource","Provider","useMCPClient","convertToolsToOpenAI","convertToolToOpenAI","tool","MCPToolsList","style","maxHeight","overflowY","h2","ul","li","strong","MCPToolsWithProvider","React","fallback","ErrorBoundary","isHealthCheckDetails","alertVariants","getAlertVariant","str","ShowHealthCheckResult","props","severity","details","Alert","llmProvider","vector","vectorOk","getAlertSeverity","showLLMProvider","configured","showVector","Stack","direction","ShowGrafanaHealth","ShowLLMProviderHealth","ShowVectorHealth","liveEnabled","href","width","isFunction","operate","source","lift","hasLift","liftedSource","ctorFunc","UnsubscriptionError","instance","stack","arrRemove","splice","Subscription","initialTeardown","closed","_parentage","_finalizers","unsubscribe","e_1","e_2","_parentage_1","_parentage_1_1","remove","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","_removeParent","EMPTY","timeoutProvider","delegate","handle","COMPLETE_NOTIFICATION","createNotification","Subscriber","_super","destination","_this","isStopped","EMPTY_OBSERVER","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_complete","_bind","Function","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","reportUnhandledError","subscriber","onStoppedNotification","createOperatorSubscriber","onNext","onComplete","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","predicate","project","scanInternals","accumulator","seed","hasSeed","emitOnNext","emitBeforeComplete","hasState","identity","arrReducer","randomUUID","rnds8","byteToHex","buf","rnds","rng","RangeError","unsafeStringify","LLM_CHAT_COMPLETIONS_PATH","Model","Model2","isErrorResponse","isToolCallsMessage","tool_calls","accumulateContent","choices","delta","scan","chatCompletions","post","streamChatCompletions","channel","LiveChannelScope","Plugin","namespace","getGrafanaLiveSrv","getStream","isLiveChannelMessageEvent","tapObserver","isUnsub","finalize","finish_reason","loggedWarning","healthDetails","logWarning","setLLMPluginVersion","health","accumulateToolCalls","responses","toolCallMessages","recoveredToolCallMessage","tc","recoverToolCallMessage","DEFAULT_MODEL_ID","openai","BASE","initModelSettings","defaultModelMapping","mapping","fromEntries","entry","ModelConfig","onChange","label","LARGE","defaultModelMappingConfig","setDefault","FieldSet","Field","Select","Label","modelSetting","isDefault","FieldLabel","Divider","spacing","margin","Badge","color","Button","variant","onClick","Input","placeholder","newModelName","currentTarget","newMapping","handleToolCall","fc","toolCalls","setToolCalls","log","running","textContent","tool_call_id","DevSandboxChat","useStream","chatHistory","setChatHistory","currentInput","setCurrentInput","isGenerating","setIsGenerating","chatContainerRef","scrollTop","scrollHeight","toolsLoading","toolsError","toolsData","llm","handleStreamingChatWithHistory","toolCallsStream","otherMessages","partition","contentMessages","idx","lastValueFrom","tcs","firstMessage","startWith","handleNonStreamingChatWithHistory","functionCalls","sendMessage","userMessage","timestamp","assistantMessage","gap","height","border","borderRadius","padding","backgroundColor","fontStyle","display","flexDirection","marginBottom","maxWidth","whiteSpace","wordBreak","boxShadow","fontSize","lineHeight","opacity","TextArea","onKeyDown","shiftKey","preventDefault","flex","rows","Spinner","FormFieldComponent","handleChange","newValue","fieldProps","example","isClearable","Switch","checked","numValue","parseFloat","ToolParameterForm","onParametersChange","onSubmit","isLoading","formData","setFormData","fields","parseSchema","initialData","cleanedData","handleFieldChange","fieldName","isFormValid","textAlign","marginTop","displayName","TOOL_CATEGORIES","list_teams","list_users_by_org","search_dashboards","get_dashboard_by_uid","update_dashboard","get_dashboard_panel_queries","list_datasources","get_datasource_by_uid","get_datasource_by_name","query_prometheus","list_prometheus_metric_metadata","list_prometheus_metric_names","list_prometheus_label_names","list_prometheus_label_values","list_incidents","create_incident","add_activity_to_incident","get_incident","query_loki_logs","list_loki_label_names","list_loki_label_values","query_loki_stats","list_alert_rules","get_alert_rule_by_uid","list_contact_points","list_oncall_schedules","get_oncall_shift","get_current_oncall_users","list_oncall_teams","list_oncall_users","get_sift_investigation","get_sift_analysis","list_sift_investigations","find_error_pattern_logs","find_slow_requests","list_pyroscope_label_names","list_pyroscope_label_values","list_pyroscope_profile_types","fetch_pyroscope_profile","get_assertions","ToolInspector","expanded","setExpanded","parametersInput","setParametersInput","formParameters","setFormParameters","inputMode","setInputMode","callResult","setCallResult","handleFormParametersChange","handleTestTool","generateExampleParameters","fillExampleParameters","borderBottom","justifyContent","alignItems","fontWeight","paramCount","requiredCount","Icon","h4","overflow","formatSchema","TabsBar","Tab","active","onChangeTab","fontFamily","marginLeft","DevSandboxToolInspector","searchFilter","setSearchFilter","filteredTools","searchLower","groupedTools","sortedCategories","grouped","groups","category","localeCompare","CollapsableSection","isOpen","DevSandboxContent","activeTab","setActiveTab","setUseStream","counter","Checkbox","paddingTop","minHeight","DevSandbox","modalIsOpen","setModalIsOpen","closeModal","Modal","onDismiss","Suspense","LoadingPlaceholder","AzureModelDeploymentConfig","modelMapping","modelNames","IconButton","aria-label","deployment","ModelMappingField","onRemove","InlineFieldRow","InlineField","OPENAI_API_URL","AZURE_OPENAI_URL_TEMPLATE","OpenAIConfig","secrets","secretsSet","onChangeSecrets","allowCustomPath","useStyles2","getStyles","onChangeField","useCustomPath","setUseCustomPath","apiPath","onChangeProvider","className","SecretInput","isConfigured","onReset","organizationId","azureModelMapping","OpenAILogo","theme","useTheme2","svg","viewBox","fill","xmlns","g","clipPath","colors","primary","defs","rect","ANTHROPIC_API_URL","AnthropicConfig","AnthropicLogo","LLMConfig","optIn","setOptIn","allowGrafanaManagedLLM","enableGrafanaManagedLLM","llmOption","openAI","getEffectiveProvider","getLLMOptionFromSettings","previousOpenAIProvider","setPreviousOpenAIProvider","confirmationDialog","setConfirmationDialog","showProviderSwitchConfirmation","newProvider","switchAction","hasExistingModelConfigurations","getProviderDisplayName","onConfirm","onCancel","enableDevSandbox","sidePadding","providerSection","sectionHeader","Card","isSelected","cardWithoutBottomMargin","Heading","Description","openaiTermsBox","window","open","stopPropagation","Figure","anthropic","ConfirmModal","confirmText","dismissText","css","nestedList","marginRight","medium","background","paddingLeft","typography","fontWeightMedium","secondary","weak","BasicAuthConfig","secretKey","labelWidth","inlineFieldWidth","inlineFieldInputWidth","basicAuthUser","OPENAI_DEFAULT_MODEL","VectorConfig","embed","EmbedderConfig","StoreConfig","store","grafanaVectorAPI","authType","tooltip","authSettings","QdrantConfig","address","secure","GrafanaVectorAPIConfig","qdrant","colorWeak","updateAndSavePluginSettings","pluginId","persistToGcom","gcomPluginData","secureJsonData","updateGcomProvisionedPluginSettings","updateGrafanaPluginSettings","saveLLMOptInState","getLLMOptInState","plugin","AppPlugin","setRootPage","styles","subtitle","sectionsContainer","section","radius","sectionTitle","h3","sectionContent","bodySmall","fullWidthSection","infoBox","transparent","PluginPage","addConfigPage","icon","pinned","secureJsonFields","meta","setSettings","newSecrets","setNewSecrets","configuredSecrets","setConfiguredSecrets","vectorEmbedderBasicAuthPassword","vectorStoreBasicAuthPassword","initialSecrets","updated","setUpdated","managedLLMOptIn","setManagedLLMOptIn","isUpdating","setIsUpdating","healthCheck","setHealthCheck","errorState","validateInputs","fetchData","doSave","originalSettings","settingsToSave","healthCheckResult","effectiveProvider","checkPluginHealth","rollbackError","newSettings","displayVectorStoreOptions"],"sourceRoot":""}